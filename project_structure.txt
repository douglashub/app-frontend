
=== /Users/micaelsantana/Documents/app-frontend/src/contexts/NotificationContext.jsx ===

import React, { createContext, useState, useContext } from 'react';
import Notification from '../components/common/Notification';

// Create context
const NotificationContext = createContext();

// Custom hook to use the notification context
export const useNotification = () => {
  const context = useContext(NotificationContext);
  if (!context) {
    throw new Error('useNotification must be used within a NotificationProvider');
  }
  return context;
};

// Provider component
export const NotificationProvider = ({ children }) => {
  const [notification, setNotification] = useState({
    message: '',
    type: 'success',
    duration: 4000
  });

  const showNotification = ({ message, type = 'success', duration = 4000 }) => {
    // Handle multiline messages
    const formattedMessage = Array.isArray(message) ? message.join('\n') : message;
    setNotification({ message: formattedMessage, type, duration });
  };

  const clearNotification = () => {
    setNotification({ ...notification, message: '' });
  };

  // Enhanced notification methods with better error handling
  const showSuccess = (message, duration = 4000) => {
    showNotification({ message, type: 'success', duration });
  };

  const showError = (error, duration = 6000) => {
    let message = error;
    
    // Handle API errors
    if (error?.response) {
      message = error.userMessage || error.response.data?.message || 'Ocorreu um erro inesperado';
    } else if (typeof error === 'object') {
      message = error.message || 'Ocorreu um erro inesperado';
    }

    showNotification({ message, type: 'error', duration });
  };

  const showWarning = (message, duration = 5000) => {
    showNotification({ message, type: 'warning', duration });
  };

  const showInfo = (message, duration = 4000) => {
    showNotification({ message, type: 'info', duration });
  };

  return (
    <NotificationContext.Provider 
      value={{ 
        showNotification,
        clearNotification,
        showSuccess,
        showError,
        showWarning,
        showInfo
      }}
    >
      {children}
      <Notification 
        message={notification.message}
        type={notification.type}
        duration={notification.duration}
        onClose={clearNotification}
      />
    </NotificationContext.Provider>
  );
};
=== /Users/micaelsantana/Documents/app-frontend/src/utils/statusProcessor.js ===

/**
 * Utilitário para padronizar o processamento de status entre diferentes formatos
 * vindos do backend para o formato padrão usado no frontend
 */

/**
 * Converte diferentes formatos de status para um formato padrão do frontend
 * 
 * @param {any} status - O status que pode vir em diversos formatos (boolean, number, string)
 * @param {string} entityType - Tipo de entidade para ajustar o processamento
 * @returns {string} - Status padronizado para uso no frontend
 */
export const processStatus = (status, entityType = 'default') => {
    // Processa status em formato booleano
    if (typeof status === 'boolean') {
      return status ? 'active' : 'inactive';
    }
    
    // Processa status em formato numérico
    if (typeof status === 'number') {
      return status === 1 ? 'active' : 'inactive';
    }
    
    // Processa status em formato string
    if (typeof status === 'string') {
      const statusLower = status.toLowerCase();
      
      // Status comuns a todas entidades
      if (['true', 'ativo', 'ativa', '1', 'active'].includes(statusLower)) {
        return 'active';
      }
      
      if (['false', 'inativo', 'inativa', '0', 'inactive'].includes(statusLower)) {
        return 'inactive';
      }
      
      // Status específicos para motoristas e monitores
      if (['vacation', 'ferias', 'férias'].includes(statusLower)) {
        return 'vacation';
      }
      
      if (['leave', 'licenca', 'licença'].includes(statusLower)) {
        return 'leave';
      }
      
      // Status específicos para ônibus
      if (['manutenção', 'manutencao', 'em manutenção', 'em manutencao', 'maintenance'].includes(statusLower)) {
        return 'maintenance';
      }
      
      // Status específicos para viagens
      if (['completed', 'concluída', 'concluida', 'realizada'].includes(statusLower)) {
        return 'completed';
      }
      
      if (['pending', 'pendente'].includes(statusLower)) {
        return 'pending';
      }
      
      if (['in_progress', 'em andamento', 'andamento'].includes(statusLower)) {
        return 'in_progress';
      }
      
      if (['scheduled', 'programada', 'agendada'].includes(statusLower)) {
        return 'scheduled';
      }
      
      if (['canceled', 'cancelada', 'cancelado'].includes(statusLower)) {
        return 'canceled';
      }
      
      // Se chegarmos aqui, é um valor desconhecido - retorna o próprio valor para usar no fallback
      return statusLower;
    }
    
    // Fallback para undefined ou outros tipos
    return 'inactive';
  };
=== /Users/micaelsantana/Documents/app-frontend/src/utils/index.js ===

/**
 * Arquivo central de exportação de utilitários
 * Reúne todas as funções de utilidade em um único ponto de importação
 */

export * from './masks';
export { MASKS } from './masks';
export { processStatus } from './statusProcessor';
export * from './errorHandler';
export * from './rotas-utils';
=== /Users/micaelsantana/Documents/app-frontend/src/utils/errorHandler.js ===

/**
 * Utility functions for handling API errors and providing user-friendly messages
 */

// Map of HTTP status codes to user-friendly messages
const HTTP_ERROR_MESSAGES = {
  400: 'Os dados fornecidos são inválidos',
  401: 'Sua sessão expirou. Por favor, faça login novamente',
  403: 'Você não tem permissão para realizar esta ação',
  404: 'O recurso solicitado não foi encontrado',
  422: 'Os dados fornecidos são inválidos',
  429: 'Muitas tentativas. Por favor, aguarde um momento',
  500: 'Ocorreu um erro no servidor. Tente novamente mais tarde',
  503: 'Serviço temporariamente indisponível. Tente novamente mais tarde'
};

// Map of validation error fields to user-friendly labels
const FIELD_LABELS = {
  nome: 'Nome',
  email: 'E-mail',
  telefone: 'Telefone',
  placa: 'Placa',
  modelo: 'Modelo',
  capacidade: 'Capacidade',
  ano_fabricacao: 'Ano de Fabricação',
  horario_inicio: 'Horário de Início',
  horario_fim: 'Horário de Fim',
  status: 'Status'
};

/**
 * Format validation errors into user-friendly messages
 * @param {Object} errors - Validation errors object from API
 * @returns {string} Formatted error message
 */
export const formatValidationErrors = (errors) => {
  if (!errors || typeof errors !== 'object') return 'Dados inválidos fornecidos';

  return Object.entries(errors)
    .map(([field, messages]) => {
      const label = FIELD_LABELS[field] || field;
      const message = Array.isArray(messages) ? messages[0] : messages;
      return `${label}: ${message}`;
    })
    .join('\n');
};

/**
 * Get a user-friendly error message from an API error
 * @param {Error} error - The error object from API call
 * @returns {string} User-friendly error message
 */
export const getErrorMessage = (error) => {
  if (!error) return 'Ocorreu um erro desconhecido';

  // Handle network errors
  if (!error.response) {
    return 'Não foi possível conectar ao servidor. Verifique sua conexão';
  }

  const { status, data } = error.response;

  // Handle validation errors
  if (status === 422 && data.errors) {
    return formatValidationErrors(data.errors);
  }

  // Handle known HTTP status codes
  if (HTTP_ERROR_MESSAGES[status]) {
    return HTTP_ERROR_MESSAGES[status];
  }

  // Handle errors with message in response
  if (data.message) {
    return data.message;
  }

  // Default error message
  return 'Ocorreu um erro inesperado. Tente novamente mais tarde';
};

/**
 * Format error details for logging
 * @param {Error} error - The error object
 * @returns {Object} Formatted error details
 */
export const formatErrorForLogging = (error) => {
  return {
    message: error.message,
    status: error.response?.status,
    data: error.response?.data,
    url: error.config?.url,
    method: error.config?.method,
    timestamp: new Date().toISOString()
  };
};
=== /Users/micaelsantana/Documents/app-frontend/src/utils/rotas-utils.js ===

/**
 * Utilitários para formatação de números no formato brasileiro e para trabalhar
 * com quilometragem em rotas.
 */

/**
 * Converte um número formatado no padrão brasileiro para um valor numérico
 * Aceita valores com vírgula como separador decimal
 * 
 * @param {string|number} value - Valor a ser convertido (ex: "1.234,56" ou "1234,56")
 * @returns {number|null} - Valor numérico ou null se inválido
 */
export const parseNumeroDecimal = (value) => {
    if (value === undefined || value === null || value === '') {
        return null;
    }

    try {
        // Se já for um número, retorna ele mesmo
        if (typeof value === 'number') {
            return value;
        }

        // Converte para string se não for
        const valorStr = String(value);

        // Remove pontos de milhar e substitui vírgula por ponto
        const valorLimpo = valorStr
            .replace(/\./g, '') // Remove pontos de milhar
            .replace(',', '.'); // Substitui vírgula por ponto

        const numero = parseFloat(valorLimpo);
        return isNaN(numero) ? null : numero;
    } catch (error) {
        console.error('Erro ao converter valor para número:', error);
        return null;
    }
};

/**
 * Formata um número para o padrão brasileiro com vírgula como separador decimal
 * 
 * @param {number|string} value - Valor a ser formatado
 * @param {number} [decimais=2] - Número de casas decimais
 * @returns {string} - Valor formatado (ex: "1.234,56")
 */
export const formatarNumeroDecimal = (value, decimais = 2) => {
    if (value === undefined || value === null || value === '') {
        return '';
    }

    try {
        const numero = typeof value === 'string' ? parseNumeroDecimal(value) : value;

        if (numero === null || isNaN(numero)) {
            return '';
        }

        return numero.toLocaleString('pt-BR', {
            minimumFractionDigits: decimais,
            maximumFractionDigits: decimais
        });
    } catch (error) {
        console.error('Erro ao formatar número:', error);
        return String(value);
    }
};

/**
 * Formata uma distância em quilômetros para exibição
 * Adiciona sufixo "km" e formata o número no padrão brasileiro
 * 
 * @param {number|string} distancia - Valor em quilômetros
 * @param {number} [decimais=1] - Número de casas decimais
 * @returns {string} - Distância formatada (ex: "1.234,5 km")
 */
export const formatarDistanciaKm = (distancia, decimais = 1) => {
    if (distancia === undefined || distancia === null || distancia === '') {
        return '-';
    }

    const valor = formatarNumeroDecimal(distancia, decimais);
    return valor ? `${valor} km` : '-';
};

/**
 * Valida se um valor de quilometragem é válido
 * 
 * @param {string|number} value - Valor a ser validado
 * @returns {boolean} - true se for um valor válido
 */
export const isQuilometragemValida = (value) => {
    if (value === undefined || value === null || value === '') {
        return false;
    }

    const numero = parseNumeroDecimal(value);
    return numero !== null && numero >= 0 && numero <= 100000; // Limite de 100.000 km
};

/**
 * Formata tempo em minutos para horas e minutos
 * 
 * @param {number} minutos - Tempo em minutos
 * @returns {string} - Tempo formatado (ex: "2h 30min")
 */
export const formatarTempoMinutos = (minutos) => {
    if (minutos === undefined || minutos === null || minutos === '' || isNaN(minutos)) {
        return '-';
    }

    const horas = Math.floor(minutos / 60);
    const mins = minutos % 60;

    if (horas > 0 && mins > 0) {
        return `${horas}h ${mins}min`;
    } else if (horas > 0) {
        return `${horas}h`;
    } else {
        return `${mins}min`;
    }
};

export default {
    parseNumeroDecimal,
    formatarNumeroDecimal,
    formatarDistanciaKm,
    isQuilometragemValida,
    formatarTempoMinutos
};
=== /Users/micaelsantana/Documents/app-frontend/src/utils/masks/constants.js ===

/**
 * Constantes de máscaras para inputs do sistema
 */

// Definição das máscaras de entrada
export const MASKS = {
    // Documentos
    CPF: '999.999.999-99',
    CNPJ: '99.999.999/9999-99',
    RG: '99.999.999-9',
    CNH: '999999999aa',
  
    // Contato
    PHONE: '(99) 99999-9999',
    LANDLINE: '(99) 9999-9999',
  
    // Veículos - formatos atualizados
    LICENSE_PLATE_MERCOSUL: 'aaa9a99', // Formato Mercosul
    LICENSE_PLATE_BRAZIL: 'aaa-9999', // Formato antigo brasileiro
    LICENSE_PLATE: '', // Dinâmico - será definido pelo componente PlacaInput
  
    // Datas e horas
    DATE: '99/99/9999',
    TIME: '99:99',
    DATE_TIME: '99/99/9999 99:99',
  
    // Endereços
    CEP: '99999-999',
  
    // Valores
    MONEY: 'R$ 999.999.999,99',
  
    // Utilitários
    INTEGER: '9999999999',
    DECIMAL: '9999999999,99',
  };
  
  // Caracteres para as máscaras
  export const MASK_CHARS = {
    '9': /[0-9]/,       // Apenas números
    'a': /[a-zA-Z]/,    // Apenas letras
    '*': /[0-9a-zA-Z]/, // Letras e números
    'S': /[a-zA-Z]/,    // Apenas letras (alternativo)
    '0': /[0-9]/,       // Apenas números (alternativo)
  };
  
  // Placeholders para os inputs
  export const PLACEHOLDERS = {
    CPF: '000.000.000-00',
    CNPJ: '00.000.000/0000-00',
    PHONE: '(00) 00000-0000',
    LICENSE_PLATE: 'AAA0A00',
    DATE: 'DD/MM/AAAA',
    CEP: '00000-000',
  };
  
  export default MASKS;
=== /Users/micaelsantana/Documents/app-frontend/src/utils/masks/index.js ===

/**
 * Exporta todos os componentes e utilitários de máscaras
 * Esse arquivo funciona como ponto de entrada para as máscaras
 * e mantém compatibilidade com o código existente
 */

// Importar itens de outros arquivos
import MASKS, { MASK_CHARS, PLACEHOLDERS } from './constants';
import * as processors from './processors';
import * as formatters from './formatters';
import * as detectors from './detectors';
import MaskedInput from './components/MaskedInput';
import PlacaInput from './components/PlacaInput';
import DocumentInput from './components/DocumentInput';
import PhoneInput from './components/PhoneInput';

// Re-exportar constantes
export { MASKS, MASK_CHARS, PLACEHOLDERS };

// Re-exportar processadores
export const {
  unmask,
  unmaskAlphanumeric,
  unmaskPlaca,
  processInputValue,
  processFormData
} = processors;

// Re-exportar formatadores
export const {
  formatDocument,
  formatPhone,
  formatPlaca,
  formatDate,
  formatCurrency,
  formatTimeForDisplay,
  formatTimeForApi
} = formatters;

// Re-exportar detectores
export const {
  detectPlacaFormat,
  detectDocumentType,
  detectPhoneType,
  isNumeric,
  isAlphabetic,
  isAlphanumeric,
  isValidPlaca
} = detectors;

// Re-exportar componentes
export { MaskedInput, PlacaInput, DocumentInput, PhoneInput };

// Exportar o objeto principal (compatível com o import default do arquivo antigo)
const MaskUtils = {
  // Constantes
  ...MASKS,
  MASKS,
  MASK_CHARS,
  PLACEHOLDERS,

  // Processadores
  ...processors,

  // Formatadores
  ...formatters,

  // Detectores
  ...detectors,

  // Componentes
  Components: {
    MaskedInput,
    PlacaInput,
    DocumentInput,
    PhoneInput
  }
};

// Exportação padrão para manter compatibilidade com código existente
export default MASKS;
=== /Users/micaelsantana/Documents/app-frontend/src/utils/masks/formatters.js ===

/**
 * Funções de formatação para exibição de dados
 */

import { unmask } from './processors';
import { detectPlacaFormat } from './detectors';

/**
 * Formatar documento CPF ou CNPJ baseado no tamanho
 * @param {string} value - Valor numérico do documento
 * @returns {string} Documento formatado ou vazio se inválido
 */
export const formatDocument = (value) => {
  if (!value) return '';
  const numbers = unmask(value);
  
  if (numbers.length === 11) {
    // CPF
    return numbers.replace(/(\d{3})(\d{3})(\d{3})(\d{2})/, '$1.$2.$3-$4');
  } else if (numbers.length === 14) {
    // CNPJ
    return numbers.replace(/(\d{2})(\d{3})(\d{3})(\d{4})(\d{2})/, '$1.$2.$3/$4-$5');
  }
  
  return value; // Retorna o valor original se não for CPF nem CNPJ
};

/**
 * Formatar um número de telefone
 * @param {string} value - Valor do telefone
 * @returns {string} Telefone formatado
 */
export const formatPhone = (value) => {
  if (!value) return '';
  const numbers = unmask(value);
  
  if (numbers.length === 11) {
    // Celular
    return numbers.replace(/(\d{2})(\d{5})(\d{4})/, '($1) $2-$3');
  } else if (numbers.length === 10) {
    // Telefone fixo
    return numbers.replace(/(\d{2})(\d{4})(\d{4})/, '($1) $2-$3');
  }
  
  return value; // Retorna o valor original se não for telefone válido
};

/**
 * Formatar placa de veículo para exibição
 * @param {string} value - Placa sem formatação
 * @returns {string} Placa formatada para exibição
 */
export const formatPlaca = (value) => {
  if (!value) return '';
  
  const cleaned = value.toUpperCase().replace(/[^A-Z0-9]/g, '');
  
  if (cleaned.length !== 7) return cleaned;
  
  const format = detectPlacaFormat(cleaned);
  
  if (format === 'mercosul') {
    // Formato Mercosul não tem hífen
    return cleaned;
  } else if (format === 'tradicional') {
    // Formato tradicional tem hífen após as 3 letras
    return `${cleaned.substring(0, 3)}-${cleaned.substring(3)}`;
  }
  
  return cleaned;
};

/**
 * Formatar uma data no formato ISO para exibição
 * @param {string} dateString - Data em formato ISO ou string
 * @param {string} format - Formato de saída (default: 'dd/mm/yyyy')
 * @returns {string} Data formatada ou vazio se inválida
 */
export const formatDate = (dateString, format = 'dd/mm/yyyy') => {
  if (!dateString) return '';
  
  try {
    const date = new Date(dateString);
    if (isNaN(date.getTime())) return dateString;
    
    const day = date.getDate().toString().padStart(2, '0');
    const month = (date.getMonth() + 1).toString().padStart(2, '0');
    const year = date.getFullYear();
    
    if (format === 'dd/mm/yyyy') {
      return `${day}/${month}/${year}`;
    } else if (format === 'mm/dd/yyyy') {
      return `${month}/${day}/${year}`;
    } else if (format === 'yyyy-mm-dd') {
      return `${year}-${month}-${day}`;
    }
    
    return `${day}/${month}/${year}`;
  } catch (error) {
    console.error('Error formatting date:', error);
    return dateString || '';
  }
};

/**
 * Formatar um valor monetário
 * @param {number|string} value - Valor numérico
 * @param {string} currency - Símbolo da moeda (default: 'R$')
 * @returns {string} Valor formatado como moeda
 */
export const formatCurrency = (value, currency = 'R$') => {
  if (value === undefined || value === null) return '';
  
  try {
    // Converte para número se for string
    const numValue = typeof value === 'string' ? 
      parseFloat(value.replace(',', '.')) : value;
    
    if (isNaN(numValue)) return value;
    
    // Formata com 2 casas decimais, separador de milhares e separador decimal
    return `${currency} ${numValue.toLocaleString('pt-BR', {
      minimumFractionDigits: 2,
      maximumFractionDigits: 2
    })}`;
  } catch (error) {
    console.error('Error formatting currency:', error);
    return value.toString();
  }
};

/**
 * Formatar time values from API format (H:i) to HTML time input format (HH:mm)
 * @param {string} time - Time in H:i format
 * @returns {string} - Time in HH:mm format
 */
export const formatTimeForDisplay = (time) => {
  if (!time) return '';

  try {
    // Handle different time formats from API
    const timeParts = time.split(':');

    if (timeParts.length < 2) return time; // Return as is if not valid

    const hours = timeParts[0].padStart(2, '0');
    const minutes = timeParts[1].substring(0, 2).padStart(2, '0');

    return `${hours}:${minutes}`;
  } catch (error) {
    console.error('Error formatting time for display:', error);
    return time || '';
  }
};

/**
 * Format time values for API (HH:mm to H:i)
 * @param {string} time - Time in HH:mm format 
 * @returns {string} - Time in H:i format or null if input is empty
 */
export const formatTimeForApi = (time) => {
  if (!time) return null;

  try {
    // Split time into hours and minutes
    const [hours, minutes] = time.split(':');

    // Convert hours to integer to remove leading zeros
    const hour = parseInt(hours, 10);

    // Return formatted time (H:i format as Laravel expects)
    return `${hour}:${minutes}`;
  } catch (error) {
    console.error('Error formatting time:', error);
    return null;
  }
};

export default {
  formatDocument,
  formatPhone,
  formatPlaca,
  formatDate,
  formatCurrency,
  formatTimeForDisplay,
  formatTimeForApi
};
=== /Users/micaelsantana/Documents/app-frontend/src/utils/masks/components/PlacaInput.jsx ===

import React, { useState, useEffect, useRef } from "react";

/**
 * Componente para entrada de placas de veículos com detecção automática de formato
 * Suporta formato Mercosul (AAA0A00) e tradicional (AAA-0000)
 * 
 * @param {Object} props - Propriedades do componente
 * @param {string} props.value - Valor atual da placa
 * @param {function} props.onChange - Função chamada quando o valor muda
 * @param {string} props.name - Nome do campo
 * @param {string} props.className - Classes CSS adicionais
 * @param {string} props.placeholder - Texto de placeholder
 * @param {Object} props.rest - Outras propriedades do input
 * @param {React.Ref} ref - Referência para o input
 */
const PlacaInput = React.forwardRef(({ 
  value, 
  onChange, 
  name = "placa", 
  className = "border rounded p-2 w-full uppercase",
  placeholder = "Digite a placa do veículo",
  ...rest
}, ref) => {
  const [inputValue, setInputValue] = useState(value || "");
  const inputRef = useRef(null);
  
  // Determina o padrão de máscara baseado no valor de entrada
  const getMaskPattern = (val) => {
    const cleanVal = val.replace(/[^\w]/g, '').toUpperCase();
    
    // Verifica formato Mercosul: 3 letras + 1 número + 1 letra + 2 números
    const mercosul = /([A-Z]{3}[0-9]{1}[A-Z]{1})/;
    
    // Verifica formato tradicional: 3 letras + 2 números
    const normal = /([A-Z]{3}[0-9]{2})/;
    
    if (normal.test(cleanVal)) {
      return "SSS-0000"; // Formato tradicional
    } else if (mercosul.test(cleanVal)) {
      return "SSS0A00"; // Formato Mercosul
    }
    
    // Se não houver caracteres suficientes para determinar, usa uma máscara flexível
    return "SSS0A00"; // Padrão para Mercosul como é o formato atual
  };
  
  // Aplica a máscara ao valor
  const applyMask = (val, pattern) => {
    let cleanVal = val.replace(/[^\w]/g, '').toUpperCase();
    let result = '';
    let charIndex = 0;
    
    // Limita a 7 caracteres (o conteúdo real da placa)
    cleanVal = cleanVal.slice(0, 7);
    
    // Aplica o padrão
    for (let i = 0; i < pattern.length && charIndex < cleanVal.length; i++) {
      const patternChar = pattern[i];
      
      if (patternChar === 'S') {
        // 'S' é para letras (A-Z)
        if (/[A-Z]/.test(cleanVal[charIndex])) {
          result += cleanVal[charIndex];
          charIndex++;
        } else {
          // Pula caracteres não-letra para posições 'S'
          charIndex++;
          i--; // Tenta esta posição de padrão novamente
        }
      } else if (patternChar === '0') {
        // '0' é para números (0-9)
        if (/[0-9]/.test(cleanVal[charIndex])) {
          result += cleanVal[charIndex];
          charIndex++;
        } else {
          // Pula caracteres não-número para posições '0'
          charIndex++;
          i--; // Tenta esta posição de padrão novamente
        }
      } else if (patternChar === 'A') {
        // 'A' é para letras (A-Z)
        if (/[A-Z]/.test(cleanVal[charIndex])) {
          result += cleanVal[charIndex];
          charIndex++;
        } else {
          // Pula caracteres não-letra para posições 'A'
          charIndex++;
          i--; // Tenta esta posição de padrão novamente
        }
      } else if (patternChar === '-') {
        // Adiciona hífen para formato tradicional
        result += '-';
      } else {
        // Adiciona qualquer outro caractere do padrão como está
        result += patternChar;
        
        // Se o caractere do padrão corresponder ao caractere de entrada, consuma-o
        if (patternChar === cleanVal[charIndex]) {
          charIndex++;
        }
      }
    }
    
    return result;
  };
  
  // Formata o valor de acordo com o padrão detectado
  const formatValue = (val) => {
    // Remove qualquer caractere de máscara existente
    const cleanVal = val.replace(/[^\w]/g, '').toUpperCase();
    
    // Se vazio, retorna vazio
    if (!cleanVal) return '';
    
    // Determina o padrão de máscara apropriado
    const pattern = getMaskPattern(cleanVal);
    
    // Aplica a máscara
    return applyMask(cleanVal, pattern);
  };

  // Manipula a alteração do input
  const handleChange = (e) => {
    const rawValue = e.target.value.toUpperCase();
    
    // Formata o valor
    const formatted = formatValue(rawValue);
    setInputValue(formatted);
    
    // Cria um evento sintético para onChange
    const syntheticEvent = {
      target: {
        name: e.target.name,
        value: formatted
      }
    };
    
    onChange && onChange(syntheticEvent);
  };

  // Manipula o evento de colar (paste)
  const handlePaste = (e) => {
    // Deixa a colagem acontecer, depois formata no próximo ciclo
    setTimeout(() => {
      const rawValue = e.target.value.toUpperCase();
      const formatted = formatValue(rawValue);
      setInputValue(formatted);
      
      // Cria um evento sintético para onChange
      const syntheticEvent = {
        target: {
          name: e.target.name,
          value: formatted
        }
      };
      
      onChange && onChange(syntheticEvent);
    }, 0);
  };

  // Inicializa o valor formatado quando o componente é montado ou o valor prop muda
  useEffect(() => {
    if (value) {
      const formatted = formatValue(value);
      setInputValue(formatted);
    } else {
      setInputValue("");
    }
  }, [value]);

  // Lida com o encaminhamento de ref
  const setRef = (element) => {
    // Define a ref interna
    inputRef.current = element;
    
    // Encaminha a ref
    if (ref) {
      if (typeof ref === 'function') {
        ref(element);
      } else {
        ref.current = element;
      }
    }
  };

  return (
    <input
      ref={setRef}
      type="text"
      name={name}
      className={className}
      value={inputValue}
      onChange={handleChange}
      onPaste={handlePaste}
      placeholder={placeholder}
      maxLength={8} // O formato mais longo é AAA-0000 (8 caracteres)
      {...rest}
    />
  );
});

export default PlacaInput;
=== /Users/micaelsantana/Documents/app-frontend/src/utils/masks/components/MaskedInput.jsx ===

import React, { useState, useEffect, useRef } from 'react';
import { MASK_CHARS } from '../constants';

/**
 * Componente para campos de entrada com máscara
 * Implementação personalizada com funcionalidade similar ao PatternFormat
 * 
 * @param {string} mask - Padrão da máscara no formato react-input-mask (ex: "99/99/9999")
 * @param {string} format - Padrão da máscara no formato react-number-format (ex: "##/##/####")
 * @param {string} name - Nome do campo
 * @param {string} id - ID do campo
 * @param {string} value - Valor do campo
 * @param {function} onChange - Função de callback para mudanças
 * @param {string} label - Texto do label (opcional)
 * @param {boolean} required - Se o campo é obrigatório
 * @param {string} placeholder - Placeholder para o campo
 * @param {string} className - Classes CSS adicionais
 * @param {object} props - Propriedades adicionais
 */
const MaskedInput = React.forwardRef(({ 
  mask,
  format,
  name,
  id,
  value,
  onChange,
  label,
  required = false,
  placeholder = '',
  className = '',
  ...props
}, ref) => {
  // Converter máscara para formato padrão interno
  const getStandardMask = () => {
    if (format) return format.replace(/#/g, '9').replace(/\*/g, 'a');
    if (mask) return mask;
    return '';
  };
  
  const standardMask = getStandardMask();
  const [inputValue, setInputValue] = useState(value || '');
  const inputRef = useRef(null);
  
  // Atualiza o valor quando a prop value muda
  useEffect(() => {
    if (value !== undefined && value !== inputValue) {
      setInputValue(value);
    }
  }, [value]);

  // Aplica a máscara ao valor
  const applyMask = (val) => {
    if (!val) return '';
    if (!standardMask) return val;
    
    let result = '';
    let valueIndex = 0;
    
    // Percorre cada caractere da máscara
    for (let i = 0; i < standardMask.length && valueIndex < val.length; i++) {
      const maskChar = standardMask[i];
      
      // Define o padrão baseado no caractere da máscara
      let pattern;
      if (maskChar === '9') {
        pattern = /[0-9]/;
      } else if (maskChar === 'a') {
        pattern = /[a-zA-Z]/;
      } else if (maskChar === '*') {
        pattern = /[0-9a-zA-Z]/;
      } else {
        // Caractere estático da máscara
        result += maskChar;
        
        // Pula o caractere do valor se for igual ao caractere da máscara
        if (val[valueIndex] === maskChar) {
          valueIndex++;
        }
        continue;
      }
      
      // Procura o próximo caractere válido
      while (valueIndex < val.length) {
        const char = val[valueIndex];
        valueIndex++;
        
        if (pattern.test(char)) {
          result += char;
          break;
        }
      }
    }
    
    return result;
  };

  // Manipula a mudança de valor
  const handleChange = (e) => {
    const rawValue = e.target.value;
    const maskedValue = applyMask(rawValue);
    
    setInputValue(maskedValue);
    
    if (onChange) {
      // Simular um evento similar ao formato do react-number-format
      onChange({
        target: {
          name: name,
          value: maskedValue
        },
        value: maskedValue // Compatível com a API do react-number-format
      });
    }
  };

  // Manipula a operação de paste
  const handlePaste = (e) => {
    setTimeout(() => {
      const rawValue = e.target.value;
      const maskedValue = applyMask(rawValue);
      
      setInputValue(maskedValue);
      
      if (onChange) {
        onChange({
          target: {
            name: name,
            value: maskedValue
          },
          value: maskedValue
        });
      }
    }, 0);
  };

  // Manipula as referências
  const handleRef = (el) => {
    inputRef.current = el;
    
    // Compatibilidade com getInputRef do react-number-format
    if (ref) {
      if (typeof ref === 'function') {
        ref(el);
      } else {
        ref.current = el;
      }
    }
  };

  return (
    <div className="mb-4">
      {label && (
        <label htmlFor={id} className="block text-sm font-medium text-gray-700 mb-1">
          {label} {required && <span className="text-red-500">*</span>}
        </label>
      )}
      <input
        ref={handleRef}
        type="text"
        id={id}
        name={name}
        value={inputValue}
        onChange={handleChange}
        onPaste={handlePaste}
        placeholder={placeholder}
        className={`mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 ${className}`}
        {...props}
      />
    </div>
  );
});

export default MaskedInput;
=== /Users/micaelsantana/Documents/app-frontend/src/utils/masks/components/DocumentInput.jsx ===

import React, { useState, useEffect, useRef } from "react";
import { MASKS } from '../constants';
import { detectDocumentType } from '../detectors';
import MaskedInput from './MaskedInput';

/**
 * Componente de entrada para documentos com detecção automática
 * Suporta CPF e CNPJ, detectando automaticamente o formato
 * 
 * @param {Object} props - Propriedades do componente
 * @param {string} props.value - Valor atual
 * @param {function} props.onChange - Função chamada quando o valor muda
 * @param {string} props.name - Nome do campo
 * @param {string} props.className - Classes CSS adicionais
 * @param {string} props.placeholder - Texto de placeholder
 * @param {Object} props.rest - Outras propriedades do input
 * @param {React.Ref} ref - Referência para o input
 */
const DocumentInput = React.forwardRef(({
  value,
  onChange,
  name = "documento",
  className = "border rounded p-2 w-full",
  placeholder = "CPF ou CNPJ",
  ...rest
}, ref) => {
  const [mask, setMask] = useState(MASKS.CPF);
  const [inputValue, setInputValue] = useState(value || "");
  const inputRef = useRef(null);

  // Define a máscara baseada no valor
  useEffect(() => {
    if (value) {
      const docType = detectDocumentType(value);
      setMask(docType === 'cnpj' ? MASKS.CNPJ : MASKS.CPF);
    }
  }, [value]);

  // Manipula a mudança de valor
  const handleChange = (e) => {
    const newValue = e.target.value;
    setInputValue(newValue);
    
    // Detecta o tipo de documento e ajusta a máscara
    const docType = detectDocumentType(newValue);
    const newMask = docType === 'cnpj' ? MASKS.CNPJ : MASKS.CPF;
    setMask(newMask);
    
    // Passa o evento para o onChange
    onChange && onChange(e);
  };

  // Lida com encaminhamento de ref
  const setRef = (el) => {
    inputRef.current = el;
    
    if (ref) {
      if (typeof ref === 'function') {
        ref(el);
      } else {
        ref.current = el;
      }
    }
  };

  return (
    <MaskedInput
      ref={setRef}
      value={inputValue}
      onChange={handleChange}
      mask={mask}
      name={name}
      className={className}
      placeholder={placeholder}
      {...rest}
    />
  );
});

export default DocumentInput;
=== /Users/micaelsantana/Documents/app-frontend/src/utils/masks/components/PhoneInput.jsx ===

import React, { useState, useEffect, useRef } from "react";
import { MASKS } from '../constants';
import { detectPhoneType } from '../detectors';
import MaskedInput from './MaskedInput';

/**
 * Componente de entrada para telefones com detecção automática
 * Suporta celular e telefone fixo, detectando automaticamente o formato
 * 
 * @param {Object} props - Propriedades do componente
 * @param {string} props.value - Valor atual
 * @param {function} props.onChange - Função chamada quando o valor muda
 * @param {string} props.name - Nome do campo
 * @param {string} props.className - Classes CSS adicionais
 * @param {string} props.placeholder - Texto de placeholder
 * @param {Object} props.rest - Outras propriedades do input
 * @param {React.Ref} ref - Referência para o input
 */
const PhoneInput = React.forwardRef(({
  value,
  onChange,
  name = "telefone",
  className = "border rounded p-2 w-full",
  placeholder = "Telefone",
  ...rest
}, ref) => {
  const [mask, setMask] = useState(MASKS.PHONE);
  const [inputValue, setInputValue] = useState(value || "");
  const inputRef = useRef(null);

  // Define a máscara baseada no valor
  useEffect(() => {
    if (value) {
      const phoneType = detectPhoneType(value);
      setMask(phoneType === 'fixo' ? MASKS.LANDLINE : MASKS.PHONE);
    }
  }, [value]);

  // Manipula a mudança de valor
  const handleChange = (e) => {
    const newValue = e.target.value;
    setInputValue(newValue);
    
    // Detecta o tipo de telefone e ajusta a máscara
    const phoneType = detectPhoneType(newValue);
    const newMask = phoneType === 'fixo' ? MASKS.LANDLINE : MASKS.PHONE;
    setMask(newMask);
    
    // Passa o evento para o onChange
    onChange && onChange(e);
  };

  // Lida com encaminhamento de ref
  const setRef = (el) => {
    inputRef.current = el;
    
    if (ref) {
      if (typeof ref === 'function') {
        ref(el);
      } else {
        ref.current = el;
      }
    }
  };

  return (
    <MaskedInput
      ref={setRef}
      value={inputValue}
      onChange={handleChange}
      mask={mask}
      name={name}
      className={className}
      placeholder={placeholder}
      {...rest}
    />
  );
});

export default PhoneInput;
=== /Users/micaelsantana/Documents/app-frontend/src/utils/masks/processors.js ===

/**
 * Funções de processamento para máscaras
 * Estas funções removem ou processam valores mascarados
 */

/**
 * Remover qualquer máscara de um valor (para envio ao backend)
 * @param {string} value - Valor com máscara
 * @returns {string} Valor sem máscara
 */
export const unmask = (value) => {
    if (!value) return '';
    return value.replace(/\D/g, '');
  };
  
  /**
   * Remover caracteres especiais mantendo letras e números
   * @param {string} value - Valor com caracteres especiais
   * @returns {string} Valor com apenas letras e números
   */
  export const unmaskAlphanumeric = (value) => {
    if (!value) return '';
    return value.replace(/[^\w]/g, '');
  };
  
  /**
   * Remover máscara e formatar placa de veículo para envio ao backend
   * @param {string} value - Placa com ou sem máscara
   * @returns {string} Placa formatada para envio ao backend
   */
  export const unmaskPlaca = (value) => {
    if (!value) return '';
    
    // Remove caracteres especiais e converte para maiúsculo
    const cleaned = value.toUpperCase().replace(/[^A-Z0-9]/g, '');
    
    // Se não tiver 7 caracteres, retorna o valor limpo como está
    if (cleaned.length !== 7) return cleaned;
  
    // Verifica se é formato Mercosul (3 letras + 1 número + 1 letra + 2 números)
    const isMercosul = /[A-Z]{3}[0-9][A-Z][0-9]{2}/.test(cleaned);
    
    // Verifica se é formato antigo (3 letras + 4 números)
    const isOldFormat = /[A-Z]{3}[0-9]{4}/.test(cleaned);
    
    // Se for um dos formatos válidos, retorna como está
    if (isMercosul || isOldFormat) {
      return cleaned;
    }
    
    // Caso contrário, tenta verificar se é próximo de algum formato conhecido
    // Verifica se o 4º caractere é numérico (formato Mercosul potencial)
    if (/\d/.test(cleaned[3])) {
      // Potencialmente formato Mercosul
      return cleaned;
    }
    
    // Em outros casos, retorna o valor limpo
    return cleaned;
  };
  
  /**
   * Processa valor de entrada para formulários/APIs
   * Converte string para número e trata valores vazios
   * @param {string} value - Valor a ser processado
   * @param {string} type - Tipo de dado ('int', 'float', ou vazio para string)
   * @returns {number|string|null} Valor processado
   */
  export const processInputValue = (value, type) => {
    if (value === undefined || value === null || value === '') {
      return null;
    }
    
    if (type === 'int') {
      return parseInt(unmask(value), 10) || null;
    }
    
    if (type === 'float') {
      // Convert comma to dot for JS float parsing
      const numStr = value.toString().replace(',', '.');
      return parseFloat(numStr) || null;
    }
    
    return value; // return as string
  };
  
  /**
   * Processa um array de valores para submissão ao backend
   * @param {Object} data - Objeto com dados a serem processados
   * @param {Object} config - Configuração de campos {campo: tipo}
   * @returns {Object} Dados processados
   */
  export const processFormData = (data, config = {}) => {
    const result = { ...data };
    
    Object.entries(config).forEach(([field, type]) => {
      if (data[field] !== undefined) {
        result[field] = processInputValue(data[field], type);
      }
    });
    
    return result;
  };
  
  /**
 * Remove máscara e valida quilometragem formatada
 * @param {string} value - Valor com máscara (ex: 1.234,56 km)
 * @returns {number|null} Valor numérico ou null se inválido
 */
export const unmaskQuilometragem = (value) => {
    if (!value) return null;
    
    // Remove texto e mantém apenas números e ponto decimal
    const cleaned = value.replace(/[^0-9,]/g, '').replace(',', '.');
    
    // Converte para float e valida intervalo
    const numericValue = parseFloat(cleaned);
    return !isNaN(numericValue) && numericValue >= 0 && numericValue <= 999999.99 
        ? numericValue 
        : null;
};

export default {
    unmask,
    unmaskAlphanumeric,
    unmaskPlaca,
    processInputValue,
    processFormData,
    unmaskQuilometragem
  };
=== /Users/micaelsantana/Documents/app-frontend/src/utils/masks/detectors.js ===

/**
 * Funções para detectar formatos de dados
 */

/**
 * Detecta o tipo de placa baseado no formato
 * @param {string} value - Placa de veículo
 * @returns {string} - 'mercosul', 'tradicional' ou 'desconhecido'
 */
export const detectPlacaFormat = (value) => {
    if (!value) return 'desconhecido';
    
    const cleaned = value.toUpperCase().replace(/[^A-Z0-9]/g, '');
    
    if (cleaned.length >= 4 && /\d/.test(cleaned[3])) {
      return 'mercosul';
    } else if (cleaned.length >= 3 && /[A-Z]{3}/.test(cleaned.substring(0, 3))) {
      return 'tradicional';
    }
    
    return 'desconhecido';
  };
  
  /**
   * Detecta o tipo de documento baseado no formato
   * @param {string} value - Documento (CPF ou CNPJ)
   * @returns {string} - 'cpf', 'cnpj' ou 'desconhecido'
   */
  export const detectDocumentType = (value) => {
    if (!value) return 'desconhecido';
    
    // Remove todos os caracteres não numéricos
    const cleaned = value.replace(/\D/g, '');
    
    if (cleaned.length === 11) {
      return 'cpf';
    } else if (cleaned.length === 14) {
      return 'cnpj';
    }
    
    return 'desconhecido';
  };
  
  /**
   * Detecta o tipo de telefone baseado no formato
   * @param {string} value - Número de telefone
   * @returns {string} - 'celular', 'fixo' ou 'desconhecido'
   */
  export const detectPhoneType = (value) => {
    if (!value) return 'desconhecido';
    
    // Remove todos os caracteres não numéricos
    const cleaned = value.replace(/\D/g, '');
    
    if (cleaned.length === 11) {
      return 'celular';
    } else if (cleaned.length === 10) {
      return 'fixo';
    }
    
    return 'desconhecido';
  };
  
  /**
   * Verifica se um texto contém apenas caracteres numéricos
   * @param {string} value - Texto a ser verificado
   * @returns {boolean} - true se contém apenas números, false caso contrário
   */
  export const isNumeric = (value) => {
    if (!value) return false;
    return /^\d+$/.test(value);
  };
  
  /**
   * Verifica se um texto contém apenas caracteres alfabéticos
   * @param {string} value - Texto a ser verificado
   * @returns {boolean} - true se contém apenas letras, false caso contrário
   */
  export const isAlphabetic = (value) => {
    if (!value) return false;
    return /^[a-zA-Z]+$/.test(value);
  };
  
  /**
   * Verifica se um texto contém apenas caracteres alfanuméricos
   * @param {string} value - Texto a ser verificado
   * @returns {boolean} - true se contém apenas letras e números, false caso contrário
   */
  export const isAlphanumeric = (value) => {
    if (!value) return false;
    return /^[a-zA-Z0-9]+$/.test(value);
  };
  
  /**
   * Verifica se uma placa é válida baseada no formato
   * @param {string} value - Placa a ser verificada
   * @returns {boolean} - true se a placa é válida, false caso contrário
   */
  export const isValidPlaca = (value) => {
    if (!value) return false;
    
    const cleaned = value.toUpperCase().replace(/[^A-Z0-9]/g, '');
    
    if (cleaned.length !== 7) return false;
    
    // Verifica formato Mercosul (3 letras + 1 número + 1 letra + 2 números)
    const isMercosul = /^[A-Z]{3}[0-9][A-Z][0-9]{2}$/.test(cleaned);
    
    // Verifica formato tradicional (3 letras + 4 números)
    const isTradicional = /^[A-Z]{3}[0-9]{4}$/.test(cleaned);
    
    return isMercosul || isTradicional;
  };
  
  export default {
    detectPlacaFormat,
    detectDocumentType,
    detectPhoneType,
    isNumeric,
    isAlphabetic,
    isAlphanumeric,
    isValidPlaca
  };
=== /Users/micaelsantana/Documents/app-frontend/src/index.css ===

@tailwind base;
@tailwind components;
@tailwind utilities;

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html, body {
  height: 100%;
  overflow-x: hidden;
}

body {
  @apply min-h-screen bg-blue-50;
}

.primary {
  @apply text-blue-600;
}

.secondary {
  @apply text-green-600;
}
=== /Users/micaelsantana/Documents/app-frontend/src/components/common/DataTable.jsx ===

import React, { useState } from 'react'

export default function DataTable({ 
  columns, 
  data = [], 
  onEdit, 
  onDelete,
  loading,
  error
}) {
  // Ensure data is always an array
  const safeData = Array.isArray(data) ? data : [];
  
  // Pagination state
  const [currentPage, setCurrentPage] = useState(1);
  const rowsPerPage = 10;
  const totalPages = Math.ceil(safeData.length / rowsPerPage);
  const paginatedData = safeData.slice(
    (currentPage - 1) * rowsPerPage,
    currentPage * rowsPerPage
  );
  
  return (
    <div className="bg-white overflow-hidden">
      {loading && (
        <div className="flex justify-center items-center p-8">
          <div className="flex items-center">
            <svg className="animate-spin h-5 w-5 mr-3 text-blue-500" viewBox="0 0 24 24">
              <circle className="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" strokeWidth="4"></circle>
              <path className="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
            </svg>
            <span>Carregando dados...</span>
          </div>
        </div>
      )}

      {error && (
        <div className="p-4 text-red-600 bg-red-50 rounded-md m-4 flex items-start">
          <svg xmlns="http://www.w3.org/2000/svg" className="h-5 w-5 mr-2 mt-0.5 flex-shrink-0" viewBox="0 0 20 20" fill="currentColor">
            <path fillRule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clipRule="evenodd" />
          </svg>
          <span>{error}</span>
        </div>
      )}

      {!loading && !error && (
        <>
          <div className="overflow-x-auto">
            <table className="w-full table-auto min-w-full">
              <thead>
                <tr className="text-left border-b">
                  {columns.map((col) => (
                    <th key={col.key} scope="col" className="px-4 py-3 text-sm font-medium text-gray-500 uppercase">
                      {col.header}
                    </th>
                  ))}
                  <th scope="col" className="px-4 py-3 text-right text-sm font-medium text-gray-500 uppercase">
                    Ações
                  </th>
                </tr>
              </thead>
              <tbody className="divide-y divide-gray-100">
                {paginatedData.length === 0 ? (
                  <tr>
                    <td colSpan={columns.length + 1} className="px-4 py-8 text-center text-gray-500">
                      <div className="flex flex-col items-center justify-center">
                        <svg xmlns="http://www.w3.org/2000/svg" className="h-10 w-10 text-gray-300 mb-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                          <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={1.5} d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
                        </svg>
                        <span>Nenhum registro encontrado</span>
                      </div>
                    </td>
                  </tr>
                ) : (
                  paginatedData.map((item) => (
                    <tr key={item.id} className="hover:bg-gray-50">
                      {columns.map((col) => (
                        <td key={col.key} className="px-4 py-3 text-sm text-gray-900">
                          {col.format ? col.format(item) : item[col.key]}
                        </td>
                      ))}
                      <td className="px-4 py-3 text-right text-sm font-medium">
                        <div className="flex justify-end space-x-2">
                          <button
                            onClick={() => onEdit(item)}
                            className="text-blue-600 hover:text-blue-800"
                            title="Editar"
                          >
                            <svg xmlns="http://www.w3.org/2000/svg" className="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                              <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={1.5} d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" />
                            </svg>
                          </button>
                          <button
                            onClick={() => onDelete(item)}
                            className="text-red-600 hover:text-red-800"
                            title="Excluir"
                          >
                            <svg xmlns="http://www.w3.org/2000/svg" className="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                              <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={1.5} d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />
                            </svg>
                          </button>
                        </div>
                      </td>
                    </tr>
                  ))
                )}
              </tbody>
            </table>
          </div>
          
          {/* Pagination Controls */}
          {totalPages > 1 && (
            <div className="px-6 py-3 flex items-center justify-between border-t border-gray-200">
              <div className="hidden sm:flex-1 sm:flex sm:items-center sm:justify-between">
                <div>
                  <p className="text-sm text-gray-700">
                    Mostrando <span className="font-medium">{(currentPage - 1) * rowsPerPage + 1}</span> a <span className="font-medium">
                      {Math.min(currentPage * rowsPerPage, safeData.length)}
                    </span> de <span className="font-medium">{safeData.length}</span> resultados
                  </p>
                </div>
                <div>
                  <nav className="relative z-0 inline-flex rounded-md shadow-sm -space-x-px" aria-label="Pagination">
                    <button
                      onClick={() => setCurrentPage(Math.max(1, currentPage - 1))}
                      disabled={currentPage === 1}
                      className={`relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium ${
                        currentPage === 1 
                          ? 'text-gray-300 cursor-not-allowed' 
                          : 'text-gray-500 hover:bg-gray-50'
                      }`}
                    >
                      <span className="sr-only">Anterior</span>
                      <svg className="h-5 w-5" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
                        <path fillRule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clipRule="evenodd" />
                      </svg>
                    </button>
                    
                    {/* Page Numbers */}
                    {[...Array(totalPages)].map((_, i) => (
                      <button
                        key={i}
                        onClick={() => setCurrentPage(i + 1)}
                        className={`relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium ${
                          currentPage === i + 1
                            ? 'bg-blue-50 border-blue-500 text-blue-600 z-10'
                            : 'bg-white text-gray-500 hover:bg-gray-50'
                        }`}
                      >
                        {i + 1}
                      </button>
                    ))}
                    
                    <button
                      onClick={() => setCurrentPage(Math.min(totalPages, currentPage + 1))}
                      disabled={currentPage === totalPages}
                      className={`relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium ${
                        currentPage === totalPages 
                          ? 'text-gray-300 cursor-not-allowed' 
                          : 'text-gray-500 hover:bg-gray-50'
                      }`}
                    >
                      <span className="sr-only">Próximo</span>
                      <svg className="h-5 w-5" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
                        <path fillRule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clipRule="evenodd" />
                      </svg>
                    </button>
                  </nav>
                </div>
              </div>
              
              {/* Mobile pagination */}
              <div className="flex sm:hidden justify-between items-center w-full">
                <button
                  onClick={() => setCurrentPage(Math.max(1, currentPage - 1))}
                  disabled={currentPage === 1}
                  className={`relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md ${
                    currentPage === 1 
                      ? 'text-gray-300 bg-gray-50 cursor-not-allowed' 
                      : 'text-gray-700 bg-white hover:bg-gray-50'
                  }`}
                >
                  Anterior
                </button>
                <span className="text-sm text-gray-500">
                  Página {currentPage} de {totalPages}
                </span>
                <button
                  onClick={() => setCurrentPage(Math.min(totalPages, currentPage + 1))}
                  disabled={currentPage === totalPages}
                  className={`relative inline-flex items-center px-4 py-2 ml-3 border border-gray-300 text-sm font-medium rounded-md ${
                    currentPage === totalPages 
                      ? 'text-gray-300 bg-gray-50 cursor-not-allowed' 
                      : 'text-gray-700 bg-white hover:bg-gray-50'
                  }`}
                >
                  Próximo
                </button>
              </div>
            </div>
          )}
        </>
      )}
    </div>
  );
};
=== /Users/micaelsantana/Documents/app-frontend/src/components/common/DeleteConfirmationModal.jsx ===

import React from 'react';

export default function DeleteConfirmationModal({ 
  isOpen, 
  onClose, 
  onConfirm, 
  title = 'Confirmar Exclusão',
  message = 'Tem certeza que deseja excluir este item?',
  isSubmitting = false
}) {
  if (!isOpen) return null;

  return (
    <div className="fixed inset-0 z-50 overflow-y-auto" aria-labelledby="modal-title" role="dialog" aria-modal="true">
      <div className="flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0">
        {/* Background overlay */}
        <div 
          className="fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity" 
          aria-hidden="true"
          onClick={onClose}
        ></div>

        {/* Modal panel */}
        <div className="inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full">
          <div className="bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4">
            <div className="sm:flex sm:items-start">
              <div className="mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10">
                <svg className="h-6 w-6 text-red-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
                  <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" />
                </svg>
              </div>
              <div className="mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left">
                <h3 className="text-lg leading-6 font-medium text-gray-900" id="modal-title">
                  {title}
                </h3>
                <div className="mt-2">
                  <p className="text-sm text-gray-500">
                    {message}
                  </p>
                </div>
              </div>
            </div>
          </div>
          <div className="bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse">
            <button
              type="button"
              disabled={isSubmitting}
              onClick={onConfirm}
              className="w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm"
            >
              {isSubmitting ? (
                <svg className="animate-spin -ml-1 mr-2 h-4 w-4 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                  <circle className="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" strokeWidth="4"></circle>
                  <path className="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                </svg>
              ) : null}
              Excluir
            </button>
            <button
              type="button"
              onClick={onClose}
              className="mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"
            >
              Cancelar
            </button>
          </div>
        </div>
      </div>
    </div>
  );
}
=== /Users/micaelsantana/Documents/app-frontend/src/components/common/StatusBadge.jsx ===

import React from 'react'

export default function StatusBadge({ status, type = 'default', size = 'md' }) {
  // Mapeia os status do backend para exibição frontend
  const getStatusConfig = () => {
    // Status base que funcionam para qualquer entidade
    const baseStatus = {
      'active': { bg: 'bg-green-100', text: 'text-green-800', label: 'Ativo' },
      'inactive': { bg: 'bg-yellow-100', text: 'text-yellow-800', label: 'Inativo' },
      'pending': { bg: 'bg-blue-100', text: 'text-blue-800', label: 'Pendente' },
      'completed': { bg: 'bg-blue-100', text: 'text-blue-800', label: 'Concluído' },
      'canceled': { bg: 'bg-red-100', text: 'text-red-800', label: 'Cancelado' },
      
      // Status específicos
      'maintenance': { bg: 'bg-orange-100', text: 'text-orange-800', label: 'Em Manutenção' },
      'vacation': { bg: 'bg-purple-100', text: 'text-purple-800', label: 'Férias' },
      'leave': { bg: 'bg-purple-100', text: 'text-purple-800', label: 'Licença' },
      'in_progress': { bg: 'bg-blue-100', text: 'text-blue-800', label: 'Em Andamento' },
      'scheduled': { bg: 'bg-purple-100', text: 'text-purple-800', label: 'Programada' },
      
      // Fallback
      'default': { bg: 'bg-gray-100', text: 'text-gray-800', label: status }
    };

    // Mapeamentos específicos por tipo de entidade
    const typeSpecificMappings = {
      'aluno': {
        'active': { label: 'Ativo' },
        'inactive': { label: 'Inativo' }
      },
      'onibus': {
        'active': { label: 'Em Operação' },
        'inactive': { label: 'Fora de Serviço' },
        'maintenance': { label: 'Em Manutenção' }
      },
      'rota': {
        'active': { label: 'Ativa' },
        'inactive': { label: 'Inativa' }
      },
      'viagem': {
        'completed': { label: 'Concluída' },
        'pending': { label: 'Pendente' },
        'in_progress': { label: 'Em Andamento' },
        'scheduled': { label: 'Programada' },
        'canceled': { label: 'Cancelada' }
      },
      'motorista': {
        'active': { label: 'Ativo' },
        'inactive': { label: 'Inativo' },
        'vacation': { label: 'Férias' },
        'leave': { label: 'Licença' }
      },
      'monitor': {
        'active': { label: 'Ativo' },
        'inactive': { label: 'Inativo' },
        'vacation': { label: 'Férias' },
        'leave': { label: 'Licença' }
      }
    };

    // Obter status base
    const baseConfig = baseStatus[status] || baseStatus.default;
    
    // Aplicar sobrescrita específica do tipo se existir
    if (typeSpecificMappings[type] && typeSpecificMappings[type][status]) {
      return {
        ...baseConfig,
        ...typeSpecificMappings[type][status]
      };
    }
    
    return baseConfig;
  };

  // Size variants
  const sizeClasses = {
    sm: 'px-2 py-0.5 text-xs',
    md: 'px-2 py-1 text-xs',
    lg: 'px-2.5 py-1 text-sm'
  };

  const config = getStatusConfig();

  return (
    <span className={`inline-flex items-center justify-center rounded-full font-medium ${config.bg} ${config.text} ${sizeClasses[size]}`}>
      {config.label}
    </span>
  );
}
=== /Users/micaelsantana/Documents/app-frontend/src/components/common/ConfirmationModal.jsx ===

import React from 'react';

export default function ConfirmationModal({ 
  isOpen, 
  onClose, 
  onConfirm, 
  title,
  message,
  confirmText = "Confirmar",
  cancelText = "Cancelar",
  isDeleting = false
}) {
  if (!isOpen) return null;

  return (
    <div className="fixed inset-0 z-50 overflow-y-auto" aria-labelledby="modal-title" role="dialog" aria-modal="true">
      <div className="flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0">
        {/* Background overlay */}
        <div 
          className="fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity" 
          aria-hidden="true"
          onClick={onClose}
        ></div>

        {/* Modal panel */}
        <div className="inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full">
          <div className="bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4">
            <div className="sm:flex sm:items-start">
              <div className={`mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full ${isDeleting ? 'bg-red-100' : 'bg-blue-100'} sm:mx-0 sm:h-10 sm:w-10`}>
                {isDeleting ? (
                  <svg className="h-6 w-6 text-red-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" />
                  </svg>
                ) : (
                  <svg className="h-6 w-6 text-blue-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
                  </svg>
                )}
              </div>
              <div className="mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left">
                <h3 className="text-lg leading-6 font-medium text-gray-900" id="modal-title">
                  {title}
                </h3>
                <div className="mt-2">
                  <p className="text-sm text-gray-500">
                    {message}
                  </p>
                </div>
              </div>
            </div>
          </div>
          <div className="bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse">
            <button
              type="button"
              className={`w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 ${isDeleting ? 'bg-red-600 hover:bg-red-700 focus:ring-red-500' : 'bg-blue-600 hover:bg-blue-700 focus:ring-blue-500'} text-base font-medium text-white focus:outline-none focus:ring-2 focus:ring-offset-2 sm:ml-3 sm:w-auto sm:text-sm`}
              onClick={onConfirm}
            >
              {confirmText}
            </button>
            <button
              type="button"
              className="mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"
              onClick={onClose}
            >
              {cancelText}
            </button>
          </div>
        </div>
      </div>
    </div>
  );
}
=== /Users/micaelsantana/Documents/app-frontend/src/components/common/FormModal.jsx ===

import React, { useEffect } from 'react';
import PropTypes from 'prop-types';
import MaskedInput from '../../utils/masks/components/MaskedInput';
import { MASKS } from '../../utils/masks/constants';
import { unmaskQuilometragem } from '../../utils/masks/processors';

FormModal.propTypes = {
  isOpen: PropTypes.bool.isRequired,
  onClose: PropTypes.func.isRequired,
  title: PropTypes.string.isRequired,
  children: PropTypes.node.isRequired,
  onSubmit: PropTypes.func.isRequired,
  isSubmitting: PropTypes.bool,
  formData: PropTypes.object,
  onInputChange: PropTypes.func,
  maskedFields: PropTypes.object
};

export default function FormModal({
  isOpen,
  onClose,
  title,
  children,
  onSubmit,
  isSubmitting = false,
  formData = {},
  onInputChange,
  maskedFields = {}
}) {
  // Debug formData whenever it changes
  useEffect(() => {
    console.log('FormModal - formData atualizado:', formData);
  }, [formData]);
  
  // Track quilometragem changes
  useEffect(() => {
    if(formData?.quilometragem) {
      console.log('Valor bruto da quilometragem:', formData.quilometragem);
      console.log('Valor processado:', unmaskQuilometragem(formData.quilometragem));
    }
  }, [formData?.quilometragem]);
  
  // Track distancia_km changes
  useEffect(() => {
    if(formData?.distancia_km) {
      console.log('Valor bruto da distância km:', formData.distancia_km);
      console.log('Valor processado da distância:', unmaskQuilometragem(formData.distancia_km));
    }
  }, [formData?.distancia_km]);
  
  // Enhanced submit handler with debugging
  const handleSubmit = (event) => {
    event.preventDefault();
    
    // Create a FormData object
    const formElements = event.target.elements;
    const formValues = {};
    
    // Debug form elements directly
    console.log('=== ELEMENTOS DO FORMULÁRIO ===');
    for (let i = 0; i < formElements.length; i++) {
      const element = formElements[i];
      if (element.name) {
        console.log(`${element.name}: ${element.value}`);
        // Only add elements with names to our form values
        if (element.type === 'checkbox') {
          formValues[element.name] = element.checked;
        } else {
          formValues[element.name] = element.value;
        }
      }
    }
    
    // Debug formData
    console.log('=== DADOS SENDO ENVIADOS PARA O BACKEND ===');
    console.log('formData do componente:', formData);
    console.log('formValues coletados do form:', formValues);
    
    if(formValues?.quilometragem) {
      console.log('quilometragem (bruto):', formValues.quilometragem);
      console.log('quilometragem (processado):', unmaskQuilometragem(formValues.quilometragem));
    }
    
    if(formValues?.distancia_km) {
      console.log('distancia_km (bruto):', formValues.distancia_km);
      console.log('distancia_km (processado):', unmaskQuilometragem(formValues.distancia_km));
    }
    
    console.log('=====================================');
    
    // Call the original onSubmit function with the collected form values
    onSubmit(event, formValues);
  };

  if (!isOpen) return null;

  return (
    <div className="fixed inset-0 z-50 overflow-y-auto" aria-labelledby="modal-title" role="dialog" aria-modal="true">
      <div className="flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0">
        {/* Background overlay */}
        <div
          className="fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"
          aria-hidden="true"
          onClick={onClose}
        ></div>

        {/* Modal panel */}
        <div className="inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full">
          <div className="bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4">
            <div className="sm:flex sm:items-start">
              <div className="mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full">
                <h3 className="text-lg leading-6 font-medium text-gray-900" id="modal-title">
                  {title}
                </h3>

                <div className="mt-4">
                  <form onSubmit={handleSubmit}>
                    {React.Children.map(children, child => {
                      // Debug each child to see what's being rendered
                      console.log('Rendering child:', child?.props?.name);
                      
                      if (child?.type === 'input' && maskedFields[child.props.name]) {
                        const isQuilometragem = child.props.name === 'quilometragem';
                        
                        // Log input properties
                        console.log(`Input field: ${child.props.name}`, {
                          value: child.props.value,
                          hasValue: !!child.props.value,
                          inFormData: formData?.[child.props.name] !== undefined
                        });
                        
                        const clonedChild = React.cloneElement(child, {
                          component: MaskedInput,
                          mask: MASKS[maskedFields[child.props.name] === 'PLACA' ? 'PLACA_MERCOSUL' : maskedFields[child.props.name]],
                          placeholder: isQuilometragem ? 'Ex: 15000.50 km' : child.props.placeholder,
                          step: isQuilometragem ? '0.01' : child.props.step,
                          onChange: (e) => {
                            console.log(`Changing ${child.props.name} to:`, e.target.value);
                            if (child.props.onChange) child.props.onChange(e);
                            if (onInputChange) onInputChange(e);
                          }
                        });

                        return (
                          <>
                            {clonedChild}
                            {isQuilometragem && formData.quilometragem && !unmaskQuilometragem(formData.quilometragem) && (
                              <div className="text-red-500 text-sm mt-1">
                                Formato inválido! Use números com até 2 casas decimais (Ex: 15000.50)
                              </div>
                            )}
                          </>
                        );
                      }
                      return child;
                    })}

                    <div className="mt-5 sm:mt-6 sm:grid sm:grid-cols-2 sm:gap-3 sm:grid-flow-row-dense">
                      <button
                        type="submit"
                        disabled={isSubmitting}
                        className="w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-600 text-base font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:col-start-2 sm:text-sm"
                      >
                        {isSubmitting ? (
                          <svg className="animate-spin -ml-1 mr-2 h-4 w-4 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                            <circle className="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" strokeWidth="4"></circle>
                            <path className="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                          </svg>
                        ) : null}
                        Salvar
                      </button>
                      <button
                        type="button"
                        onClick={onClose}
                        className="mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:mt-0 sm:col-start-1 sm:text-sm"
                      >
                        Cancelar
                      </button>
                    </div>
                  </form>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  );
}
=== /Users/micaelsantana/Documents/app-frontend/src/components/common/Notification.jsx ===

import React, { useState, useEffect } from 'react';

export default function Notification({ 
  message, 
  type = 'success', // 'success', 'error', 'warning', 'info'
  duration = 4000,
  onClose
}) {
  const [isVisible, setIsVisible] = useState(!!message);
  const [isLeaving, setIsLeaving] = useState(false);

  useEffect(() => {
    if (!message) {
      return;
    }
    
    setIsVisible(true);
    setIsLeaving(false);
    
    const timer = setTimeout(() => {
      handleClose();
    }, duration);

    return () => clearTimeout(timer);
  }, [message, duration]);

  const handleClose = () => {
    setIsLeaving(true);
    setTimeout(() => {
      setIsVisible(false);
      if (onClose) onClose();
    }, 300); // Match animation duration
  };

  if (!message || !isVisible) return null;

  const typeClasses = {
    success: 'bg-green-100 text-green-800 border-green-300',
    error: 'bg-red-100 text-red-800 border-red-300',
    warning: 'bg-yellow-100 text-yellow-800 border-yellow-300',
    info: 'bg-blue-100 text-blue-800 border-blue-300'
  };

  const iconMap = {
    success: (
      <svg className="h-5 w-5" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
        <path fillRule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clipRule="evenodd" />
      </svg>
    ),
    error: (
      <svg className="h-5 w-5" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
        <path fillRule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clipRule="evenodd" />
      </svg>
    ),
    warning: (
      <svg className="h-5 w-5" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
        <path fillRule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clipRule="evenodd" />
      </svg>
    ),
    info: (
      <svg className="h-5 w-5" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
        <path fillRule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2h-1V9a1 1 0 00-1-1z" clipRule="evenodd" />
      </svg>
    )
  };

  // Tradução de mensagens comuns de erro
  const translateCommonErrors = (message) => {
    const errorMapping = {
      'Validation error': 'Erro de validação',
      'Invalid data': 'Dados inválidos',
      'Not found': 'Não encontrado',
      'Server error': 'Erro no servidor',
      'Unauthorized': 'Não autorizado',
      'Validation failed': 'Validação falhou',
      'Data not found': 'Dados não encontrados',
      'Connection error': 'Erro de conexão',
      'Network error': 'Erro de rede',
      'Failed to fetch': 'Falha ao buscar dados',
      'Internal server error': 'Erro interno do servidor'
    };
    
    // Verifica mensagens exatas
    if (errorMapping[message]) {
      return errorMapping[message];
    }
    
    // Verifica mensagens que contenham certas palavras-chave
    for (const [key, translation] of Object.entries(errorMapping)) {
      if (message.includes(key)) {
        return message.replace(key, translation);
      }
    }
    
    return message;
  };

  const formattedMessage = translateCommonErrors(message);

  return (
    <div 
      className={`fixed bottom-5 right-5 z-50 transition-all duration-300 ease-in-out
        ${isLeaving ? 'opacity-0 translate-x-full' : 'opacity-100 translate-x-0'}`}
    >
      <div className={`
        px-4 py-3 rounded-md shadow-lg border ${typeClasses[type]}
        flex items-start max-w-md
        transform transition-transform duration-200 hover:scale-102
        ${formattedMessage.includes('\n') ? 'whitespace-pre-line' : ''}
      `}>
        <div className="flex-shrink-0 mr-3">
          {iconMap[type]}
        </div>
        <div className="flex-grow">
          {formattedMessage}
        </div>
        <button 
          className="ml-3 text-gray-500 hover:text-gray-700 transition-colors duration-200"
          onClick={handleClose}
          aria-label="Fechar notificação"
        >
          <svg className="h-4 w-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
            <path fillRule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clipRule="evenodd" />
          </svg>
        </button>
      </div>
    </div>
  );
}
=== /Users/micaelsantana/Documents/app-frontend/src/components/common/StatCard.jsx ===

import React from 'react'
import { ArrowUpIcon, UsersIcon, TruckIcon, MapIcon } from '@heroicons/react/24/outline'

export default function StatCard({ title, value, icon, color }) {
  const Icon = {
    students: UsersIcon,
    buses: TruckIcon,
    routes: MapIcon,
    default: ArrowUpIcon
  }[icon] || ArrowUpIcon

  return (
    <div className="bg-blue-50 p-6 rounded-lg shadow-sm border border-gray-100">
      <div className="flex items-center justify-between">
        <div>
          <p className="text-sm text-gray-500 mb-1">{title}</p>
          <p className="text-3xl font-semibold text-gray-900">{value}</p>
        </div>
        <div className={`p-3 rounded-full bg-${color}-100`}>
          <Icon className={`w-8 h-8 text-${color}-600`} />
        </div>
      </div>
    </div>
  )
}
=== /Users/micaelsantana/Documents/app-frontend/src/main.jsx ===

import React from 'react'
import ReactDOM from 'react-dom/client'
import App from './App.jsx'
import './index.css' // Make sure this line is present and before App import

ReactDOM.createRoot(document.getElementById('root')).render(
  <React.StrictMode>
    <App />
  </React.StrictMode>
)
=== /Users/micaelsantana/Documents/app-frontend/src/App.jsx ===

import React, { useState } from 'react'
import { Routes, Route, Link, useLocation, BrowserRouter } from 'react-router-dom'
import { NotificationProvider } from './contexts/NotificationContext.jsx'
import Dashboard from './pages/Dashboard'
import Alunos from './pages/Alunos'
import Login from './pages/Login'
import Onibus from './pages/Onibus'
import Rotas from './pages/Rotas'
import Viagens from './pages/Viagens'
import Monitores from './pages/Monitores'
import Motoristas from './pages/Motoristas'
import brasaoLogo from './assets/images/Brasao.png'

// The App component is the only one using BrowserRouter now
const App = () => {
  return (
    <BrowserRouter future={{
      v7_startTransition: true,
      v7_relativeSplatPath: true,
      v7_fetcherPersist: true,
      v7_normalizeFormMethod: true,
      v7_partialHydration: true
    }}>
      <AppContent />
    </BrowserRouter>
  );
}

// The main app content extracted into a separate component
const AppContent = () => {
  const [sidebarCollapsed, setSidebarCollapsed] = useState(false);
  const location = useLocation();
  
  // Check if current path is active
  const isActive = (path) => {
    return location.pathname === path || 
           (location.pathname === '/' && path === '/dashboard');
  };
  
  // Don't render sidebar on login page
  if (location.pathname === '/login') {
    return (
      <NotificationProvider>
        <Routes>
          <Route path="/login" element={<Login />} />
          <Route path="*" element={<Login />} />
        </Routes>
      </NotificationProvider>
    );
  }

  return (
    <NotificationProvider>
      <div className="h-screen flex flex-col md:flex-row w-full bg-blue-50 overflow-hidden">
        {/* Sidebar - Always visible but collapsible on smaller screens */}
        <div className={`
          bg-gray-800 text-white transition-all duration-300 
          ${sidebarCollapsed ? 'w-16' : 'w-64'} 
          flex-shrink-0 sticky top-0 h-screen z-30
        `}>
          {/* Sidebar Header with Toggle Button */}
          <div className="flex items-center justify-between p-4 border-b border-gray-700">
            {!sidebarCollapsed && (
              <div className="flex items-center">
                <img 
                  src={brasaoLogo}
                  alt="Brasão de Navegantes" 
                  className="h-10 w-auto mr-3"
                />
                <div>
                  <h2 className="text-xl font-bold text-blue-400">Coracao</h2>
                  <p className="text-sm text-gray-400">Sistema de Transporte</p>
                </div>
              </div>
            )}
            {sidebarCollapsed && (
              <div className="flex justify-center w-full">
                <img 
                  src={brasaoLogo}
                  alt="Brasão de Navegantes" 
                  className="h-8 w-auto"
                />
              </div>
            )}
            <button 
              onClick={() => setSidebarCollapsed(!sidebarCollapsed)}
              className={`text-gray-400 hover:text-white p-1 rounded-md ${sidebarCollapsed ? 'mx-auto' : ''}`}
              aria-label={sidebarCollapsed ? "Expand sidebar" : "Collapse sidebar"}
            >
              {sidebarCollapsed ? (
                <svg xmlns="http://www.w3.org/2000/svg" className="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M13 5l7 7-7 7M5 5l7 7-7 7" />
                </svg>
              ) : (
                <svg xmlns="http://www.w3.org/2000/svg" className="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M11 19l-7-7 7-7m8 14l-7-7 7-7" />
                </svg>
              )}
            </button>
          </div>
          
          {/* Navigation Links */}
          <nav className="mt-4 overflow-y-auto h-[calc(100%-4rem)]">
            <ul>
              <li>
                <Link 
                  to="/dashboard"
                  className={`flex items-center py-3 px-4 w-full text-left ${isActive('/dashboard') ? 'bg-gray-700 text-white' : 'text-gray-300 hover:bg-gray-700'}`}
                  title="Dashboard"
                >
                  <svg xmlns="http://www.w3.org/2000/svg" className="h-5 w-5 flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6" />
                  </svg>
                  {!sidebarCollapsed && <span className="ml-3">Dashboard</span>}
                </Link>
              </li>
              <li>
                <Link 
                  to="/onibus"
                  className={`flex items-center py-3 px-4 w-full text-left ${isActive('/onibus') ? 'bg-gray-700 text-white' : 'text-gray-300 hover:bg-gray-700'}`}
                  title="Ônibus"
                >
                  <svg xmlns="http://www.w3.org/2000/svg" className="h-5 w-5 flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M8 7h8m-8 5h8m-4 6v-4m4 4v-4" />
                  </svg>
                  {!sidebarCollapsed && <span className="ml-3">Ônibus</span>}
                </Link>
              </li>
              <li>
                <Link 
                  to="/alunos"
                  className={`flex items-center py-3 px-4 w-full text-left ${isActive('/alunos') ? 'bg-gray-700 text-white' : 'text-gray-300 hover:bg-gray-700'}`}
                  title="Alunos"
                >
                  <svg xmlns="http://www.w3.org/2000/svg" className="h-5 w-5 flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z" />
                  </svg>
                  {!sidebarCollapsed && <span className="ml-3">Alunos</span>}
                </Link>
              </li>
              <li>
                <Link 
                  to="/rotas"
                  className={`flex items-center py-3 px-4 w-full text-left ${isActive('/rotas') ? 'bg-gray-700 text-white' : 'text-gray-300 hover:bg-gray-700'}`}
                  title="Rotas"
                >
                  <svg xmlns="http://www.w3.org/2000/svg" className="h-5 w-5 flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7" />
                  </svg>
                  {!sidebarCollapsed && <span className="ml-3">Rotas</span>}
                </Link>
              </li>
              <li>
                <Link 
                  to="/viagens"
                  className={`flex items-center py-3 px-4 w-full text-left ${isActive('/viagens') ? 'bg-gray-700 text-white' : 'text-gray-300 hover:bg-gray-700'}`}
                  title="Viagens"
                >
                  <svg xmlns="http://www.w3.org/2000/svg" className="h-5 w-5 flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
                  </svg>
                  {!sidebarCollapsed && <span className="ml-3">Viagens</span>}
                </Link>
              </li>
              <li>
                <Link 
                  to="/motoristas"
                  className={`flex items-center py-3 px-4 w-full text-left ${isActive('/motoristas') ? 'bg-gray-700 text-white' : 'text-gray-300 hover:bg-gray-700'}`}
                  title="Motoristas"
                >
                  <svg xmlns="http://www.w3.org/2000/svg" className="h-5 w-5 flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
                  </svg>
                  {!sidebarCollapsed && <span className="ml-3">Motoristas</span>}
                </Link>
              </li>
              <li>
                <Link 
                  to="/monitores"
                  className={`flex items-center py-3 px-4 w-full text-left ${isActive('/monitores') ? 'bg-gray-700 text-white' : 'text-gray-300 hover:bg-gray-700'}`}
                  title="Monitores"
                >
                  <svg xmlns="http://www.w3.org/2000/svg" className="h-5 w-5 flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z" />
                  </svg>
                  {!sidebarCollapsed && <span className="ml-3">Monitores</span>}
                </Link>
              </li>
              <li className="mt-6 border-t border-gray-700 pt-4">
                <Link 
                  to="/login"
                  className="flex items-center py-3 px-4 w-full text-left text-gray-300 hover:bg-gray-700"
                  title="Sair"
                >
                  <svg xmlns="http://www.w3.org/2000/svg" className="h-5 w-5 flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1" />
                  </svg>
                  {!sidebarCollapsed && <span className="ml-3">Sair</span>}
                </Link>
              </li>
            </ul>
          </nav>
        </div>
        
        {/* Main Content */}
        <div className="flex-1 h-full bg-blue-50 overflow-auto">
          <main className="px-6 py-4 w-full h-full">
            <Routes>
              <Route path="/dashboard" element={<Dashboard />} />
              <Route path="/" element={<Dashboard />} />
              <Route path="alunos/*" element={<Alunos />} />
              <Route path="onibus/*" element={<Onibus />} />
              <Route path="rotas/*" element={<Rotas />} />
              <Route path="viagens/*" element={<Viagens />} />
              <Route path="motoristas/*" element={<Motoristas />} />
              <Route path="monitores/*" element={<Monitores />} />
              <Route path="*" element={<Dashboard />} />
            </Routes>
          </main>
        </div>
      </div>
    </NotificationProvider>
  );
}

export default App;
=== /Users/micaelsantana/Documents/app-frontend/src/api/services.js ===

import axios from 'axios';

// Axios configuration
const api = axios.create({
  baseURL: '/api',
  headers: {
    'Content-Type': 'application/json',
    'Accept': 'application/json'
  },
  timeout: 15000 // 15 seconds
});

// Request interceptor for logging
api.interceptors.request.use(request => {
  // console.log('API Request:', request.method, request.url);
  return request;
}, error => {
  console.error('API Request Error:', error);
  return Promise.reject(error);
});

import { getErrorMessage, formatErrorForLogging } from '../utils/errorHandler';

// Response interceptor for error handling
api.interceptors.response.use(
  response => {
    // Success processing
    return response;
  },
  error => {
    // Log error details for debugging
    console.error('API Error:', formatErrorForLogging(error));

    // Handle specific errors
    if (error.response?.status === 401) {
      // Redirect to login if unauthorized
      window.location.href = '/login';
    }

    // Get user-friendly error message
    error.userMessage = getErrorMessage(error);

    return Promise.reject(error);
  }
);

/**
 * Format time values for API (HH:mm to H:i)
 * @param {string} time - Time in HH:mm format 
 * @returns {string} - Time in H:i format or null if input is empty
 */
function formatTimeForApi(time) {
  if (!time) return null;

  try {
    // Split time into hours and minutes
    const [hours, minutes] = time.split(':');

    // Convert hours to integer to remove leading zeros
    const hour = parseInt(hours, 10);

    // Return formatted time (H:i format as Laravel expects)
    return `${hour}:${minutes}`;
  } catch (error) {
    console.error('Error formatting time:', error);
    return null;
  }
}

/**
 * Format time values from API (H:i) to HTML time input format (HH:mm)
 * @param {string} time - Time in H:i format
 * @returns {string} - Time in HH:mm format
 */
function formatTimeForDisplay(time) {
  if (!time) return '';

  try {
    // Handle different time formats from API
    const timeParts = time.split(':');

    if (timeParts.length < 2) return time; // Return as is if not valid

    const hours = timeParts[0].padStart(2, '0');
    const minutes = timeParts[1].substring(0, 2).padStart(2, '0');

    return `${hours}:${minutes}`;
  } catch (error) {
    console.error('Error formatting time for display:', error);
    return time || '';
  }
}

// API Services with error handling and friendly messages
export const AlunoService = {
  getAlunos: () => api.get('/alunos').catch(error => {
    throw new Error('Erro ao buscar alunos: ' + getErrorMessage(error));
  }),

  getAlunoById: (id) => api.get(`/alunos/${id}`).catch(error => {
    throw new Error('Erro ao buscar detalhes do aluno: ' + getErrorMessage(error));
  }),

  createAluno: (data) => api.post('/alunos', data).catch(error => {
    throw new Error('Erro ao criar aluno: ' + getErrorMessage(error));
  }),

  updateAluno: (id, data) => api.put(`/alunos/${id}`, data).catch(error => {
    throw new Error('Erro ao atualizar aluno: ' + getErrorMessage(error));
  }),

  deleteAluno: (id) => api.delete(`/alunos/${id}`).catch(error => {
    throw new Error('Erro ao excluir aluno: ' + getErrorMessage(error));
  }),

  getAlunoPresencas: (id) => api.get(`/alunos/${id}/presencas`).catch(error => {
    throw new Error('Erro ao buscar presenças do aluno: ' + getErrorMessage(error));
  })
};

export const OnibusService = {
  getOnibus: () => api.get('/onibus').catch(error => {
    throw new Error('Erro ao buscar ônibus: ' + getErrorMessage(error));
  }),

  getOnibusById: (id) => api.get(`/onibus/${id}`).catch(error => {
    throw new Error('Erro ao buscar detalhes do ônibus: ' + getErrorMessage(error));
  }),

  createOnibus: (data) => api.post('/onibus', data).catch(error => {
    throw new Error('Erro ao criar ônibus: ' + getErrorMessage(error));
  }),

  updateOnibus: (id, data) => api.put(`/onibus/${id}`, data).catch(error => {
    throw new Error('Erro ao atualizar ônibus: ' + getErrorMessage(error));
  }),

  deleteOnibus: (id) => api.delete(`/onibus/${id}`).catch(error => {
    console.error('Delete Error Details:', error.response?.data);
    
    // Handle foreign key constraint error
    if (error.response?.data?.message?.includes('Foreign key violation')) {
      throw new Error('Não é possível excluir o ônibus pois existem viagens relacionadas. Exclua as viagens primeiro.');
    }
    
    throw new Error('Erro ao excluir ônibus: ' + getErrorMessage(error));
  }),

  getOnibusViagens: (id) => api.get(`/onibus/${id}/viagens`).catch(error => {
    throw new Error('Erro ao buscar viagens do ônibus: ' + getErrorMessage(error));
  })
};

export const RotaService = {
  getRotas: () => api.get('/rotas').catch(error => {
    throw new Error('Erro ao buscar rotas: ' + getErrorMessage(error));
  }),

  getRotaById: (id) => api.get(`/rotas/${id}`).catch(error => {
    throw new Error('Erro ao buscar detalhes da rota: ' + getErrorMessage(error));
  }),

  createRota: (data) => {
    // Format time fields
    const formattedData = { ...data };
    
    if (formattedData.horario_inicio) {
      formattedData.horario_inicio = formatTimeForApi(formattedData.horario_inicio);
    }
    
    if (formattedData.horario_fim) {
      formattedData.horario_fim = formatTimeForApi(formattedData.horario_fim);
    }
    
    // Convert status to 0/1 for the backend if needed
    if (typeof formattedData.status === 'boolean') {
      formattedData.status = formattedData.status ? 1 : 0;
    } else if (formattedData.status === 'on') {
      formattedData.status = 1;
    }

    console.log('Dados finais enviados para API:', formattedData);

    return api.post('/rotas', formattedData).catch(error => {
      console.error('Erro detalhado API:', error.response?.data);
      throw new Error('Erro ao criar rota: ' + getErrorMessage(error));
    });
  },

  updateRota: (id, data) => {
    // Format time fields
    const formattedData = { ...data };
    
    if (formattedData.horario_inicio) {
      formattedData.horario_inicio = formatTimeForApi(formattedData.horario_inicio);
    }
    
    if (formattedData.horario_fim) {
      formattedData.horario_fim = formatTimeForApi(formattedData.horario_fim);
    }
    
    // Convert status to 0/1 for the backend if needed
    if (typeof formattedData.status === 'boolean') {
      formattedData.status = formattedData.status ? 1 : 0;
    } else if (formattedData.status === 'on') {
      formattedData.status = 1;
    }

    console.log('Dados finais enviados para API (update):', formattedData);

    return api.put(`/rotas/${id}`, formattedData).catch(error => {
      console.error('Erro detalhado API:', error.response?.data);
      throw new Error('Erro ao atualizar rota: ' + getErrorMessage(error));
    });
  },

  deleteRota: (id) => api.delete(`/rotas/${id}`).catch(error => {
    throw new Error('Erro ao excluir rota: ' + getErrorMessage(error));
  }),

  getRotaParadas: (id) => api.get(`/rotas/${id}/paradas`).catch(error => {
    throw new Error('Erro ao buscar paradas da rota: ' + getErrorMessage(error));
  }),

  getRotaViagens: (id) => api.get(`/rotas/${id}/viagens`).catch(error => {
    throw new Error('Erro ao buscar viagens da rota: ' + getErrorMessage(error));
  })
};

export const ViagemService = {
  getViagens: () => api.get('/viagens').catch(error => {
    throw new Error('Erro ao buscar viagens: ' + getErrorMessage(error));
  }),

  getViagemById: (id) => api.get(`/viagens/${id}`).catch(error => {
    throw new Error('Erro ao buscar detalhes da viagem: ' + getErrorMessage(error));
  }),

  createViagem: (data) => {
    // Format time fields for API
    const formattedData = { ...data };

    // Handle all time fields
    const timeFields = ['hora_saida_prevista', 'hora_chegada_prevista', 'hora_saida_real', 'hora_chegada_real'];
    timeFields.forEach(field => {
      if (formattedData[field]) {
        formattedData[field] = formatTimeForApi(formattedData[field]);
      }
    });

    return api.post('/viagens', formattedData).catch(error => {
      throw new Error('Erro ao criar viagem: ' + getErrorMessage(error));
    });
  },

  updateViagem: (id, data) => {
    // Format time fields for API
    const formattedData = { ...data };

    // Handle all time fields
    const timeFields = ['hora_saida_prevista', 'hora_chegada_prevista', 'hora_saida_real', 'hora_chegada_real'];
    timeFields.forEach(field => {
      if (formattedData[field]) {
        formattedData[field] = formatTimeForApi(formattedData[field]);
      }
    });

    return api.put(`/viagens/${id}`, formattedData).catch(error => {
      throw new Error('Erro ao atualizar viagem: ' + getErrorMessage(error));
    });
  },

  deleteViagem: (id) => api.delete(`/viagens/${id}`).catch(error => {
    throw new Error('Erro ao excluir viagem: ' + getErrorMessage(error));
  })
};

export const MonitorService = {
  getMonitores: (page = 1) => api.get('/monitores', { params: { page } }).catch(error => {
    throw new Error('Erro ao buscar monitores: ' + getErrorMessage(error));
  }),

  getMonitorById: (id) => api.get(`/monitores/${id}`).catch(error => {
    throw new Error('Erro ao buscar detalhes do monitor: ' + getErrorMessage(error));
  }),

  createMonitor: (data) => api.post('/monitores', data).catch(error => {
    throw new Error('Erro ao criar monitor: ' + getErrorMessage(error));
  }),

  updateMonitor: (id, data) => api.put(`/monitores/${id}`, data).catch(error => {
    throw new Error('Erro ao atualizar monitor: ' + getErrorMessage(error));
  }),

  deleteMonitor: (id) => api.delete(`/monitores/${id}`).catch(error => {
    throw new Error('Erro ao excluir monitor: ' + getErrorMessage(error));
  })
};

export const MotoristaService = {
  getMotoristas: (page = 1) => api.get('/motoristas', { params: { page } }).catch(error => {
    throw new Error('Erro ao buscar motoristas: ' + getErrorMessage(error));
  }),
  
  getMotoristaById: (id) => api.get(`/motoristas/${id}`).catch(error => {
    throw new Error('Erro ao buscar detalhes do motorista: ' + getErrorMessage(error));
  }),
  
  createMotorista: (data) => {
    try {
      // Criar uma cópia dos dados
      const apiData = { ...data };
      
      // Mantenha o status como string - a conversão será feita no backend 
      // Isso irá funcionar com a nova versão atualizada do backend
      
      console.log('Enviando dados para API:', apiData);
      
      return api.post('/motoristas', apiData).catch(error => {
        console.error('Erro detalhado:', error.response?.data);
        throw new Error('Erro ao criar motorista: ' + getErrorMessage(error));
      });
    } catch (error) {
      console.error('Erro ao processar dados:', error);
      throw error;
    }
  },
  
  updateMotorista: (id, data) => {
    try {
      // Criar uma cópia dos dados
      const apiData = { ...data };
      
      // Mantenha o status como string - a conversão será feita no backend
      // Isso irá funcionar com a nova versão atualizada do backend
      
      console.log('Enviando dados para API:', apiData);
      
      return api.put(`/motoristas/${id}`, apiData).catch(error => {
        console.error('Erro detalhado:', error.response?.data);
        throw new Error('Erro ao atualizar motorista: ' + getErrorMessage(error));
      });
    } catch (error) {
      console.error('Erro ao processar dados:', error);
      throw error;
    }
  },
  
  deleteMotorista: (id) => {
    try {
      console.log('Tentando excluir motorista:', id);
      return api.delete(`/motoristas/${id}`).catch(error => {
        console.error('Erro detalhado ao excluir:', error.response?.data);
        throw new Error('Erro ao excluir motorista: ' + getErrorMessage(error));
      });
    } catch (error) {
      console.error('Erro ao processar exclusão:', error);
      throw error;
    }
  },
  
  getMotoristaViagens: (id) => api.get(`/motoristas/${id}/viagens`).catch(error => {
    throw new Error('Erro ao buscar viagens do motorista: ' + getErrorMessage(error));
  })
};

export default api;
=== /Users/micaelsantana/Documents/app-frontend/src/assets/images/Brasao.png ===

PNG

   IHDR     $      sRGB    gAMA  a   	pHYs    (J  IDATx^}u}o콈DThIVw{M8.q-v츗زl˶fUR)%{0sbv`0܋.?S [t!b/* ˗u}koHυ?y廿ގV;Xj2>TK.g>U}͵j~_.;w)?!)tea@nu8z5zl:@N6T㑘7Gw7GrJzsvEPĕЎ~OtGF?G8ݳ'XI~cvgp|385{rOKz:Lt> z?3YEyg*IKh^莜l:?|`!8LMHiOY85YR7اOTE $m̓jO*ixx<;Z|at樂rwNIi[D}C4=0D$A'v$O`L|V~WNNtͧ1޵hլY5tυ!KX rJJ G/U~y'ġ (c{{{~)NS麎8\ۮz_(fSBmiu-\Luwυ}j?L[7{M];HfA'[=9s͛όO,ΐy`i/4ݱEvaI{+~y~;b|u-	t/xWzW%4x*X30Tn_tdޕ6Gk=Q?tCn+Zq":8#\ R|
OOu^U|%o.߶MtߖOڠC|cyZo!3+PL+*OE/%
;hЕz)Q4dȇh(tY&FSybuME[)|NWC>hnؿ^ʽsWI3jg$3;SWZKdkd!=Bmp|%vc䨟>=8J)293 4#a G>s3iǫ|KY;4T~|z<\d MEӴl;W}kG->	X+AKIDZr>/h}뽅5<t)z%WZzeȶzrqr2T5/A;1:zc8ޕbR,5?
,*=.3q'fޱ2fAR*}|_J֟*rpᘥ?W!d*~00GZ[bs¦"+gT2TNRKf7d\z:А]vtK2^sٕ|ZB߿mdUKWyiӝ_.ۗ	%Rc@oQ7#Աn W\rNxoKkRnhL*]ƪrԝ)i
xs.F]<ޡWu9k2 e>YV .SScm%rTm<9~}u(J߾|xd_w~_fQTp_&y+WdC׽tNPف*2mXDݞ;Kɦ/NNxܹٵ]T8.`;S4?H,D5/<e/;]" ƺ^JYm8.8ULDC]/y<NᜇnX#N)ǚʥ)ug9dWdyi*Fn~ч8_wy*WO=Pr?|-׼ұNùoh-j
fOkyt.c՘Zw+
Ck+BzjL<.9c?Ա?1ճ̗892E;iN\rTs9`տ;}s®DՑS
K~`}(׿#vvh̚ڛFT﷌ʲD0rmP?OK#}c)-Xa ]fNhy틫wW&DToWdciޒGcjOsy.YV;*C?c uwgʪ?R9{`$CT<pTJ2C]|tj {@`ꆕKVc7ya̝ڕXqg >A2C@B歜^~S}%ˮ\p
jv{ϚyckО^3#p9@]ldoX;^@mΞoBuFp	],AGp	Vójw9sAVƊ.UpzX9:A-<vQw>ֺSS'ɆszFڿR;pl/{Lon[_^ry/yA-4hASӪ|"k=1dNBJŎSpK֬炱u ;|4P?ʝ9_4>+s^ߞ_<e$N;iiƌsmޡ2v
W! fiumyj$E$8zLLKWAUerG!%!!q?bޝk]`!;Q	S>{2VK3se%s#we^vOڳPP[GT˨ۓᑡe5v/
dWdV:81XSo/<^ȹ=`A9gI_8-: ՑSG7k&RFZs,?g|#%]~B8Us)T>E+C{WӿAEO+k݆UPh:`:|Ϯ+tF%^MOVѳ1nA54+ie3g,?evVE&mzs:wvWxbvj$q8/"@FEu6s2[TFU.mMiay'#-|q3o>MI:q:Pn(:PkM0
٦|za2CޑaΦ_z5/~һeuO(' ,vm]Vs#ke8gsƂ`˒T"<_r_wd:qڨrk;>8+F [كo(@KB1h T[$?hWԑ7
/x
4+P5"^
οpgWGot!/v/_=+/fdS[[}f} ȓgҤ
Awt_3YvܘCԛL%%TǊq!TT5 OX](j3`6ÅC#WƧ|8SH>6{3ege;]?;3/I^1?fvuJ'Rw?W@ڕ13i;giq9_?ü3^W"a52pʑ^˭ *>/5X(Ъd^yo{͋CsV=Yed2?ۯdTO+2@C%B"a<%0&툇h_j,R3%Ԛ=,K_4Var69B4"5Hǘ&~q{ַl	PAp0PX,ҟV'<ʨ#ʝG v+r'`5	Vϡ~^q=^wE;@bR+"fƳgi-z'1۷743Vy`gA2WtF:0m4S>x맥wIA>'͘x{N}!7S7?1ʹ޾W`,UO UR+`B^'<,
oU;IZj4RXq7VI*2["	Ōb 'L 4	A4r[#l0cXAD Cͮ&,y}5v50_=mF=Bb4˥AFʾbp%v`g%L&zOTm%x{_N`xV؊J//:~>m7}ޡWD\Y Rg2O/t5ڛW{Sޝ}0sof5F*[PPDtj
hEM+ՐzVW	@{U/G*ֶ%XIUPt2^J$TYHMHau~8ML?1.ZWzJa,<s7d 		Rܰ]CƢIgS̊0#JFYx:4[Aw8WWS]M\t8o!:~&]V$v>7 np=hi3fTgRÝeEYh?0CSx+֣CZ^Jre?79YA-f2?O⸾\s(8+4+JC{ ]zfHx!	!j	u=V?q	-chHYlJ.T03}ъ>W9Yt]m}ƃ~hp t_\3FjL M`qpj{Ȯnh^=bOA:0c9ʆr}s^^,R^I* h8P ì"-Y"kQ?Eo/O4|A^D١`x7ey쌺2˯t8-Cf)PxpP 귪Ы_]ʼ/Rui5O~2y~KNIvO<q^R~0k}Ye
WGc!,FFXRE0H[;#P"=8yBs>K.0rp~Kս$:L-_3K`QI%U/Nh\,n0C/޶m<Z_^F'UǍ	XGa%P_{`=6iU*>21ĸ& agCXi	̤&:-7}WYR75]Խ- <co͊ m!W(4<gHlڔW0V5-d(`-B%=0w"sKsgzBj!zlLt	^_qKYVXrAJ-Y.x܍"!jD2t&$XS}>ްC=j祫łR/Ljnn<$ZӕʪKciZ5/i42hAF xC݅oHH0HTf5G鼦Z"Π;AI2Kݣ'iD!xmIPQ	4wt)CVx:|]q=CkZP⺸)FB!3ʏ@mrDG?BC
t^;<yPf1SPێcӊ̨W\b`$x#`@b?@^C!Y!XcJ=%u4CEZno.BR15ECP,C͜vz10K`hlM$[y^$QJgJ6)$ /
N=	y2(%9Eƅua*1 2`,{PE7ΧPU%1K kkPAvz
 TTPg*oj<#:_2<##ЩBeX$D}`xk$OEjB&X v oxv.P'yQOHUw~'3ӊ0<WfW)uKYT*gK0CCJUs#LRj$ڝ5ssgady!2^ܖqi*@S6D;1˨e #:Q!ѩ@,,0GJ[F%嫸>Ԗ]I&KO&suCͨ&/_Ǎ~_eP.Gy{޸RcAʣ	ӥԫ#,Q<nbV29܊L !FA6bK8AI~'AB7Hć4w<5YrclZZkCZÞ"zy,7=kiEf,{Vyk=ܠ0>3!WTҬ"HOBj3.ڟbUPy14/ /2G+,|	TPQUұ-PF64BBrqQ!q<.X@^H VWZТ|Ni Vk͛SsCǨ&Wi<	biNo(C &i:ؕ"/Kp9ҕ-2CcXѝyn>PS2QA@ p`Qj?°mQ5X`֙Y_+t &4j6cЩ@%Ϣ2:C	3^id8pN]ᰄg#-"{{Gӊob\rV%ex|bFy&B,êA,qy :yM)sx=RVA1E#x>Gn'Xa}Ϊ"`8|2̙]Yd>*`Iz`*1VZo7RW?82Ze2o͹H qK&:GCg ?V~ah"D?Pű~!=:OtBlt,Aj\dE?xNcVUF>>W'/iEf5xys>X>Z/k%k"/ +;V|nqa*_dr#Ի<TNPYᠡ)7(CZɍ
KEZP"@XСc<	%sB<$` cVk7*dR.`ADk?T(_i]c<K/Q:LFCÜPC>Y1Px9E94Bݮkt 4r>:\HF\j0Ar)y İ)w`d3mq|Zg~k^r;W)%7b81&w^$$73 1eb^]0yGFa@zTCUdXKҌRDu_u9eTPI I!`|AcAָe	2W91a_lˀƊ|,=nBC?WC,ƪּ;:,ΐB._L)R@Wtn]u*c	@EyN&1O}wtPӑ':cicIсNÐ~Vp`RYA+@=ܖdMOU؋p N]~r?<xds" =k/M-'2IXaZP*$T׻tjP}!h\0NA-:2:FcL/AV'1}Q_NrZfYyڊ񝛩Ʉ!,c=[<fAf H4&ByY1$ck$L"H}KdIҬ0]83:5Es(XKy¨mapWý1#PF=a!=!l<P簴j`
r0SSIWH'Z 0|fl	mVu00W6*6pZo`wMӵn	[$xD09I05}lhvt+#P.s	FXABmj#X1s$>1#	x64Bu`Ar j ߩ1
@-N	 >L`aV5dsMݔMYh4:HIH]~	,@'5`9S[LKS;	\}@}Ɛ!C\&nm<6 "9w¸;@^m?Hq`eP1}$FG)HMq7Bsb.uaRYY]deAݷG:7JdF/zK
ճwֲh8CY@f1YU]:@}=)x5DiIDV\0]nx;Py\]@P0 a`!0$2auZ	CBli6g<<=ޚd"IJR%)FA5*catyI.areHyhOwm/^¨c*Cq1*Pwa}y1Vt~/d̍Nu=9ˎ~;/`XgI)t$!Sڟ~TdvhۿvUR9M@qe0U[Bљh$J<^HE0a,(2cx+9 }
dEݙ.CAqYX^*k%w  Hcnl;@4ͮyAV4Eϝvlt6Xs/!褋jutV/<|k`M{(CXeq]` j@L_Ak4v X:C!Eьb#AyѹR]tZK7߻.aU*DJŸP@*^TiKf {82XMK}j6Ym(IQ1KJeL ǢW,B0֠wGcݓ*4)$b<3Og8&ԛSNTA8C[x}riCVN9͖ô*L	vc	0	\N $|d:#榱;Tjs,ĩx2	b槱8RsAcz	a5Psd>ܻI!8J/^^Ȍ9pTgn6AbȐp˶l6qovT<wWM@eŦ xY"HW2vXFL4dCŸi`C0^C &4޳d
Y(#l1Plჷ f=IR'®Z
H=^@Ё5:	i N Dqt|x-#ia`X( u:ToMר=CBCF1Xa܂q30W:Ȃ uYx
7܎'3Nk,^>77p\ɡ*,5@ݓ]ڛ
[R;'Pu8@T{hZ&K
d N,`qTWwگVd>*pz^
V`I)#SjE{h6`ɖ-^ǒz`8j0VA$Dqh04AyYew.	T|+*ÁAScW!q2 QiiU@81V^Ae%#:
,C+y;:Y`<1R>NXu桒hRa"^H,{s~t*=k}.]^30`iZ,{fUq)KGm o+婛'^L8SgYT1j}T
7TcV+ Hh8hxN$*T6=dDH20Ģˁ}0݂CX'(`IgL`X/FRE"\=^DgE[벇XI%X\<n/A0bYk2Ds<NL8FG	 ,7nᦞk25C4o#'˶h.]:cYwWZ|'
'dc`|h`ś?PLp.a|CaofNѠKƴƄ֋sXul)@A-e&ѐ29VsaU`M@4FцDOds	=bk7BG8HQ-cba&	^c	@HI˸%=ZpQzd}8B' X!E1,wѹ`qJZM%\\i
3L+.I+חETGNK+oy~qܾq4qړpExnhPIQXXar{aK:(#fFihyWn_~BPaYWb	&VsADk!7Vu/PDeY*t=f_/;rSת8MqJ AX'|/Úl,\BTz@]CyvpXEx 	٬Š~`@'XeħW6Q]mB]CKa?;X`R)4*6 3WO[Ijz
R*+$VyڙJ-u`O}.8ӭh1} , k/4L?AHGi/lV/X!BBA0!  $=^3rCyj6%|Sˈ7,)y!ys-"Tm8uP@lt([sy1]!:Kr
~a
RLW q-X/Z9'[ImoR+6fhYeܬPid,j]y;t9_zko7NA</`#U/zK懯B#f4"OtJH],sWt
b2xXͣRFk^`؛raDch Ο%9=BNU
"Av	*ri
IR\W*RҢ[⊃5>:!+^4Z*rB
x?m	ף<P&y〦0܀Tǳ@}`fR6LS>V'V̫Tk=x<vOp͟v) KG(@ak|b<:!@nl}[g.)@5\ 0_Xńs+ lp4P@`K M9$>k"|ǋ+f o16ED~}*N" 8t`{MtȦll:\SHô"o(Cbsýɨzd0ajj`JM3ά	+:I,T<wd[└yCf ^Y;WS}HCX]1ω1%qV8vui4@<kB:q1DY15JTv<YNl6z5+VQ:gt8>,y^Wnvg+c\`b+˅r.604bF ҡ^AvXAf==v!H0?6`Y7kI 1mkz߇P(WddB:E>0mԩo1 #Eܛa	*Gt@hJY8}:iyq5Ϻu-7=z?>nvC{_piz]G&ᾶvAR>|>*];iф/D\,>m4xyuҢjו: tlyztBg2QâƱ|ұе]nkS	;2C:K__]ѥ>"(}Le5
"r X 4H4]BV 1Ve -ڽOwY|{pfn/Mr2crHFmWQ-	{.tsx\$+ D]j/@:M]5E5[ :c=M_<$3TmlHe F,d	)/.@`4(44sl+|4QKdC|dpj2?p/pư+3oZF,AlQĳPv~"1c0u~"wdjJ|d^v``_IK]zjiL8x<_UO+cךVo"J FIa~0*[TtɅBl!.`jBBl@~ 5P!wd{?txK2{Z9GkT'ϐ0ܠy8!9shsq~|1_t8xdQOfFj:!ݍ#'eh;X-/aLxvP1mX\z{>r2rP%3/G;˛MDt5Z@	0MZ&Z6y<3PaE]Ts]jþ@Ҽ>ZxMt5nu0֎*12Ggaey+amCxtNlլY5?ãoZ]Y-coXa=1Mk@nX1$(hZQ:dFG̽#yŐ#_)otV]aeU38s\x6##CN/n˄ԦtT1Nצ@.-Z`	<
b۞طO-:Cx0ac}foMU~2V<,xckEX	YyC[53i={ՌPtx4o{N5oĂD9_}qi=cy/ñ+o=M!*3>ฏ<rzN0>t#c8ekf'HǝW]]}}oF!o^p7|sMX7\N->:\w2_t/7̈́=;|֮;=#?VuYoK:<N3 RGWƎ'9 e*TT}R͙[nۣ*0qBlGiTH$Wڨѹ'-|8> 	Iw2Bʮp*w(ST(3$5̘M<-_NY`|>n!aӟp;V\S)]9xq/7|
54S]c:s:<=i!Z7-XJwѕW_K(yL>|^7e"0nv*|l.7w{˒{h*_lѵ
1H(H.'9AeG a)%z*=c:}6cq&w&| a@? `_^ZUDTCn6ְtc)5+a|P<mu$U18 e P]xމF/*L nBmO$0,N&2 _zÕ0F.DdI $9ƆsMﻏ>OwE,KK?$TvpBdpR¡Ʃ׭Q@d4a_-ŋ/Hu̍Z7KE*+/  @Ehq;A'pJ7H
P.t6pR^?s}T/Rgf3;	E8誠.AQ"i MJlAÔM3!T"@qqܜÏ<Ih`7|ۋ^J6+6 c@(	htb\nJD2p穊Fc	:	;9	/N@Zh"IpRY&RY؄.N]`%|ho7#e3 A8!}俴nK}nPcgњy矧o~8?,@6TWzxX"h@P9!/pߥH$
qu:yftz|@e(@1U1lahluP~rWwAȫ `?5zM7HmmDVW`hS.ڱuQm.zkb<{?qԓAW't:!b$LIlP5P}	#ur	z^"urP>!4|y[	DRmAHI$Tj^?K?7iǖgK8rF~du:czKs4ce Dr+e!8}trQF)d1I[)usHbi=@{*+:6,uwu#"F6:I<E儨#dw^|@CPOL Bt-CDq&tVrF4Vi"$N]uGkΝ/esפ(>ｏǾIV"&kmtM?VDF>d$@F5kOg0'ON;op#e˪uaz"e *I/ȅ6MYw]ubEjXA4=y+8y0/aKީN?~ZD]5t=q>R-	K-lyV0nl08կ|*]()[bDƋfAwt/aIĐ"TD^ޣ ~_Uez2iy!m&.<&\4F9qUw^.\ҷ[ݔlϢUZ@'Nbӌrn*BgYP:t	CToHhȀ>8{lN T_\QpDF#CW d3atutTMׁXk	ztho>ca7ԷtZUa"?hA9붿Z7݋9'b`Z=|~4KgqFmuOۥWUtID _77DoplWf+R-r%)wRRKDRUnHh8Qqp$g	}OB7z*4jS~+z/./Ad¢JӶK"JJ3Cwq;17T)*7 ˟<=41FHsCtr8B'(4nX`1×Wo[Z{}DhqMg[+2X Y!WZIm􅻟?oJM5aiS^-~$5-SR{cz2~&1$IAfDHh%UUs6l"
z$hM}ByےtPjM<!M)?'}*COMRo
j6G<h,PeC[*)!ubAuxnmotѾkhS9*|S72 \%BĖS	ۺEZڞR1~֧DBGhcHd '5{""4%T'xn'jRWG:=XJ[($(-UyK&U~c%?7oM?Rt\>cuj<? t05Ƿ~4@ҳ[wӂ@ZW/]q.YPFv)W̬heq>E\5u͸:kS]ܒ$WmB#	Бt]|Zzk?:wPs1~)ZnMB;#$%81CQ5nZmc]oZ:{11.ĘIΚ}"ߤs>/IͥsR([4}d!z[s  Iti#kH*HeAq}qc/OOb\gw7̢7]Xfm2x'fWUN[lȚ3:uo GH/:XMU*YZԱA{X3	ЎM2됆XN%zB$8+"r+G)@&gQSP\+.;? lB!ƣZ$3|I&P:UR ƚ;++Xz~6F`kU7,i[g	4
P=, z䅤_'Yc"5[ۆK?~2EstQF#.]-9 ѩI-DZjmxL{>t뀒E$Xs%aE!M7hsj}իΣX~ܷ-atɬZ v&&;h|ztR'u/g6VՒyr-NS UM_iZz|[Zh+k#Az&Xp@P99'Х8¢K|թFOEl>/:Os-Ԙ@dh*%E'$Õ5p
(ȴNjNFxHnٟ|@aEH]B> >~
VTR`7W]c:pb {70pmSE*{Ie2ڦT+4R=G0j'>֚
eņ*n#i9$өrڔY@ZÐާk|@#L;B"Ouc&3>	qQ=:-t=Ki?{诧Zi+1x}K>zvWګۿYRszuZntf2ء@̲BOϤô?v*@:R^EhC.Xr첞G(A''Rá3)-UoYHnt1O>I_ޖQ	2)t>j's
QA;Zay8Ӛ+D˟LѯS*!Ih׉xh%e j,JQ֥ԉ8N	m+T롋JD^ՃJ]2Kjj@8|Pf@bZm aCIquam(J=*pU*<XR45Nk/Pgl.Fq
clK3ĕhWYIVd"A[=h|<GÃavSMK7u	(CqtlAnkmA
r׺**]poE>oCՉvk^=y\|	_BWPƃ##	 4=МMtNmІyS(;[k_+M?
~,l1֚F,ћ.?@Bb*<iSqr+xxƞ#,I7V|Z"=ACgLt0a@h=/2^.< hr8v9r= C`p_]uߞ۹pRg(cHSHo䨪gٳοFIҡmy6M}>5e:UkKq8Tu%C6Gx.r|+uNvrBl&|,hKyX7o<̉/,A!7UD4P `NfÀ_(d߲WhFE56>^?Qߖ5(̘gyҜTٿ{R73uݭTOTr\"%!*8]Tp 5 B{JLPtD)S+Dq~I.BkdyAfupQy&T8T^nvM-߫WRˬ|vlڨvܶ=EׇXh/BƘsZ0ݿ?L7D ?~oZMWer4~y%F^8pMfS'2'ϽvBFnx:ʑDz%3jY5]'RV.|ztMQK%4=ۮvٳ{7<Fp5
%̨i51wASuj) "7LU{ WL\ 6 	-D#5vzh_"z6\KOiuT&C4S	eYCfO!<?<DdDxRmB<ΝCWXG[S{Ξ$uh$E=>cأ׸hepыoxXB(!-h$yM\>$2I/YBdQZH昗ks/$fi"2KPn9eƴ@ZX=vg+7G3k0[{iOd&ekgRa!yOVNl"#0ҵs(ZB}C]T?V+BRcfHfW7Q˄jrGVԄ;ۺ\u2$$hS"nc$ިu4nlύ-?via'M7m-7<TYsVaKۢ|Cɔ:i+QЇkoZ@Yܺ/k-^Tm·Bf̐ʘ^ë3pPE2BTWTuns̥_Г
1g)}aʱd(,TS~&S-j,
X͍Q=MNw212<uaWPA{|50*\.Grވ"5ayAPC~:oL$wz'E:FP %mrLl<R<8Rh| cx +>_j,C]]" KDV^|ۛOne*}KѠ(;wt-t6_ $clNP)Û<3Y;[cv6oT87LU+˦Ѳ\y{;)R懃~r1eXn\FκuTӷZ>PMEbO:V=jTI "˩Oc=ܔ$JiL8B_T9/?#H7@y]b1LSpC`onE,CnzꮧMf}\Fչb\r)kt	-a;)$5۔̪iAR}+C*Pʲusi(Lۆ2,U+S:_T.P3KrEc4uEchv3ͯSNJA=
 SAzGj1H})+)&OeG%Xၬ]T_;]3V!;ۨ=\FXd=N2LiDLP7FIY=\-)(A^Ը%_;ժR8uRF;yiH`b "E-`$4^Kܮ¼HNN enb;J7=H[yFKϚ=lZsjCҵf,mͱ$tG]pYL"3,^_811Y}o'!5N5st_Dkp?/|GzɃެzQ#?Ytt:RV`|cHTlQET9 Y`. NQː,=ӺRݱEj8j輳檷^JNt"KXxՒSQGÄr C֓C0T'-eD;o:J1-rubn1
sHz2PƇ>!%c:zcR~é$Tt:Iݒ$>xTVbA*bM	!wAj`T7\N;hæ> k/5ji,zc<Mᱤ}1߿J.
[zu"1~v\}Nn$(A-Hf{bN+)04	QJ(e}IP"u	]Z963PN0PuiDd@F,="%R̤zѩCZo,K-Y87oA7۸&u'-0F},(KY atR[!EqwL"kh<fz'p

M ^Zm*DdF]ɘy*jHfYWMSmЦtt(l@IS`VW}evǤ,.jniK֮UR/{Bf[m3R]gω'?8m)k~&hV*]tj&ڦX` z7Yy5k&giVw>F3MݘN$DD]a'ȫPdrZ{2S E(?bzCJꍬKM^PxX;`"fmLË93X[eSSmA<T6N)2C1
ؾ	%(K|f=7BJ؁x/?WVo^a支׀1sF~+[oX	]e5ّPAފZ.Kr-	,Rswq(ҵuty+ꍷz-dC?;w24cF%5y N̘P ";51cfFm!rJt*5\8'^{X3HvN}۟"jD0ϣnP;p}L +^?cfQu9 ̦) KAho\z2\Gs-)m\|J?{4xp2EZ,U;7̱c/jϚo''%5)K*ۂV
?_o5NY(L`"|8;Tzbz?CCHЛ|	OPf1cnc'n	t<- a3y"x;JmƎƂ+ "5gNiZ{
C}jz
{z_Sfo?Va=	pjKrPM]?C~{5NwԳ.7 WV̨RNU;|CJ 8 !Q,?zs̜eI&)ͥXy28Xڢb&aM$Kڍ7*xkmQOO+GyC!.0K;s軮`,cffx$3wNҤ,Lb^N }+j۝Ng+m0 }Ŵ+(VU[AJ2޾,p8.E9BwaFBNTS2 t6WP6HH,0tBkX@Z䕬nRg6m^bڶMW_FӦOW$mLNcf<m F6Բ*77RwKm[7֮\VaWCvBBs}jQ<RJ+օǩݰ~<63)kHCCK'P
lݢmFA&sܬ	%ӸdDJFܨ$ Bcl.RP%J򊤾+^~`e8f:N8GVvk$sIm<xXmmk9GQAk(ȇ$;jܵ`2zN˗+Bxhwm(bo$ǘ*y7ht>Əټ:$3.ILuQޘR;NY'd*t-u"YSP%tϮViӆz Z,:nׂ}NwobWR.<8i|HЙj<|{<Gw6*7p=j_'?9:4 ?%#D6DU~Р ͞;OH#j+D*;Am6љYs΀j;UHr˱@'P+\/!|{:&%)hS.WCy.NZ2Ô>V\okjaZs5q{@d%G?RKeiUW{#jX B_reti5j7Nƈt+&z{Cs-)-J0V%U0;0N3f0)AjD2CWb fB'@1|XBc|w*e CoýI9嘨ȎLXDpJy18sɰZ#5p $jCt{)S!yK1264jEv vT$	w.p5_+h7$]QF1멜s$㶉`N *6\NC 2
u)]Vҙ};^yLWSjxYSņL1qa.XL8"Aӡt2Nͯշ>|[sZr	;U"+UQ6n8Cګ2X1	\owyXR1Fk4 E*!4:4c51f;Ie@VIti;𝤳	Hk!2̄>?tzG \Nbl@}nQaRѲ˗[̗,4d6!jI1ToX裏}RMA\@dLެRKAdo1KTnXF?OӋox5Tl_0@gՋ c6 SN@w|grN|FD>25S3|'jD:6Ϻ}=Xu@v"l~jQkFQQeZʬc̺Z71YZs[G̥d;T)$Y5s<']+l	:HG;"4|Roa	~c\Y2N2ĖΔl%$s9tu[`EL$Ah!5)U|"u(GbHdy`~w& & *>V>Q擖:51)cK,
yƏӂ?N<΢LAޜD?F7zNU9􆷼>ϖ,V:=\/>C )nCޔ@'4 LQDTdLr	XPe bfH;Soc+/d(l
BbbjB=jCR90=Kj;Х{KlAhɀk[-o{~CYG"ބk;;<ѫ|ޡ6S1ވ-pzYWAh8}JH]"E .NX)]Zsks
<j߽`go/P6;8ɌFXǁy6{zZFiB`5)#,$?]J*caKta4nFzpBhYuҡ%q6 MKg'0'cmQDĆx	-&Vrj.N6B/R3`Zs-u;{gQoTOTNZ2`3%#4n'iƻzPSP 2>~a׼7se`Cy&zr^|=^ϣ\z4f8uxNdБ,1DBk(g_$4dtӥ1)xj	Ek*FJ@?PB\)@R=I7>
"BbһÕZ2hduTᐟ9׿՚glr|[,|f ˮwuc(Mº<4il\L&%>BTw6!tmZ!A*ilR;L@/I[}*xʫ/R/F;I]cY'q[Rt)-]<uD~iյ.	ˡTv6Nj2Ov=%KQ`R'G	1uޤ,ϘKIx96ېH[q&tlJꉤH!SE*&L6 D'h80Tc['6Q.WCO^w%_8Bbu<0´GOVTxzuTȦD-;X/qRghljVlp_#־\Mb16RMyK_+o6	;@7XcΉMdTvRJeJր)Ք Qn;Ii@$>*uhz^Ws?ݟڑ6e[R!Aⷿtҹ%S'[{q?f4ch]Ի.P'"2P
KC8cC
$>t&FBB>SφpWm}|{Q_sLdt_yBTVrvo?sH;mI~095 u#Vbd.%_#r`_M|GY Ah34'qI6nD[}W֏~l];<nb<hY/C͝>[#q:MI#k>1H)o@}:Ը-|y 7>r[J2[ήRX,FK/5s!nV.Y4^l&{jnS3,i|d|SMtEYcX;nR{ȓ7*OYZӮqY{,*"CI#H"UT_ i83^5ěJ
^]'ˢdqB@@Nq:6rYTl VW$4 RZ$u+8Pjg[PvBdI&;hcx	٫T=U}?Ԕ>2F8jXL+3+YHVRJO8I2Z͘I;ц,!-]I2+9ZpRڻseOT[㣞n}?;-_|.j[b	Y<t/6t^<aC2+Prl|	Z,X:s 0$&uȷhIhEBȜ8|M -Ikq17lɃ4<Fs.Zo:8@mv)wnƽtv>ys5Ю+U8, s2[is5H(_Gv擮Pf{_U`G#Wcګ^x
k΍}x8hyM06)Mc┷1'r2	m uko#$4X	㭧͕uj\kQ<%> D wtk_L +1&N*2)]5RqEMxЭv],P@|=ނCd{<v

@X`N?ӡ&0ΫH4u[lBS7ai}QۉԺ=tz<Гw!RU34ժ;rPXq/pT1#KUcLwTdtBCLjV\N+GXI $ aG|.1N5V}	tPz@ON/J@`!ALUSG!Nu˶ܷ@NȭIBÇkj-X%>$_f+7H,cceTFd|,<*FL`'wk%B#s+OYC{W/|+jYך9tqN7>zMp׺#	Nj҆ƂY_ڼ!`IK3_q@CJa'!y|Ċ)=Ě<8<pr^1|ы/jKܖjC aA:A!fΕ5zB:Lb!s9j fB}<UD%"Ç
.q"A<cZ3úڬoe$>@`}ks9c' re|(ℒ9b^TvWHJT5PiJrq; s‫{z[[nk_R{H0%!q})q#T6֭; Cd+tӡǁ @}2ard5āzz	c)VĦDv{LLB#m]޾泙pvxPmW-?*+GWɧ^tL*>?@Nwtw-3+>\0fÛX'9DCʣ`+g}D͙[n	#3
aHp8@3cĝӎ6>&.")=hm8D#>qBCZ`Ɖ1a)MSPa|%:IO@>
_z8*p
lωҖ/(wzZ@ _86coBE_fH{T ubDu	!$c?=<U5yTA=AͶNSgpr i̜*p-_/SN.uw'񙝢F?y$7ZIu;5H`e럮4Ϥx	W\4.mTUV	~x#
QҶHDJ#??G=Ւ^K^ju{?!S0'I?쫢X^q(9)Zfn~~^fiCf^ּ4UL9};Ȍ8}pr+Hݘp/sekQ+E<^Dݎqnn"%<.
抔Ү7rKY̲K_PnS@l[D@kh\ipoO՟H/q9TLTn	cBL	x8ӡߗiLLi 8' lQ9FL2ךGSu59N%~xqDK 1vqҐY lp fr~Uh
':aJ0QMKX|	x!p_:.iB!xNVԹhu<ژZ<$t(#' .8/3iRB||0hZ1)9M|8T3XNw
Tz3,/85	 |(U*tNu.YϪ4B^qAbv:Fq&dtL:N!
&~0V"YrN|\0C'%TSz;9_f#VU)-D>prZe.FxBT3t_8FX-`.%MsN*"KeIXwRM']%<qRNi|@3QO&$!N@|/Oo&2+|=.9m9\'Bcħ$"upSŘR1ȉcDa֎Seu%ox}@'W$BO*ì0@*TO*>9'@O{#,N 6}sHoX8'sz^ |;RAmD
AVDVĵKh >RvƳʥrVË4Gk]61p$r8N܇:fqc@_d9qJ(@;Vc=fr~k,x:8~<QX?FCzTZsП)!BdX'5Hbc#ZNd,s<</CQP#,|_"$\DERr陕`_CXG'Ǝ@R	ҐP1 TɌ@4C^ęKy3N?֝əu >%sraB|<OvjDK:*Kha4OUj$)I<8fzrTDviv'm"=UGt_.W]:П}9xV> יyHI>8dȢWj@zȻ@}yqzz=OK_H_uy'Hy`ցa<.E|\4j0ɟCxuuFkq ZQU~KMS*L, nX>z]^/.u)N@~prKLЌ=D2:ؒ{1y	@''t0 frix3,<q\szv:tH3Q=h~_ck*E,A]Hc,-j550:qz;u,Na
-y!UO`
{p(`p1ac
<aޏ<wU78]#q&p(\.7*^ZTUsj\Tߐ3zJV1n6!DPÐBw %cu	%`L쿚^>y ÄYY SxטMguá$N\k:DAjrq:_PtNp,gUiW4hm}-D:!OŬ7s92ValC΋5SםQ./PeS%Bu
O	yxi$A5~N;9ԝIlc#"6?ܑUgp{so(C3P	jy=v9h1V9! 
uϪvUE&[yc>}$!}?!%N_LyRxX
Fŉ\%C?vJt	$N??;3}83Nt)7-u@ly&mz_g,.z-Kvr5>{K L2:gಾ|v.i$6, I;ۗ^gS\'X` & <@yzEDF%ꐊX~鼞&o~s~ӚqNit	plr,a83O@IݢAJӉ-CL@*s{;ƍpɳ7I4	DCеe! ʇE(:1v&S"5$uԞT8/tXDz=?8On~AID#4XXLH\c34F@aIg-ډa@jXu_'F>[j@GbN@ RX0'y@j%k]\~SݕV'	%f;^!Tk:P`szq98CƩ1)0?!k9 9W$o9b<}NWKN!'5T'j<TORcΌR.ubT󚩴ףJf\bϠ<&k0TAj,+&>VnCf6 #t]t2Xcd^-C>[gz<<C7ᣁj/Gԡ8r`<da>< c&aJJ+S*Tr^:+zZefj<UGX_G 5.-WV1P*.ct\K$+pÙ<S籵Zmq	(SuGk$ ]R1y !lVzp>V3^k2Jh8?RX nջ
QC#^8r0bKX't q_@p^zʀ|\~u"TNNծ6:*>q#be|lB*AeEXT,vl
?@~p&OzͲ;d֝ 94DE: ڊ%Dry"?V[0!p^ a$@K[$(Ne辎YcGPQxPGE%ա?![9M=h9'9y8y g'^5vEgqVy	:`ou. d 
?$=֋7
yH0Q=౞|0{P$XBUkǽ*DtB#	$l9
yK>\HpN18Kqͳ1 iD-F'Z>-8%DzHz[ev
?PLk!PG%'K(μX2CyH &C y	|uL}8@^2?CPU"͘b|䒰nQ:QB 4: 8nyedlg3*0?8]`)SɌeM	Q:=lXf9\0!HG)u1&H#2T%QS0*bLBz4by+	>
>,9[-GYe CM^rc.8'H=> (C=(s- SK	,Cs1Jvg'!.=r@NB`r^V-$mֆ{ʘT BΆL@2 N,% b_󢲣\֘y:`֙ԱNu,mLGc|` -|y;rC'1#QcfY(は7@/ዓFԸ 8 R5eҰB&-gqEy@ 0  HR a9e?c9FE:u1`MiNkFR<R'˱}k'Nk͇80~J%(Z5t{ B6tXۋETN+I}yXCN K\,ί*A-]"db¹XDXTHf a1Md҉X.O:ف=kH1AsL1*9"x57Qpa,"#lUX8N!z~?KT-M\!yJ7h^鵪ѧ6
@B*oU`|SAHA%)oKw:cl.R\Pz/I/:U *^tȘ_q	fǋes XMvȎqiYc ;B+o]:F#PM:I<HӞtQg\JJCfr,58?tȹ$\&q׋t~ h.k H㕌qE*X	t%Q25K7Xֱ E lƍoNis:N'cNf]2I_OԘDk	fƌ@8qrT2+v5[^?g[q~$E4&]me<q`b7e<{YRSx-ehfZjsL*!+t]%ge%PF}퀴	5^;Eh.$@W(1X_޻cO*EEh1Xi+]Cȸh-|tVWt~zOң?چzd}:pNop"D?;rgN
Z
k;P̌ :@D"QAn^CY5'_:{&Dʣq^D'NrD8B	ึc.=~pU*<Xȫ'3OҢs'Qi&P16y40pP`h@<y9J2K\^"?MSp $IXxsÜ\Mg}V#-\5͞Cܢeғ7?U9vgTY?VTS Zh$^ӍJgu3W)Pw0Ֆe7ZPp{;eu:l\F<?%ǳ<TqB7.+xj(#⺓JXx3F%pXq6PPC~왢`TDԋ?ݝHӠ^ cÊ@طg-s;w8<m&=4]mX|XLdX14rvؒ 1U~7jTA/19FTÙ5򪓨raRaqK4kZ=]4Z0fF]TҺײkBh#4pKUQ7P{X`gݳj<<Z"✫ 6z.Q4`f)[PfBFr31pAT'2P!&T)bܡNzus:!3A#|YKg+@HtAku2%ȉ:}!-ҋt<g]zI,dG̜	
ƛVѴZסFúl}z`;"/bQ0Zye;ꮺ;-)P2հg*O_nGkVhOʕĖ/1cf4T'=bc
*f*@hT'U8\} fʳ}5zpgAGL<NNߏ4 yxrc^(qoVoT8zvr,뮤TpYR]Nӊfs~zoCSWwf9ՙXv¸12	3HU&XcV~ΕM|M'5+g-AM嘀^ĩ8 ?t[: tHי'cqcP"˕unjx(DTjZpP0gy _(PbxݱڻJ.k}480@p?^fhoo)IӖKuuvҦ;8%)zzgA;L|v졝;v9׺ x8?4PʺvOfPE4D~`  ꥇ=I:iXHgky|^rSRUc<R
J&/1<Q70jx+j1_q7Szg&w@0J"Xɀwq'fupc@Aļ<JRӑ
p#Ro$v= f(2+bXQuU[V֭٦QI#y!8XaQ3n1;aE޹1fݺ::oRyv
ooܪsgcxz9ʤuۨzUx?qr@}A"<?Fy_T.TViՌ `f0DJ#_0c]BV[#:1a@=]*{iNkJcHKRvCЁNqZEQG fquC?pPHIf7TH>1g`qQO֯z܁LF9˥.*~8[Tv<vjil3˧"C!/5UEUa0XͪX5.NjB4B0͛BՕTQue%-[8k"LUU\WI+/lΡ*n.OshEqyz&b+BE@-*$Hp0ɎmiQ Z 73h9@HYyDt3ʠـD\xOVl}X-t)mM1r'Rǣ<QIQYbW:'qCz	z=6>e_{o>Q/*fw^40|HOd|gɸkwCTʪW$=in}1Y,w:9K0teFJ/(	Px<c Hn|}#{G[M3fTҚs9m_@^-al/-UI'+{Kv0< ;nRnֶYtH^K|.&-
\TѫA+?i:/ʧ~N ;H˾wjWT>@D> azd@FvGGEq7l|`ќ9=j:<}	#3@ֈZ{k:CH/@*@#=֕}EqŐ"!(ъ*e0c#rAeCcXI#m1)U7(7boniￅ>M^L)|@"mHYW@I}^sX*O	Bd@TwٚDp,2ޡTmCwNp:>{8 ]<rre=馃	 ZQDx ^Ρza%^O# r57B5jzGCGHBۓQݘA9`I%HOA]Rox\ʤbM&F"K4䫇eiWte d4(\#֯ןǡ>q1[S\<(z	!!͡
w	5zיLhz#DVc89^|+l-ė r\qCO:%z^sӶv^9K|(AR<q{Ǳˋ|R.
!qzTd[;@ %{"^wxr| y9=35O$	L@nXy!<}_GPd.*;0VНV?u^|L%ӥ	eSE'!V+4kAX! QyΆԻX'ETLcB&#=}Ⱦ}a?s̬M^!;r< #vژL+[CjemRV{S_ݿpph,PEk@%N|@|fq=^[ -aqNQiHX+Mcal$5Q"z\8vٴ
W4t6B(\ Ήp!eھFH-Ϣy1q#Hra9gB,R85K &<	(P_?=?=3t5o<Yrdѭ%'e1Awr>d k݂j<-@)^ϺfOQs0jFDX$- ֡ױ@tĐ?a&QzX 3ie*kEZ*6>(8]׵iRE+k(PߤVƢe	fzکBJuW-N/zLB7˓o,p	u>Dks&$PaKh &k @¸h@^>s17(FIl}{[GTn׎=JmVTӼs.P^Eo~մ+_PZ9Y@
SAJgb$Fi$CƱ DdP+!MVmNÐ	B*7090DeUlq[(Wg]N<8V'dDT0'greџ-)k'_dӉ!Zz5U=S\ۚ땲O	zXwMS7\fEnNUƣ
2-HQJ/CRZ^ :HFzSJXU@qܛ~Nuv1*=fvz f0a6ǘFi4 $.%Zq̯L|FYtǕ^f2a'6/+4"w 3x+.<KF)?@̂Yy;;j+IV	{u,QhUM;5ʉ l[x4ck,\Pcab9ew]F嗗k?:Z1ھrbNyl6`k ̲HNEJ[ruHX9fn?/a@O1C[vAR>wFt%<ԁY:?$,v:"u١#]ǷEWM`u\ԓު)k<쒛l&4i&$^.o!ڦ%`+DW@28qcVuxL Laـ*NG^TPQf)7|^XO3]P!ph@<}><l8p{]|fd`>8ݙ@\g֧$TӒXq0壁|LcȊ.NVě0˥;@40\_4*a1॔Ma =^aMeYŐJF%D;ȵeR|nRV7qS~v|b(dS,у|k(qҋx͊Lr]2dVI)]z2+d,	,ڤ`&{ Bݗc}1	L40N[	nA_[TP ZUij蠔/znqogr\fvF<oo*,J@刓cNw7>dv\9 |@"tD'F	)@:,.k-;tV~:9$FA2QK<3/o@עd5:ƶ[>pzFz$^?HNu`j{6_ng>#qK;	*7 yO
J5+W^vfXw	x \'a gwzZ'Rm&Oi%yEkW4A^)d-Mu|x4Nq<5ۙ}zuT_n* !'[*߻swɎ4ۣ@7&vWOusSdA\TVd05[/@J3wtz5YByV̦e<Lǣ0#kp8'dc@|(Vzaͺϙ=p6?zΊ82c}~wlP#vSGf*fz3r0`r 됴: "G{vм;QC7?MT&G:
p$tN-CZI	=ʵrav&#;	_=%McPO9B:uk xjZ$t4Tl`;6sݺ.oWv^'p$3*UXAr^|LrH΋C/d4'$B^3\:{jFڨAx%_(wSRSlmԣ tXlrfJk(Y)(xB`@龙;1Lp`+_á)T*PkS/NTz.*;D $O 3r`^ Nӡ7>{u=䏷q')o(vۿPO;VcQ9{|jZǒ	a9/zzuH6H@cz=Oz^HcY@oKV:sN_kw6Ye,yew7CFS[-$蕫M\ک䡓$Nri 	i3 F6!tHm~OP_sSoeNF <jѰ03:K>;첁pXR^54cӡ.̩C-U܁ͥձz5fh`ԗ4p8@ъ0"P+'_j{cf,P F!y99@?)Noz/gJ_u5䚹J?D;?NmwQ{[Zf0B	jx,8)<zh?΃uAڕ@J'$zwA1Orgfֵ^G6PM8rǿ^;øXvvs[QOπ<
d/%pS^Ua268qrSz%^?6}30̮	TqHMn\9*ƚl#mBDD-tum /coHw ubO3ݹVZ_H;ԯ+mC)0	єqlp_ОL]_,$^:Uo,-14+J*~i5bǱ%.{,/#L?gtzy$鐷4汞V(axM\ڐ>DlKZ̳)Z*DNd(ɷ*~+kK|_b>GD?P=Q(oi'E~h#9/aSۣ\4a+k )æZIoKsaES!;YH'CO|kglNǭɦTK=|}j>͍/o{J}tpjmj/yHoo/M_ZCQYQjL'8yI#fXcfNyKwԏZĹi 4,q| 6Rj>e+)T=]>2%,gk\({Y*4.#oMA;3LDfyIXq:cRs'2|@+R%6,P_P
/Xd6۔NHX߯$u=e\@=V2t_s~OQ 'CuXG'R|YCT
y˨qL$4ZifKЏ%8]ktzxszܱ -fxLgku5!W\ %^2䎩ZhTM˩ne,4FMܨUd.<+u.^}
,1*+D#yz?'js6I0\.PQ9Xs2Y^9ZڕOT?J7QWSʍǰ^3,~:푫)ܶ=z(>Ɔ_|gp2MWto~n&]O`ٶb͵
+% y1Hc6a$DS(w\~刪ܱJk# |i 44 O񌁸t)W1B!>)"{:6Q CwyR}}[ɕS{'fB{(d./Q?,AB؊O狣[ +2ӍhS ҸzoP`Ϋo([ g')v)>Tx@6/SGpxwEu?IN8/bE1?j_٧E׾LIT`*pWGC_=^7PhсTQLR$;LYn 8BC4PRY7OE/#LT7
(THTx2Oi(BZBQ9yfQ89(Fϻ8Ȼ"X{VG=m
?-tJ*},UQN'7 R.F_oZC]u_Up2Cxl{|~HK/8"MJEȌ+Gj*}!ǦtNpa`G	iBhBn9ڟP.Կ"OSoUTU{rnXܨw!6܉z(2Ar&Tul̋quϦYXk
@Fm|.7.M_e0dCnb3
tlPa\nJθ2W2MPhc	nQYgбkMn*|;?!x͵W^{O^W}꜌S6
VmQ.S5Ssӛq!PPvj|)OXhVsK\y[x3:nb4顑>LݬWvesL|C} t&47Kx@O7
Ah4S&5q*H̊7y	_ 	dO~F?QKef̦M'	̂7jMu0H,f wswkjHbH*5~q0tMDƱX7/ΔSeU5n*~<fƼ<;нx<Dt'esܨae\pIc
[HlVQ\͹TT>N6弉<+FXJg(G_C
l+yysES>\P
J
;$b
*7W^8ICfzծ;ۗ۷&W!E+\XJF;	=}#{߿jR`Vp;ܪTco0Bb|	hHb)ҿ*ÔV8,JlEhYEQ+wN:ˑP
tN|=,$"YΤNG7)qnQ5RzZr]aeN-"J%5ZG!dn{i9o^P3p-:N2 ٳԴ|*heT;m2V!UT
:zc8<"Q,׉ݵ|+IPT7]~՘<s.3ǹ1DsN	yAx|
;)$"qhoJRX'sĹo%o1cTLR]G-SH]
2]@Weu/.W"3cs}T~esS̹a#zC5FC[(\Kո̺o,!!++pJ%"<n`p\!I"e#gC&<FMT
4WPbi`{)3R4+ҶV cFښj{LdDAӶgp$Bu5~+itLspґe^OmEW]|>+QqRG
)I;+wSTYΩ R%C
C^@\*$4@tổwq@H&ElH@Ӛs.d	,i|)<rA3沤<E)m<~7J=P1!_v;>#J֝MCF+(Wu"!U~fA2vwtםr$(lkzVvqO>\r?uvu~!~^ڷSPzrFÞXPtcd,SyƁMʺ-);[:7yw(۱t,0x6B}* 9^*2=֫>E&_E=ǵ7CᬗVeA!Z;55䟶+T1A*wI}fcc}zI9[%|1WWjK>/x!7Hkz2ݑh!7!q99@7ә8Udr|ԇ~^Ys?{B J:sXx#e އ(_;|W}"g#}zFI+R/Թ,<tK񶧩к
;\۳߷r}Jqx'FU0hşU/x픅UTk]=)<׺aQ\%"$mޮʵ1 H[ڿc;UWWQEuM,8iɌ݋޺s.?##q}=BM1?57Stl6a<vk'ʫ$MӾ0E*	{+y2zRd Ο\6EPVV"˩Qn}%~BW|<M(Y)kCz07NuYk2H{ZpGk?i+|fwI&NaY;մo@'2ڏ9dčD("Rd8Yu+{]\yiKN=Bdp͡s5uJ^z 8Ie8KQ$y\<>Jݨaz:y]KSSp(Vc@kF&elՔgD-eŒQ\1|T&T~rRqAeHNОp,ڍ#¹tvc]MWScv>|=]x[
}|A*8hF;B!`F:ùYpvXa4z:=<Ww&\QܪrPD%eh#X;SG}d5]ȨE&ܐ"{ e;U9RRFgR,E*(olL4cHa?C{בop n?/͞tժI
h;rqhK;v=9}ӟj5$2]tr8}dՊ]L[ XOwݷ{hTY_O^x!1r$ oE&88yo> ቀz)ԇ[QFv%Mh0"ҁ:&cgHiX}ەʀP$mHm*5tPIX/1v[uvEH2q9y.XE-*}H>V+DRYu\Bj>`:n7薛}}\]YYzV-$$;vnXr!Wz歴k&ũj*F̘ĺ45bq@"$C:I8:ʝsG Br9AF@撷Q PDm .1Jr[䝵2)u79RJ&8۪ToG[(@~n#dyhŧ$ڪ(TCP:2#23oH/w q£/JoF=]n!* uaвa}_D?ַ)Q+ZCw=ceb|9:gG^@**ݱvlHdjk)V[O% dy a#k%tr8ř(wN7ӔǬ \z`(5R65D--(%T6)r
TR~JJQRX:EY>5jj%K(wYVSLf˿ƝA
*DjԎ(\zL4w"`,) YN@݀{h~tSEEhW2a/xS X%vւ.rCչJJ׆T3{)E:Hcr	q.aS' z:SܱT˦#Wuʰ(Ih@3>3-tZ4^2}~%]x5T&ee^C&x`ﲔTP_Ϩq6u2CsmDlL:@_Wg?ں"re5߽e+Xl4p88, -Y@&Quڹk7EYD
ٹC(rD+# ƣJ5<7B_'q59CKGAW4RF](!p8HvQvK9vs"e3Iku"8oăJz;UYRJZdα*xº~`aDb-z)YYwP9_Q.'_6ra~f'm:'Gߢ~3WV^f%kNb}Ы҉䪡!8]WӲ%׿vŢHV|y| !t(rdY+v &̲(#ªvz}j5|R|^K"b}}[@ ݣR*2,JQ>XKw7VxajOvAZ跑PΦ@ %qZ]՛G>*FΡ@*KmC	jSou(Q?xWo@Z?B_gԇf77$Xw}-z2&Ny2]|0~C:1܀%p\'ua:`QTGS%&$DB6ԛqQ{Eò1cfEYBLܐ.;I3iZ"]ۤ4/WU}{n:Ggw_;ZJ#$zbmᗕj/<C8gW"MWhv 00wHe9CQ=yH@)/OTH"Z9@q<g*N2޷]}uxp|hyj_%稭ltbȍF-Dr"\$@<4 $<NNYk0[E`2mL/'/@U<na%W	ӪFM)AR84r9ݴ2Kp#짫6tVR~Ļb^Öy,M<u<NX+<?`^sUg_)ppk"
ke7ͯOVd$dRѻ
\y%w޹+esJ$# 6뾎u/EҘ%ZXY1Nf%&c706m9Q4qAdgg$ "^~z%mLv/זΥiqb/<"}^eX9HD+lDATӹMٳIe
NK2O?ݾ fs Lxebҥ$9+iμ%*Sne ё?k3"Zv_iƪ ҁ!=CY{DehiUtyz OQnl!DLS, ?K&9|S+0:XQ?t{YXޗ`EsRi&	plWN6&$ZAP,  :B$(й"۟Pb|:f:٥Ӗ̂O}|H*yQ6]>22*֩SaTt%y,6duVK 5Etve>"7 P衮=7LӶq	84URteRYzhĞ Oot8qe
ԗ+5)5b'|2HrD@"5ƹ:ܡr%@;7H4쫥bMӄ]"p]I\b8BEG\4qړY R?rtbeC/e3st4r=:ߠ8	|Ҹ@aOp"2,
p
3!9ArJse5I!+(G<XB0U=lr)`+TXHUtCgٱHA}!1&Gϗ\0cϱ:/%]i	GOf83}VrFH
4F< /$:LbϙH0(]
~^%#ّQRU}y2WDF:KA݈uÁ"O5Uz"</ɬC,PCd2"Hs(SѨ,*"**+H#*z40K0:
\#CBŽ ޙy!En@W/zSY
;yOfwv{U%>2	AR**յu]eW,XuWAADj(CBI!3{fpu+Ô;w{ޯE$nsźɥ~`jYuќVziAp1UYĺ ` }.X څW{02ΑK:A{xI*TH	`6Pq/cgqNey$ki_mYnB߁ Zل>,J7dnc23ۍ~꿏M	vCc3YӥCruW9 ^n
=lV엛LRlR ϵBI=T
O$\;^G9`h^)yj*B]!W󠁯K'1_\;VIgx-fF֥7'r$mm>mT-k(D9
h`e)1)1&췈߀c >iHD3pL%jPJ޾}㊮?Ve=͍vK8_J-{,ɂ0͡AVm4ע03/B~N<}|@f]04䃔{.6\{~,4E%7,|`TSg\ɻLõJ`)d C``cSs`.G5;'8 b=e;$;  H J,ږPi^=JClc߉sv:sS+ hhk6#p5rh	Bop?~2_@oyZUv9	HN[ruR-kB{sڋr&1>R^_ M)C[X E$Bq|f<d* u 0 𢡄a67gŀ̿ a㹨JOVEp-k𽡽A4xɂR2G
l2sA 
A@H3 5ψ2YQm]axq|	!kaK?Uami.>H\i$ G@	y)&2а0A`AhYhހ yTG^?'e<36_>AcqcKsU4PWZ@LWI]/_09ޓ6)Oٗ&Rek1Mt)'eѓQ})Cr?yo:ZÅFRgBKk<ŷ[HV!"M$RDzO\qPx~O #ƍ5WN%|s/4vS55a"AHAfkN揥u0ᓷl5mmeTO(B!;)Lg4*K? ?F5efFi7 0}m|[ZpZ9Wk?2ر_?PC7QϴujLAI73;hyoҐR\P+ė@k?L<qE9SԼaT(6k*$VwrL
$>r-RM
KE;&wE19,f:L__.DIeNï25a#U0<cteaڳDy:\
27N!uHH8z~f| M^%ei-io7aJ	Id6%w~W~sʁWgG.`'bnt)]Gg۟?uyO+ żOI}{r"vwnr	)]i#I_~!}!jOɯ/d Z*)IDг++rlѰ}JV4&dt/xna/v
{pKcAZh0PgK5er^6&(PR'..dѶBLrnF\<c.od $LeAR{'%n"W)IXdT Rp>P\*1IOǄI,mk>2B5xO ( 5OW:Ő:$2Md0[c	ω w*`t[/E[#;zETmo' в>ծ T!]$݅|a;2r*NN $4xq:,euMԷg:0:tHjg3{$oJ5e@0`G420r@RG0饄 *,Y=Gn/`App}_-qȋiIo R
[eus#r*j}=n3IhB}xܿs'F{/}>"m%n24Sֆ3AQ'3>K=0XcOaTŎu_nzɿSxjFUU~hĀ6`Q@p ` 1$t9? >.Y%ȋ4.ОƑB):2Ќ
o-Sl'0^G~C})aW	3~xOSr
4z

bmE'>Ӻ^?7mj%K>cǒ.\'Uщt׬9?KWf.Μ:MO?Z-w9yyXm3^28OWk8 GDEΥ w~
=~dq3qԆy]$ZW/Jq@,>͙{7t	[XO-V-s)aמ}43HsZ@eilj`Z7^﹇ѣ|eZf-5pm;qͤh$I{vq̈^o{cclhV}o Ч!|V\N]ciӓ@a޹./Ҭ!CsUTVSC}54eܬoiiᚼ'<6 88WB m&"0%4Vf wO:WMMS[+*pۻ٬ͦwr:Jh
Ji̬qcHLJbN
ӧӸ	(6#GDRӔg/؉n=/gouKCR>.#F

ijdhddp=Ѓ55>'Z[Y&as59*//JF@u5Uc'Of0pQ*>YH+dXh7	=;f3^%VLVS+۵&NBcD!Z2}ڠ!C֍ԭ{7s]<z~Pp w hwYʬF(T*:[AF0X)n ܵpشn;ej0[[/,#9Y֥so|$1ӍWVjii8mDӥw:a
H> 27Jw5FGzYjVZb -+[ѤR~4t!**;K&-U+ù̉II4b8#3#n1V*)[wN?=qϖÏ:%P@PU3W^f^z%q4h@u4bME[6nAxzGKjۋ>?#= sTd$mYq;ҝsr?r2~:׏R}Pޑô~:
c>oJV3;N'tv4\x!AV}x8Ei,8~z2+<i
̼C]R`BV|n 5)z\Gh10[L7%'t-)Qѳ{ٙu۶9ߖq͐N1!&fо-M-f0ҍ1 мMµad4[tQ/l7P̳OZ'ۨ٩dNӞ*C&S*ULC={ь3h {ME\ѨQ7>2XfzC31>29>2C~G\#sԷ_?Ё#^TVLs̢)`fl07b7"}.ǎ`dF7pv!!$(<6;yo JI̜LZfȏ&zIQ}t)7kű#;I]`<4zg=`-MB855pr
^UŬD4Ć.-MM!>=gOj޴#w#pML(վ0͘f#7b<&_f;'9wҰéaLfahҴec\I;wf>\ ٿH-F#agTl,3Ku\C0֣52eoB۷&Ш)&.h5hMŒiW_v}#u@iqg>v-3?6L|ߦNlx %'̂w3!G۳wPK]ue:
Ϝ*aSJMFpy[7o۳I!cڒ£onL?طoLG!9n@C3G-L0!9 weKJSN6Psך_K!anCHpVklj4F\N@5NWz%c\iDv/lܘ4;'

A%	')1cg؂g.pi=vCZhgz~BK?k=DuIo	>,y;-jL4Zl9Ѧyp+*:?oR|h}1BBCIH.:=c<8|nĨ~3Xaȳ{ǋ#V:r <7B
-5-kq J$j&AC 9Hw2~ǋߧ-[}x$LqËydɓx >~ͼ<2fJʯd\3fsn-.h5
Dh6һѴF1,i7q0~ZL7S~a7*!F~_|<yΔQũSfY^UCI	ԣWo㍉fRV-Ԋ tg|gh Б#i7ӭϢSP3ǫժOٝkqn3ӹE``f1ɡ{Gي߉oWҾ=9tXU-&5tZi߮Իoo5'rzש3m	TS r[Z<}8e:&"Yo;Ǵ)65p8v;:g7ϯ'%s=M1'u݁XOeŅB#{֮{p\@z(hzz1yӼ_2l\K!_yNQF&{[H`LM1kf)WXMr|WRr
2 e$@DfO1{A}44",oE+.'3<Kq!jB~췰mQ[oK=SMGKpRj`ɤP:~3F7b=,JgJ5XA:m3h/?2w忼F<G{\n5Bo3s^,e̅;t8/D:A'Wz͌ȔЧt1*U951ăMi](%5kIUTaT[SC`_5;y77݌и)ԇɒStKQ,Oi)'*+*O?S$C%[nf§"CMM,3]k['SmTMXUkc{oX6G?/}+U WӬ%iZf}v-f*㺆Z*;UL^ЉqA ؾ633hL+2o/QpPx;wMS3)@Bc~0!HijldؘG2b/=|>s@z;f}7_|:~0;A:B+kGjj{DU4Et-ON7H.O_F!4<,|ah	hFw1LJ UM_tX׭_yćjymL3TW+ύO+3Q- 6'pcqh49h+ @k3)hF  !)k'uE5>}MbV	38FL1Yvs1!.zn4kp=?蘒ecV|u~{75oOfnkIíjrcb^D&5qvp]5dF	m e}A/,?4(Q,-)NX@S\YQAՕ'u"']v7WE <I?0_Aȓ)SoL)-r	W9q9n<7KϜLR2	 9h,)@J H@#GhIAZ_-W6xxwd޴}4	z:de}Ogo\tY̟Sʄע?ǁ44lQћ-
JM&^)ľ&ۮs|,Bsz^(!2_XPngˋق;yg/<G-3so-a|q0(#9|%4|]m+#ͻ\t'\ֈ #C~
<}Hm{!(m]:,|iq~/hWt8oxHdD	"̵va?nA+Њ*1{ۛIF	@BB4hfK kԚ.GyhBl:W$7޵xv-|G9.ʷYYtlvɋt^M_}I
%̡ d5LuќP_ț`p4R3=?gQ~9JGIuC|ctȂcvЌ ,.jqNp4%:.nwLHAXC0ضyjen*zx=OA~i_zB^#-m6ꍶ
 "poA Aq4Ef,kraш;7@3 %r{?}peAfa,(&L3B~ _0`nXzoiذ!\)~>B (:FTDMLP>?>)63;Cc0,,8_ -:͐'=&5{/;#gL&a' -ÿ}'Ae욣rWeUU~#;*u 4PdLLZf7/\dZ4H#Z\|@qF,-$]
*[R^vss<O[}S	c2E4EIrvjzpq񿘾 :AJrRӠ!d(1
}ؿ4(O ja#6{L_K&Wtk\3e24XXH͜1[z$wxNRt5p!.%3  @zZ$L"@H5 4d铱ΞRDoV7PTk\ĂB,ȫQ;bgH5t̒0م-8n&)}2hΌI?c ]Hͫ?@fί#0N=&:~C]Cou4a8^`|QPΫ*6ֲ"|r%rXeEfXiuilhh/LZ~T;`3qCԻOoFth./|Bhg|}D{c&a6{b>͋h.p%>JrRq~>k&PiF#voMD&	_`E!Sar>EXl'kbhn-Ll1x99%K~.Q=)k}>M)/dRYHd\@2q"4ܿm.!|w3v,/@0@Ծ|QKAb S9b)(3qAaEU[̤;]ׯuyH	t֋lNFȍ(~Jx"D=*άA:oy"0%:wz[sCy䲶:&nCG%UQu5KIdާ?$m<X(?ϛ}f,XgD	ן__}.3eo@eA^^MBR,G$lsX*l1¢!J5jjj!Q۞z@[57p}f`wq`6`G5Vi
J9zK=$w}KkĦF<6eAn(ß@̄3#3 TEF8h?**ȧ<^@0!<6m\R(e*f՜.9!}őznw=]&CоXR^m;d1:XwT&xrC5lVkh&bھh')D/ݕn=M5[/;wJ7OQ`RhePsSݸ	*-]M.hX,Z[cy~KcsFi±
+'5TV̘48]Tm[RNW8׾A H@Z$1sZSZz:}R?ff2uE{.wI&'B̢	S}FEGbPyǏK'YX16fی&s\ƖI,N{z,?.kWʺڙ
&>&z3h59AJEiXh*,vko94{鮻d5U,/3Ty&Fr"_8|Q}6çFGEPLA߭[GE.ƺFGqy1w21(09H!?mt	
ݣ 즀`$r 3syUz`MMpy3ĲKJJJhU!cfq4f<ZHQ+Dk'ncpHQvd,!qC
kli)GMF}nz<Dyl2"k*ޝһu={ioVf>c4u))moV}˧,|k!m۴YwsR}' pl\*d5xz*+hCw휼>XoNfa=4wA]v&&C#hĨQLwޡkV:$'tу̜#q>̄A7Qҙr46ߑa:&h@Zh 'ғ=ps>j 1Z'xG%E#vg'
0WMGeg/>$f=Οq{s5-|aV[:Õa1gKn2,ֵ\,an]<Z!sqp ˡd0DQ Wx7#^B65ў={cQzR60iG3nISM%i[YqF}\;S+`śg\xf QTE\@fDٞPfg7	"Wjot-7S޽ien:7~a$|4VJKKO>C'MJHn[W-RT|2.G6' 1`.88;:"]T8Ahs9ݑ'EIJNr-|ϯ~EƎISabR%7'icpMt`ٳ}!<LfR'ڕ!+Ok«mՆa7s6Y)jARStevék
4~
tYiu]K`899x>s0xރeH1Z狎zz\Pn
>D
	߅چаMCzAUEшXV9P,toXLyr_+tÊ|4qݾA"B.A H?!}OW>H[ᱴu*]tP9֭<>F6,3>eA~jb>7SF޽QNOҚoWn0 +5acG\rB:mrwJԠM{3oJٻM2^?_ p%D?K&ERsPvKWm]hFm5;~^QǏҖMտJ|<z:L̿urӿ孝at%3C:*_~5?xUQ7\`0A(!Æac]e1)+	oӻ<-Sh>㕧jlnjXvFVjcb3K%JESo[g75	OޝM[7o),,zOZڲy3-- ;{l/.͌!UU=9ټu-H?H>T@E7&q˿7F7h~@nڏZDO=[oDbxz<
gz2|ʌQ	 !3QuKJ^6dܷk-ͷ[Z>wLz2GN¢w28ߟd
q/~\> ѭ3~e tp˭(sP_^ǝu3-|	_i`	'(y0k^pXeJJJ
?i[Ky>EEERDrt%rgz"A2f$&>`TuMh?[`3̊Ȳe*Ѩ/?A۳wі<`'ʯz.;?Ng|'.v%%¼DBtFņkUh\C;-G\!*~\>Qth!ӂ(<9JNe_ CyyL%'Y3fgq.Mt	JǕ(R3`hn43R3Os iִbKJfꚊϬpKb~0g[ᬜ}+I/hkDYm-mlLȢ!cw1%qBzbwx+sDu[	.Qjb_Ia鰡)Ӣ÷~\
 u}OwWV; |`xrq%}g%̣ǜ"a/fj+h⾔3Bpm1q^KFfFiHϊJuW"9k`B4˭s9:T"u4'???8?i~    IENDB`
=== /Users/micaelsantana/Documents/app-frontend/src/pages/Paradas.jsx ===

import React, { useState, useEffect } from 'react';
import { ParadaService } from '../api/services';
import DataTable from '../components/common/DataTable';
import StatusBadge from '../components/common/StatusBadge';
import FormModal from '../components/common/FormModal';
import DeleteConfirmationModal from '../components/common/DeleteConfirmationModal';
import { useNotification } from '../contexts/NotificationContext';
import MaskedInput from '../utils/masks/components/MaskedInput';
import { MASKS } from '../utils/masks/constants';

const Paradas = () => {
  const [paradas, setParadas] = useState([]);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState(null);
  const [isModalOpen, setIsModalOpen] = useState(false);
  const [isDeleteModalOpen, setIsDeleteModalOpen] = useState(false);
  const [currentParada, setCurrentParada] = useState(null);
  const [isSubmitting, setIsSubmitting] = useState(false);
  const [searchTerm, setSearchTerm] = useState('');
  const { showSuccess, showError } = useNotification ? useNotification() : { 
    showSuccess: () => {}, 
    showError: () => {} 
  };

  // Form state
  const [formData, setFormData] = useState({
    nome: '',
    descricao: '',
    ponto_referencia: '',
    latitude: '',
    longitude: '',
    endereco: '',
    tipo: 'Intermediaria', // Default value
    status: true
  });

  // Form validation errors
  const [validationErrors, setValidationErrors] = useState({
    latitude: '',
    longitude: ''
  });

  useEffect(() => {
    fetchParadas();
  }, []);

  const fetchParadas = async () => {
    try {
      setLoading(true);
      const response = await ParadaService.getParadas();
      
      if (response?.data?.data && Array.isArray(response.data.data)) {
        // Process data - ensure status is standardized
        const formattedData = response.data.data.map(parada => ({
          ...parada,
          status: processStatus(parada.status)
        }));
        setParadas(formattedData);
      } else if (Array.isArray(response?.data)) {
        // Alternative API response format
        const formattedData = response.data.map(parada => ({
          ...parada,
          status: processStatus(parada.status)
        }));
        setParadas(formattedData);
      } else {
        console.error('API returned unexpected data format');
        setError('Formato de dados inesperado. Contate o suporte.');
      }
    } catch (err) {
      console.error('Error fetching data:', err);
      setError('Erro ao carregar paradas: ' + (err.response?.data?.message || err.message));
    } finally {
      setLoading(false);
    }
  };

  // Function to process different status formats
  const processStatus = (status) => {
    if (typeof status === 'boolean') {
      return status ? 'active' : 'inactive';
    } else if (typeof status === 'number') {
      return status === 1 ? 'active' : 'inactive';
    } else if (typeof status === 'string') {
      const lowercaseStatus = status.toLowerCase();
      return lowercaseStatus === 'true' || lowercaseStatus === 'ativo' || lowercaseStatus === '1' 
        ? 'active' : 'inactive';
    } else {
      return 'inactive'; // default value
    }
  };

  // Validate coordinate inputs
  const validateCoordinates = () => {
    let errors = {
      latitude: '',
      longitude: ''
    };
    let isValid = true;

    // Validate latitude
    if (formData.latitude) {
      const lat = parseFloat(formData.latitude);
      if (isNaN(lat)) {
        errors.latitude = 'Latitude deve ser um número';
        isValid = false;
      } else if (lat < -90 || lat > 90) {
        errors.latitude = 'Latitude deve estar entre -90 e 90';
        isValid = false;
      }
    }

    // Validate longitude
    if (formData.longitude) {
      const lng = parseFloat(formData.longitude);
      if (isNaN(lng)) {
        errors.longitude = 'Longitude deve ser um número';
        isValid = false;
      } else if (lng < -180 || lng > 180) {
        errors.longitude = 'Longitude deve estar entre -180 e 180';
        isValid = false;
      }
    }

    setValidationErrors(errors);
    return isValid;
  };

  const handleInputChange = (e) => {
    const { name, value, type, checked } = e.target;
    
    // For checkboxes, use the checked property
    if (type === 'checkbox') {
      setFormData({
        ...formData,
        [name]: checked
      });
      return;
    }
    
    // For coordinates, perform validation
    if (name === 'latitude' || name === 'longitude') {
      // Allow empty string or valid decimal input with . or ,
      const isValidInput = value === '' || /^-?\d*[.,]?\d*$/.test(value);
      
      if (isValidInput) {
        // Normalize decimal separators
        const normalizedValue = value.replace(',', '.');
        
        setFormData({
          ...formData,
          [name]: normalizedValue
        });
        
        // Clear validation error if the field is now valid
        if (validationErrors[name]) {
          setValidationErrors({
            ...validationErrors,
            [name]: ''
          });
        }
      }
      return;
    }
    
    // For all other inputs
    setFormData({
      ...formData,
      [name]: value
    });
  };

  const openModal = (parada = null) => {
    // Reset validation errors
    setValidationErrors({
      latitude: '',
      longitude: ''
    });
    
    if (parada) {
      // Edit mode
      setFormData({
        nome: parada.nome || '',
        descricao: parada.descricao || '',
        ponto_referencia: parada.ponto_referencia || '',
        latitude: parada.latitude?.toString() || '',
        longitude: parada.longitude?.toString() || '',
        endereco: parada.endereco || '',
        tipo: parada.tipo || 'Intermediaria',
        status: parada.status === 'active' || parada.status === true || parada.status === 1
      });
      setCurrentParada(parada);
    } else {
      // Create mode
      setFormData({
        nome: '',
        descricao: '',
        ponto_referencia: '',
        latitude: '',
        longitude: '',
        endereco: '',
        tipo: 'Intermediaria',
        status: true
      });
      setCurrentParada(null);
    }
    setIsModalOpen(true);
  };

  const handleSubmit = async (e) => {
    e.preventDefault();
    
    // Validate coordinates before submission
    if (!validateCoordinates()) {
      return;
    }
    
    setIsSubmitting(true);
    
    try {
      // Prepare data for API
      const apiData = {
        ...formData,
        // Convert coordinates to numbers if present
        latitude: formData.latitude ? parseFloat(formData.latitude) : null,
        longitude: formData.longitude ? parseFloat(formData.longitude) : null,
      };
      
      if (currentParada) {
        // Update
        await ParadaService.updateParada(currentParada.id, apiData);
        showSuccess('Parada atualizada com sucesso!');
      } else {
        // Create
        await ParadaService.createParada(apiData);
        showSuccess('Parada criada com sucesso!');
      }
      setIsModalOpen(false);
      fetchParadas();
    } catch (err) {
      console.error('Error saving parada:', err);
      const errorMsg = err.response?.data?.errors 
        ? Object.values(err.response.data.errors).flat().join(', ') 
        : (err.response?.data?.message || err.message);
      
      showError('Erro ao salvar parada: ' + errorMsg);
      setError('Erro ao salvar parada: ' + errorMsg);
    } finally {
      setIsSubmitting(false);
    }
  };

  // Search and filter function
  const filteredParadas = paradas.filter(parada => 
    parada.nome?.toLowerCase().includes(searchTerm.toLowerCase()) ||
    parada.endereco?.toLowerCase().includes(searchTerm.toLowerCase()) ||
    parada.ponto_referencia?.toLowerCase().includes(searchTerm.toLowerCase())
  );

  const columns = [
    { key: 'nome', header: 'Nome' },
    { key: 'endereco', header: 'Endereço' },
    { key: 'ponto_referencia', header: 'Ponto de Referência' },
    { key: 'tipo', header: 'Tipo' },
    { 
      key: 'status', 
      header: 'Status',
      format: (item) => <StatusBadge status={item.status} type="parada" />
    }
  ];

  const handleEdit = (parada) => {
    openModal(parada);
  };

  const handleDelete = (parada) => {
    setCurrentParada(parada);
    setIsDeleteModalOpen(true);
  };

  const handleConfirmDelete = async () => {
    try {
      await ParadaService.deleteParada(currentParada.id);
      showSuccess('Parada excluída com sucesso!');
      setIsDeleteModalOpen(false);
      setCurrentParada(null);
      fetchParadas();
    } catch (err) {
      const errorMsg = err.response?.data?.message || err.message;
      showError('Erro ao excluir parada: ' + errorMsg);
      setError('Erro ao excluir parada: ' + errorMsg);
    }
  };

  return (
    <div className="space-y-6">
      <div className="flex justify-between items-center mb-6">
        <h1 className="text-2xl font-bold">Gerenciamento de Paradas</h1>
        <button
          className="bg-blue-500 hover:bg-blue-600 text-white py-2 px-4 rounded flex items-center"
          onClick={() => openModal()}
        >
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth={1.5} stroke="currentColor" className="w-5 h-5 mr-2">
            <path strokeLinecap="round" strokeLinejoin="round" d="M12 4.5v15m7.5-7.5h-15" />
          </svg>
          Nova Parada
        </button>
      </div>

      <div className="bg-white rounded-lg shadow mb-6">
        <div className="border-b px-6 py-4 flex justify-between items-center">
          <h2 className="font-bold text-lg">Paradas Cadastradas</h2>

          {/* Search box */}
          <div className="relative w-full sm:w-64">
            <div className="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
              <svg className="h-5 w-5 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
              </svg>
            </div>
            <input
              type="text"
              placeholder="Buscar paradas..."
              className="block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg bg-gray-50 focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-sm"
              value={searchTerm}
              onChange={(e) => setSearchTerm(e.target.value)}
            />
          </div>
        </div>

        <div className="p-4">
          {error && (
            <div className="p-4 mb-4 text-red-600 bg-red-50 rounded-md flex items-start">
              <svg xmlns="http://www.w3.org/2000/svg" className="h-5 w-5 mr-2 mt-0.5 flex-shrink-0" viewBox="0 0 20 20" fill="currentColor">
                <path fillRule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clipRule="evenodd" />
              </svg>
              <span>{error}</span>
            </div>
          )}

          <DataTable
            columns={columns}
            data={filteredParadas}
            onEdit={handleEdit}
            onDelete={handleDelete}
            loading={loading}
            error={null} // Error is already shown above
          />
        </div>
      </div>

      {/* Modal Form */}
      <FormModal
        isOpen={isModalOpen}
        onClose={() => setIsModalOpen(false)}
        title={currentParada ? "Editar Parada" : "Nova Parada"}
        onSubmit={handleSubmit}
        isSubmitting={isSubmitting}
      >
        <div className="grid grid-cols-1 gap-4 mb-4">
          <div>
            <label htmlFor="nome" className="block text-sm font-medium text-gray-700">Nome da Parada</label>
            <input
              type="text"
              name="nome"
              id="nome"
              required
              value={formData.nome}
              onChange={handleInputChange}
              className="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500"
            />
          </div>

          <div>
            <label htmlFor="endereco" className="block text-sm font-medium text-gray-700">Endereço</label>
            <input
              type="text"
              name="endereco"
              id="endereco"
              required
              value={formData.endereco}
              onChange={handleInputChange}
              className="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500"
            />
          </div>

          <div>
            <label htmlFor="ponto_referencia" className="block text-sm font-medium text-gray-700">Ponto de Referência</label>
            <input
              type="text"
              name="ponto_referencia"
              id="ponto_referencia"
              value={formData.ponto_referencia}
              onChange={handleInputChange}
              className="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500"
              placeholder="Ex: Em frente ao supermercado"
            />
          </div>

          <div className="grid grid-cols-1 sm:grid-cols-2 gap-4">
            <div>
              <label htmlFor="latitude" className="block text-sm font-medium text-gray-700">Latitude</label>
              <input
                type="text"
                name="latitude"
                id="latitude"
                value={formData.latitude}
                onChange={handleInputChange}
                className={`mt-1 block w-full border ${validationErrors.latitude ? 'border-red-300' : 'border-gray-300'} rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500`}
                placeholder="Ex: -23.550520"
              />
              {validationErrors.latitude && (
                <p className="mt-1 text-sm text-red-600">{validationErrors.latitude}</p>
              )}
            </div>

            <div>
              <label htmlFor="longitude" className="block text-sm font-medium text-gray-700">Longitude</label>
              <input
                type="text"
                name="longitude"
                id="longitude"
                value={formData.longitude}
                onChange={handleInputChange}
                className={`mt-1 block w-full border ${validationErrors.longitude ? 'border-red-300' : 'border-gray-300'} rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500`}
                placeholder="Ex: -46.633309"
              />
              {validationErrors.longitude && (
                <p className="mt-1 text-sm text-red-600">{validationErrors.longitude}</p>
              )}
            </div>
          </div>

          <div>
            <label htmlFor="tipo" className="block text-sm font-medium text-gray-700">Tipo de Parada</label>
            <select
              name="tipo"
              id="tipo"
              required
              value={formData.tipo}
              onChange={handleInputChange}
              className="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500"
            >
              <option value="Inicio">Início</option>
              <option value="Intermediaria">Intermediária</option>
              <option value="Final">Final</option>
            </select>
          </div>

          <div>
            <label htmlFor="descricao" className="block text-sm font-medium text-gray-700">Descrição</label>
            <textarea
              name="descricao"
              id="descricao"
              rows="3"
              value={formData.descricao}
              onChange={handleInputChange}
              className="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500"
              placeholder="Informações adicionais sobre a parada..."
            ></textarea>
          </div>

          <div className="flex items-center">
            <input
              type="checkbox"
              name="status"
              id="status"
              checked={formData.status}
              onChange={handleInputChange}
              className="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"
            />
            <label htmlFor="status" className="ml-2 block text-sm text-gray-900">Ativa</label>
          </div>
        </div>
      </FormModal>

      {/* Delete Confirmation Modal */}
      <DeleteConfirmationModal
        isOpen={isDeleteModalOpen}
        onClose={() => setIsDeleteModalOpen(false)}
        onConfirm={handleConfirmDelete}
        title="Confirmar Exclusão"
        message={`Tem certeza que deseja excluir a parada "${currentParada?.nome}"?`}
        isSubmitting={isSubmitting}
      />

      {/* Stats Cards */}
      <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
        <div className="bg-white rounded-xl shadow-sm border border-gray-200 p-4 flex items-center">
          <div className="bg-blue-100 text-blue-600 p-3 rounded-lg mr-4">
            <svg xmlns="http://www.w3.org/2000/svg" className="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z" />
              <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M15 11a3 3 0 11-6 0 3 3 0 016 0z" />
            </svg>
          </div>
          <div>
            <div className="text-sm text-gray-500">Total de Paradas</div>
            <div className="text-xl font-bold">{paradas.length}</div>
          </div>
        </div>

        <div className="bg-white rounded-xl shadow-sm border border-gray-200 p-4 flex items-center">
          <div className="bg-green-100 text-green-600 p-3 rounded-lg mr-4">
            <svg xmlns="http://www.w3.org/2000/svg" className="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
            </svg>
          </div>
          <div>
            <div className="text-sm text-gray-500">Paradas Ativas</div>
            <div className="text-xl font-bold">
              {paradas.filter(parada => parada.status === 'active').length}
            </div>
          </div>
        </div>

        <div className="bg-white rounded-xl shadow-sm border border-gray-200 p-4 flex items-center">
          <div className="bg-yellow-100 text-yellow-600 p-3 rounded-lg mr-4">
            <svg xmlns="http://www.w3.org/2000/svg" className="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" />
            </svg>
          </div>
          <div>
            <div className="text-sm text-gray-500">Paradas Inativas</div>
            <div className="text-xl font-bold">
              {paradas.filter(parada => parada.status === 'inactive').length}
            </div>
          </div>
        </div>
      </div>
    </div>
  );
};

export default Paradas;
=== /Users/micaelsantana/Documents/app-frontend/src/pages/Alunos.jsx ===

import React, { useState, useEffect } from 'react';
import DataTable from '../components/common/DataTable';
import StatusBadge from '../components/common/StatusBadge';
import FormModal from '../components/common/FormModal';
import DeleteConfirmationModal from '../components/common/DeleteConfirmationModal';
import { AlunoService } from '../api/services';
import { useNotification } from '../contexts/NotificationContext';
import MaskedInput from '../utils/masks/components/MaskedInput';
import { MASKS } from '../utils/masks/constants';
import { unmask } from '../utils/masks/processors';

export default function Alunos() {
  const [alunos, setAlunos] = useState([]);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState(null);
  const [searchTerm, setSearchTerm] = useState('');
  const [isModalOpen, setIsModalOpen] = useState(false);
  const [isDeleteModalOpen, setIsDeleteModalOpen] = useState(false);
  const [currentAluno, setCurrentAluno] = useState(null);
  const [isSubmitting, setIsSubmitting] = useState(false);
  const { showSuccess, showError } = useNotification ? useNotification() : { 
    showSuccess: () => {}, 
    showError: () => {} 
  };
  
  // Form state
  const [formData, setFormData] = useState({
    nome: '',
    descricao: '',
    data_nascimento: '',
    responsavel: '',
    telefone_responsavel: '',
    endereco: '',
    ponto_referencia: '',
    status: true
  });

  useEffect(() => {
    fetchAlunos();
  }, []);

  const fetchAlunos = async () => {
    try {
      setLoading(true);
      const response = await AlunoService.getAlunos();
      
      // Process the API response
      let alunosData = [];
      
      if (response?.data) {
        // Case 1: Standard response with 'data' inside response.data (common in Laravel)
        if (response.data.data && Array.isArray(response.data.data)) {
          alunosData = response.data.data;
        } 
        // Case 2: Response is a direct array (fallback)
        else if (Array.isArray(response.data)) {
          alunosData = response.data;
        }
        // Case 3: Paginated Laravel response via items()
        else if (response.data.meta && Array.isArray(response.data.data)) {
          alunosData = response.data.data;
        }
        
        // Format data for UI
        const formattedData = alunosData.map(aluno => ({
          ...aluno,
          status: processStatus(aluno.status)
        }));
        
        setAlunos(formattedData);
        setError(null);
      } else {
        // Case 4: No valid data from API
        console.warn('API returned unexpected format');
        setAlunos([]);
        setError('Nenhum dado de aluno encontrado no servidor.');
      }
    } catch (err) {
      console.error('Error fetching data:', err);
      setError('Erro ao carregar alunos: ' + (err.response?.data?.message || err.message));
      setAlunos([]);
    } finally {
      setLoading(false);
    }
  };

  // Function to process different status formats
  const processStatus = (status) => {
    if (typeof status === 'boolean') {
      return status ? 'active' : 'inactive';
    } else if (typeof status === 'number') {
      return status === 1 ? 'active' : 'inactive';
    } else if (typeof status === 'string') {
      const lowercaseStatus = status.toLowerCase();
      return lowercaseStatus === 'true' || lowercaseStatus === 'ativo' || lowercaseStatus === '1' 
        ? 'active' : 'inactive';
    } else {
      return 'inactive'; // default value
    }
  };

  // Search and filter function
  const filteredAlunos = alunos.filter(aluno => 
    aluno.nome?.toLowerCase().includes(searchTerm.toLowerCase()) ||
    aluno.responsavel?.toLowerCase().includes(searchTerm.toLowerCase()) ||
    aluno.endereco?.toLowerCase().includes(searchTerm.toLowerCase())
  );

  const columns = [
    { key: 'nome', header: 'Nome' },
    { key: 'responsavel', header: 'Responsável' },
    { key: 'endereco', header: 'Endereço' },
    { 
      key: 'status', 
      header: 'Status',
      format: (item) => <StatusBadge status={item.status} type="aluno" />
    }
  ];

  const handleInputChange = (e) => {
    const { name, value, type, checked } = e.target;
    setFormData({
      ...formData,
      [name]: type === 'checkbox' ? checked : value
    });
  };

  const openModal = (aluno = null) => {
    if (aluno) {
      // Convert status string to boolean for the form
      const statusBool = aluno.status === 'active' || aluno.status === true || aluno.status === 1;
      
      // Set aluno data for editing
      setFormData({
        nome: aluno.nome || '',
        descricao: aluno.descricao || '',
        data_nascimento: aluno.data_nascimento || '',
        responsavel: aluno.responsavel || '',
        telefone_responsavel: aluno.telefone_responsavel || '',
        endereco: aluno.endereco || '',
        ponto_referencia: aluno.ponto_referencia || '',
        status: statusBool
      });
      setCurrentAluno(aluno);
    } else {
      // Reset form for a new aluno
      setFormData({
        nome: '',
        descricao: '',
        data_nascimento: '',
        responsavel: '',
        telefone_responsavel: '',
        endereco: '',
        ponto_referencia: '',
        status: true
      });
      setCurrentAluno(null);
    }
    setIsModalOpen(true);
  };

  const handleSubmit = async (e) => {
    e.preventDefault();
    setIsSubmitting(true);
    
    try {
      if (currentAluno) {
        // Update
        await AlunoService.updateAluno(currentAluno.id, formData);
        showSuccess('Aluno atualizado com sucesso!');
      } else {
        // Create
        await AlunoService.createAluno(formData);
        showSuccess('Aluno criado com sucesso!');
      }
      setIsModalOpen(false);
      fetchAlunos();
    } catch (err) {
      console.error('Error saving aluno:', err);
      const errorMsg = err.response?.data?.errors ? 
        Object.values(err.response.data.errors).flat().join(', ') : 
        (err.response?.data?.message || err.message);
      
      showError('Erro ao salvar aluno: ' + errorMsg);
      setError('Erro ao salvar aluno: ' + errorMsg);
    } finally {
      setIsSubmitting(false);
    }
  };

  const handleEdit = (aluno) => {
    openModal(aluno);
  };

  const handleDelete = (aluno) => {
    setCurrentAluno(aluno);
    setIsDeleteModalOpen(true);
  };

  const handleConfirmDelete = async () => {
    try {
      await AlunoService.deleteAluno(currentAluno.id);
      showSuccess('Aluno excluído com sucesso!');
      setIsDeleteModalOpen(false);
      setCurrentAluno(null);
      fetchAlunos();
    } catch (err) {
      const errorMsg = err.response?.data?.message || err.message;
      showError('Erro ao excluir aluno: ' + errorMsg);
      setError('Erro ao excluir aluno: ' + errorMsg);
    }
  };

  return (
    <div className="space-y-6">
      <div className="flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4">
        <h1 className="text-2xl font-bold">Gerenciamento de Alunos</h1>
        <button
          onClick={() => openModal()}
          className="bg-blue-500 hover:bg-blue-600 text-white py-2 px-4 rounded flex items-center"
        >
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth={1.5} stroke="currentColor" className="w-5 h-5 mr-2">
            <path strokeLinecap="round" strokeLinejoin="round" d="M12 4.5v15m7.5-7.5h-15" />
          </svg>
          Novo Aluno
        </button>
      </div>

      <div className="bg-white overflow-hidden rounded-lg shadow">
        <div className="px-4 py-3 flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3 bg-gray-50 border-b">
          <h2 className="font-bold text-lg">Alunos Cadastrados</h2>
          
          {/* Search box */}
          <div className="relative w-full sm:w-64">
            <div className="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
              <svg className="h-5 w-5 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
              </svg>
            </div>
            <input
              type="text"
              placeholder="Buscar alunos..."
              className="block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg bg-gray-50 focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-sm"
              value={searchTerm}
              onChange={(e) => setSearchTerm(e.target.value)}
            />
          </div>
        </div>
        
        <div className="p-4">
          {error && (
            <div className="p-4 mb-4 text-red-600 bg-red-50 rounded-md flex items-start">
              <svg xmlns="http://www.w3.org/2000/svg" className="h-5 w-5 mr-2 mt-0.5 flex-shrink-0" viewBox="0 0 20 20" fill="currentColor">
                <path fillRule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clipRule="evenodd" />
              </svg>
              <span>{error}</span>
            </div>
          )}
          
          <DataTable
            columns={columns}
            data={filteredAlunos}
            onEdit={handleEdit}
            onDelete={handleDelete}
            loading={loading}
            error={null} // Error is already shown above
          />
        </div>
      </div>

      {/* Modal Form */}
      <FormModal 
        isOpen={isModalOpen} 
        onClose={() => setIsModalOpen(false)} 
        title={currentAluno ? "Editar Aluno" : "Novo Aluno"}
        onSubmit={handleSubmit}
        isSubmitting={isSubmitting}
      >
        <div className="grid grid-cols-1 gap-4 mb-4">
          <div>
            <label htmlFor="nome" className="block text-sm font-medium text-gray-700">Nome</label>
            <input
              type="text"
              name="nome"
              id="nome"
              required
              value={formData.nome}
              onChange={handleInputChange}
              className="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500"
            />
          </div>
          
          <div>
            <label htmlFor="responsavel" className="block text-sm font-medium text-gray-700">Responsável</label>
            <input
              type="text"
              name="responsavel"
              id="responsavel"
              required
              value={formData.responsavel}
              onChange={handleInputChange}
              className="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500"
            />
          </div>
          
          <div>
            <label htmlFor="telefone_responsavel" className="block text-sm font-medium text-gray-700">Telefone do Responsável</label>
            <MaskedInput
              mask={MASKS.PHONE}
              name="telefone_responsavel"
              id="telefone_responsavel"
              required
              value={formData.telefone_responsavel}
              onChange={handleInputChange}
              className="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500"
            />
          </div>
          
          <div>
            <label htmlFor="data_nascimento" className="block text-sm font-medium text-gray-700">Data de Nascimento</label>
            <input
              type="date"
              name="data_nascimento"
              id="data_nascimento"
              required
              value={formData.data_nascimento}
              onChange={handleInputChange}
              className="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500"
            />
          </div>
          
          <div>
            <label htmlFor="endereco" className="block text-sm font-medium text-gray-700">Endereço</label>
            <input
              type="text"
              name="endereco"
              id="endereco"
              required
              value={formData.endereco}
              onChange={handleInputChange}
              className="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500"
            />
          </div>
          
          <div>
            <label htmlFor="ponto_referencia" className="block text-sm font-medium text-gray-700">Ponto de Referência</label>
            <input
              type="text"
              name="ponto_referencia"
              id="ponto_referencia"
              value={formData.ponto_referencia}
              onChange={handleInputChange}
              className="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500"
            />
          </div>
          
          <div>
            <label htmlFor="descricao" className="block text-sm font-medium text-gray-700">Descrição</label>
            <textarea
              name="descricao"
              id="descricao"
              rows="3"
              value={formData.descricao}
              onChange={handleInputChange}
              className="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500"
            ></textarea>
          </div>
          
          <div className="flex items-center">
            <input
              type="checkbox"
              name="status"
              id="status"
              checked={formData.status}
              onChange={handleInputChange}
              className="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"
            />
            <label htmlFor="status" className="ml-2 block text-sm text-gray-900">Ativo</label>
          </div>
        </div>
      </FormModal>
      
      {/* Delete Confirmation Modal - moved outside of FormModal */}
      <DeleteConfirmationModal
        isOpen={isDeleteModalOpen}
        onClose={() => setIsDeleteModalOpen(false)}
        onConfirm={handleConfirmDelete}
        title="Confirmar Exclusão"
        message={`Tem certeza que deseja excluir o aluno ${currentAluno?.nome}?`}
        isSubmitting={isSubmitting}
      />

      {/* Quick Statistics */}
      <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
        <div className="bg-white rounded-xl shadow-sm border border-gray-200 p-4 flex items-center">
          <div className="bg-blue-100 text-blue-600 p-3 rounded-lg mr-4">
            <svg xmlns="http://www.w3.org/2000/svg" className="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0z" />
            </svg>
          </div>
          <div>
            <div className="text-sm text-gray-500">Total de Alunos</div>
            <div className="text-xl font-bold">{alunos.length}</div>
          </div>
        </div>

        <div className="bg-white rounded-xl shadow-sm border border-gray-200 p-4 flex items-center">
          <div className="bg-green-100 text-green-600 p-3 rounded-lg mr-4">
            <svg xmlns="http://www.w3.org/2000/svg" className="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
            </svg>
          </div>
          <div>
            <div className="text-sm text-gray-500">Alunos Ativos</div>
            <div className="text-xl font-bold">
              {alunos.filter(aluno => aluno.status === 'active').length}
            </div>
          </div>
        </div>

        <div className="bg-white rounded-xl shadow-sm border border-gray-200 p-4 flex items-center">
          <div className="bg-yellow-100 text-yellow-600 p-3 rounded-lg mr-4">
            <svg xmlns="http://www.w3.org/2000/svg" className="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" />
            </svg>
          </div>
          <div>
            <div className="text-sm text-gray-500">Alunos Inativos</div>
            <div className="text-xl font-bold">
              {alunos.filter(aluno => aluno.status === 'inactive').length}
            </div>
          </div>
        </div>
      </div>
    </div>
  );
}
=== /Users/micaelsantana/Documents/app-frontend/src/pages/Rotas.jsx ===

import React, { useState, useEffect } from 'react';
import { RotaService } from '../api/services';
import DataTable from '../components/common/DataTable';
import StatusBadge from '../components/common/StatusBadge';
import FormModal from '../components/common/FormModal';
import DeleteConfirmationModal from '../components/common/DeleteConfirmationModal';
import { useNotification } from '../contexts/NotificationContext';
import {
  parseNumeroDecimal,
  formatarNumeroDecimal,
  formatarDistanciaKm,
  formatarTempoMinutos,
  isQuilometragemValida
} from '../utils';

const Rotas = () => {
  const [rotas, setRotas] = useState([]);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState(null);
  const [isModalOpen, setIsModalOpen] = useState(false);
  const [isDeleteModalOpen, setIsDeleteModalOpen] = useState(false);
  const [currentRota, setCurrentRota] = useState(null);
  const [isSubmitting, setIsSubmitting] = useState(false);
  const [searchTerm, setSearchTerm] = useState('');
  const { showSuccess, showError } = useNotification ? useNotification() : {
    showSuccess: () => { },
    showError: () => { }
  };

  // Form state
  const [formData, setFormData] = useState({
    nome: '',
    descricao: '',
    tipo: 'Escolar',
    origem: '',
    destino: '',
    horario_inicio: '',
    horario_fim: '',
    distancia_km: '',
    tempo_estimado_minutos: '',
    status: true
  });

  // Input errors
  const [inputErrors, setInputErrors] = useState({
    distancia_km: '',
    tempo_estimado_minutos: ''
  });

  useEffect(() => {
    fetchRotas();
  }, []);

  const fetchRotas = async () => {
    try {
      setLoading(true);
      const response = await RotaService.getRotas();

      if (response?.data?.data && Array.isArray(response.data.data)) {
        // Process data - ensure status is standardized
        const formattedData = response.data.data.map(rota => ({
          ...rota,
          status: convertStatus(rota.status)
        }));
        setRotas(formattedData);
      } else if (Array.isArray(response?.data)) {
        // Alternative API response format
        const formattedData = response.data.map(rota => ({
          ...rota,
          status: convertStatus(rota.status)
        }));
        setRotas(formattedData);
      } else {
        console.error('API returned unexpected data format');
        setError('Formato de dados inesperado. Contate o suporte.');
      }
    } catch (err) {
      console.error('Error fetching data:', err);
      setError('Erro ao carregar rotas: ' + (err.response?.data?.message || err.message));
    } finally {
      setLoading(false);
    }
  };

  // Convert various status formats to a standardized format
  const convertStatus = (status) => {
    if (typeof status === 'boolean') {
      return status ? 'active' : 'inactive';
    } else if (typeof status === 'number') {
      return status === 1 ? 'active' : 'inactive';
    } else if (typeof status === 'string') {
      const statusLower = status.toLowerCase();
      if (statusLower === 'true' || statusLower === 'ativo' || statusLower === '1' || statusLower === 'active' || statusLower === 'ativa') {
        return 'active';
      } else if (statusLower === 'false' || statusLower === 'inativo' || statusLower === '0' || statusLower === 'inactive' || statusLower === 'inativa') {
        return 'inactive';
      }
      return status; // Keep original if no match
    }
    return 'inactive'; // Default value
  };

  // Validar quilometragem
  const validarDistanciaKm = (value) => {
    if (!value) return '';

    const numero = parseNumeroDecimal(value);

    if (numero === null) {
      return 'Digite um valor válido (use vírgula como separador decimal)';
    }

    if (numero < 0) {
      return 'A distância não pode ser negativa';
    }

    if (numero > 10000) {
      return 'A distância parece excessiva (máximo 10.000 km)';
    }

    return '';
  };

  // Validar tempo em minutos
  const validarTempoMinutos = (value) => {
    if (!value) return '';

    const numero = parseInt(value, 10);

    if (isNaN(numero)) {
      return 'Digite um valor numérico válido';
    }

    if (numero < 0) {
      return 'O tempo não pode ser negativo';
    }

    if (numero > 1440) {
      return 'O tempo excede 24 horas (máximo 1440 minutos)';
    }

    return '';
  };

  const handleInputChange = (e) => {
    const { name, value, type, checked } = e.target;

    if (name === 'distancia_km') {
      // Permite digitar no formato brasileiro (com vírgula)
      setFormData({
        ...formData,
        [name]: value
      });

      // Valida o campo
      setInputErrors({
        ...inputErrors,
        [name]: validarDistanciaKm(value)
      });
      return;
    }

    if (name === 'tempo_estimado_minutos') {
      setFormData({
        ...formData,
        [name]: value
      });

      // Valida o campo
      setInputErrors({
        ...inputErrors,
        [name]: validarTempoMinutos(value)
      });
      return;
    }

    setFormData({
      ...formData,
      [name]: type === 'checkbox' ? checked : value
    });
  };

  // Formatar a quilometragem para exibição no formulário
  const formatKilometroForDisplay = (value) => {
    if (!value) return '';
    return formatarNumeroDecimal(value, 1);
  };

  const openModal = (rota = null) => {
    // Resetar erros ao abrir o modal
    setInputErrors({
      distancia_km: '',
      tempo_estimado_minutos: ''
    });

    if (rota) {
      // Edit mode
      setFormData({
        nome: rota.nome || '',
        descricao: rota.descricao || '',
        tipo: rota.tipo || 'Escolar',
        origem: rota.origem || '',
        destino: rota.destino || '',
        horario_inicio: rota.horario_inicio || '',
        horario_fim: rota.horario_fim || '',
        distancia_km: rota.distancia_km ? formatKilometroForDisplay(rota.distancia_km) : '',
        tempo_estimado_minutos: rota.tempo_estimado_minutos || '',
        status: rota.status === 'active' || rota.status === true || rota.status === 1
      });
      setCurrentRota(rota);
    } else {
      // Create mode
      setFormData({
        nome: '',
        descricao: '',
        tipo: 'Escolar',
        origem: '',
        destino: '',
        horario_inicio: '',
        horario_fim: '',
        distancia_km: '',
        tempo_estimado_minutos: '',
        status: true
      });
      setCurrentRota(null);
    }
    setIsModalOpen(true);
  };

  // Updated handleSubmit function to accept form values
  // Add this to your Rotas.jsx file to properly handle the status value

  // Updated handleSubmit function with better status handling
  const handleSubmit = async (e, formValues) => {
    e.preventDefault();

    // Use formValues if provided, otherwise fall back to formData state
    const dataToUse = formValues || formData;

    console.log('Using data for submission:', dataToUse);

    // Validar campos antes de submeter
    const distanciaError = validarDistanciaKm(dataToUse.distancia_km);
    const tempoError = validarTempoMinutos(dataToUse.tempo_estimado_minutos);

    if (distanciaError || tempoError) {
      setInputErrors({
        distancia_km: distanciaError,
        tempo_estimado_minutos: tempoError
      });
      return; // Não continua se houver erros
    }

    setIsSubmitting(true);

    try {
      // Prepare data for API - converting to expected format
      const apiData = {
        ...dataToUse,
        distancia_km: parseNumeroDecimal(dataToUse.distancia_km),
        tempo_estimado_minutos: dataToUse.tempo_estimado_minutos ? parseInt(dataToUse.tempo_estimado_minutos, 10) : null,
        // Handle checkbox status value correctly
        status: dataToUse.status === 'on' ? true : !!dataToUse.status
      };

      console.log('Sending to API:', apiData);

      if (currentRota) {
        // Update
        await RotaService.updateRota(currentRota.id, apiData);
        showSuccess('Rota atualizada com sucesso!');
      } else {
        // Create
        await RotaService.createRota(apiData);
        showSuccess('Rota criada com sucesso!');
      }
      setIsModalOpen(false);
      fetchRotas();
    } catch (err) {
      console.error('Error saving rota:', err);
      const errorMsg = err.response?.data?.message || err.message;
      setError('Erro ao salvar rota: ' + errorMsg);
      showError('Erro ao salvar rota: ' + errorMsg);
    } finally {
      setIsSubmitting(false);
    }
  };
  // Search and filter function
  const filteredRotas = rotas.filter(rota =>
    rota.nome?.toLowerCase().includes(searchTerm.toLowerCase()) ||
    rota.tipo?.toLowerCase().includes(searchTerm.toLowerCase()) ||
    rota.origem?.toLowerCase().includes(searchTerm.toLowerCase()) ||
    rota.destino?.toLowerCase().includes(searchTerm.toLowerCase())
  );

  const columns = [
    { key: 'nome', header: 'Nome' },
    { key: 'tipo', header: 'Tipo' },
    {
      key: 'origem_destino',
      header: 'Origem / Destino',
      format: (item) => `${item.origem || '-'} → ${item.destino || '-'}`
    },
    {
      key: 'distancia',
      header: 'Distância',
      format: (item) => formatarDistanciaKm(item.distancia_km)
    },
    {
      key: 'tempo',
      header: 'Tempo Estimado',
      format: (item) => formatarTempoMinutos(item.tempo_estimado_minutos)
    },
    {
      key: 'status',
      header: 'Status',
      format: (item) => <StatusBadge status={item.status} type="rota" />
    }
  ];

  const handleEdit = (rota) => {
    openModal(rota);
  };

  const handleDelete = (rota) => {
    setCurrentRota(rota);
    setIsDeleteModalOpen(true);
  };

  const handleConfirmDelete = async () => {
    try {
      await RotaService.deleteRota(currentRota.id);
      showSuccess('Rota excluída com sucesso!');
      setIsDeleteModalOpen(false);
      setCurrentRota(null);
      fetchRotas();
    } catch (err) {
      const errorMsg = err.response?.data?.message || err.message;
      setError('Erro ao excluir rota: ' + errorMsg);
      showError('Erro ao excluir rota: ' + errorMsg);
    }
  };

  return (
    <div className="space-y-6">
      <div className="flex justify-between items-center mb-6">
        <h1 className="text-2xl font-bold">Gerenciamento de Rotas</h1>
        <button
          className="bg-blue-500 hover:bg-blue-600 text-white py-2 px-4 rounded flex items-center"
          onClick={() => openModal()}
        >
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth={1.5} stroke="currentColor" className="w-5 h-5 mr-2">
            <path strokeLinecap="round" strokeLinejoin="round" d="M12 4.5v15m7.5-7.5h-15" />
          </svg>
          Nova Rota
        </button>
      </div>

      <div className="bg-white rounded-lg shadow mb-6">
        <div className="border-b px-6 py-4 flex justify-between items-center">
          <h2 className="font-bold text-lg">Rotas Cadastradas</h2>

          {/* Search box */}
          <div className="relative w-full sm:w-64">
            <div className="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
              <svg className="h-5 w-5 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
              </svg>
            </div>
            <input
              type="text"
              placeholder="Buscar rotas..."
              className="block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg bg-gray-50 focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-sm"
              value={searchTerm}
              onChange={(e) => setSearchTerm(e.target.value)}
            />
          </div>
        </div>

        <div className="p-4">
          {error && (
            <div className="p-4 mb-4 text-red-600 bg-red-50 rounded-md flex items-start">
              <svg xmlns="http://www.w3.org/2000/svg" className="h-5 w-5 mr-2 mt-0.5 flex-shrink-0" viewBox="0 0 20 20" fill="currentColor">
                <path fillRule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clipRule="evenodd" />
              </svg>
              <span>{error}</span>
            </div>
          )}

          <DataTable
            columns={columns}
            data={filteredRotas}
            onEdit={handleEdit}
            onDelete={handleDelete}
            loading={loading}
            error={null} // Error is already shown above
          />
        </div>
      </div>

      {/* Modal Form */}
      <FormModal
        isOpen={isModalOpen}
        onClose={() => setIsModalOpen(false)}
        title={currentRota ? "Editar Rota" : "Nova Rota"}
        onSubmit={handleSubmit}
        isSubmitting={isSubmitting}
        formData={formData} // Pass formData to FormModal
      >
        <div className="grid grid-cols-1 gap-4 mb-4">
          <div>
            <label htmlFor="nome" className="block text-sm font-medium text-gray-700">Nome da Rota</label>
            <input
              type="text"
              name="nome"
              id="nome"
              required
              value={formData.nome}
              onChange={handleInputChange}
              className="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500"
            />
          </div>

          <div>
            <label htmlFor="descricao" className="block text-sm font-medium text-gray-700">Descrição</label>
            <textarea
              name="descricao"
              id="descricao"
              rows="2"
              value={formData.descricao}
              onChange={handleInputChange}
              className="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500"
            ></textarea>
          </div>

          <div>
            <label htmlFor="tipo" className="block text-sm font-medium text-gray-700">Tipo de Rota</label>
            <select
              name="tipo"
              id="tipo"
              required
              value={formData.tipo}
              onChange={handleInputChange}
              className="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500"
            >
              <option value="Escolar">Escolar</option>
              <option value="Regular">Regular</option>
              <option value="Especial">Especial</option>
            </select>
          </div>

          <div className="grid grid-cols-1 sm:grid-cols-2 gap-4">
            <div>
              <label htmlFor="origem" className="block text-sm font-medium text-gray-700">Origem</label>
              <input
                type="text"
                name="origem"
                id="origem"
                value={formData.origem}
                onChange={handleInputChange}
                className="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500"
              />
            </div>

            <div>
              <label htmlFor="destino" className="block text-sm font-medium text-gray-700">Destino</label>
              <input
                type="text"
                name="destino"
                id="destino"
                value={formData.destino}
                onChange={handleInputChange}
                className="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500"
              />
            </div>
          </div>

          <div className="grid grid-cols-1 sm:grid-cols-2 gap-4">
            <div>
              <label htmlFor="horario_inicio" className="block text-sm font-medium text-gray-700">Horário de Início</label>
              <input
                type="time"
                name="horario_inicio"
                id="horario_inicio"
                value={formData.horario_inicio}
                onChange={handleInputChange}
                className="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500"
              />
            </div>

            <div>
              <label htmlFor="horario_fim" className="block text-sm font-medium text-gray-700">Horário de Fim</label>
              <input
                type="time"
                name="horario_fim"
                id="horario_fim"
                value={formData.horario_fim}
                onChange={handleInputChange}
                className="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500"
              />
            </div>
          </div>

          <div className="grid grid-cols-1 sm:grid-cols-2 gap-4">
            <div>
              <label htmlFor="distancia_km" className="block text-sm font-medium text-gray-700">Distância (km)</label>
              <div className="mt-1 relative">
                <input
                  type="text"
                  name="distancia_km"
                  id="distancia_km"
                  placeholder="Ex: 12,5"
                  value={formData.distancia_km}
                  onChange={handleInputChange}
                  className={`block w-full border ${inputErrors.distancia_km ? 'border-red-300' : 'border-gray-300'} rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500`}
                />
                {inputErrors.distancia_km && (
                  <p className="mt-1 text-sm text-red-600">{inputErrors.distancia_km}</p>
                )}
                <p className="mt-1 text-xs text-gray-500">Use vírgula como separador decimal (ex: 12,5)</p>
              </div>
            </div>

            <div>
              <label htmlFor="tempo_estimado_minutos" className="block text-sm font-medium text-gray-700">Tempo Estimado (minutos)</label>
              <div className="mt-1 relative">
                <input
                  type="number"
                  name="tempo_estimado_minutos"
                  id="tempo_estimado_minutos"
                  min="0"
                  placeholder="Ex: 45"
                  value={formData.tempo_estimado_minutos}
                  onChange={handleInputChange}
                  className={`block w-full border ${inputErrors.tempo_estimado_minutos ? 'border-red-300' : 'border-gray-300'} rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500`}
                />
                {inputErrors.tempo_estimado_minutos && (
                  <p className="mt-1 text-sm text-red-600">{inputErrors.tempo_estimado_minutos}</p>
                )}
                <p className="mt-1 text-xs text-gray-500">
                  {formData.tempo_estimado_minutos ?
                    `Equivale a ${formatarTempoMinutos(formData.tempo_estimado_minutos)}` :
                    'Digite o tempo total em minutos'}
                </p>
              </div>
            </div>
          </div>

          <div className="flex items-center">
            <input
              type="checkbox"
              name="status"
              id="status"
              checked={formData.status}
              onChange={handleInputChange}
              className="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"
            />
            <label htmlFor="status" className="ml-2 block text-sm text-gray-900">Ativa</label>
          </div>
        </div>
      </FormModal>

      {/* Delete Confirmation Modal - moved outside of FormModal */}
      <DeleteConfirmationModal
        isOpen={isDeleteModalOpen}
        onClose={() => setIsDeleteModalOpen(false)}
        onConfirm={handleConfirmDelete}
        title="Confirmar Exclusão"
        message={`Tem certeza que deseja excluir a rota ${currentRota?.nome}?`}
        isSubmitting={isSubmitting}
      />

      {/* Stats Cards */}
      <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
        <div className="bg-white rounded-xl shadow-sm border border-gray-200 p-4 flex items-center">
          <div className="bg-blue-100 text-blue-600 p-3 rounded-lg mr-4">
            <svg xmlns="http://www.w3.org/2000/svg" className="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7" />
            </svg>
          </div>
          <div>
            <div className="text-sm text-gray-500">Total de Rotas</div>
            <div className="text-xl font-bold">{rotas.length}</div>
          </div>
        </div>

        <div className="bg-white rounded-xl shadow-sm border border-gray-200 p-4 flex items-center">
          <div className="bg-green-100 text-green-600 p-3 rounded-lg mr-4">
            <svg xmlns="http://www.w3.org/2000/svg" className="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
            </svg>
          </div>
          <div>
            <div className="text-sm text-gray-500">Rotas Ativas</div>
            <div className="text-xl font-bold">
              {rotas.filter(rota => rota.status === 'active').length}
            </div>
          </div>
        </div>

        <div className="bg-white rounded-xl shadow-sm border border-gray-200 p-4 flex items-center">
          <div className="bg-yellow-100 text-yellow-600 p-3 rounded-lg mr-4">
            <svg xmlns="http://www.w3.org/2000/svg" className="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" />
            </svg>
          </div>
          <div>
            <div className="text-sm text-gray-500">Rotas Inativas</div>
            <div className="text-xl font-bold">
              {rotas.filter(rota => rota.status === 'inactive').length}
            </div>
          </div>
        </div>
      </div>
    </div>
  );
};

export default Rotas;
=== /Users/micaelsantana/Documents/app-frontend/src/pages/Dashboard.jsx ===

import React, { useEffect, useState } from 'react';
import { Link } from 'react-router-dom';
import { OnibusService, AlunoService, RotaService, ViagemService } from '../api/services';
import { useNotification } from '../contexts/NotificationContext';
import StatusBadge from '../components/common/StatusBadge';
import { processStatus } from '../utils/statusProcessor';

export default function Dashboard() {
  const { showError } = useNotification();
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState(null);
  const [stats, setStats] = useState({
    onibusAtivos: 0,
    totalAlunos: 0,
    rotasAtivas: 0,
    viagensHoje: 0
  });
  const [viagensData, setViagensData] = useState([]);
  const [rotasData, setRotasData] = useState([]);

  useEffect(() => {
    fetchDashboardData();
  }, []);

  const fetchDashboardData = async () => {
    try {
      setLoading(true);
      setError(null);

      // Fetch all data in parallel
      const [onibusResponse, alunosResponse, rotasResponse, viagensResponse] = await Promise.all([
        OnibusService.getOnibus(),
        AlunoService.getAlunos(),
        RotaService.getRotas(),
        ViagemService.getViagens()
      ]);

      // Process onibus data
      const onibusData = onibusResponse.data?.data || [];
      const onibusAtivos = onibusData.filter(onibus => 
        processStatus(onibus.status) === 'active'
      ).length;

      // Process alunos data
      const alunosData = alunosResponse.data?.data || [];
      const totalAlunos = alunosData.length;

      // Process rotas data
      const rotasData = rotasResponse.data?.data || [];
      const rotasAtivas = rotasData.filter(rota => 
        processStatus(rota.status) === 'active'
      ).length;
      
      // Process viagens data
      const viagensData = viagensResponse.data?.data || [];
      const today = new Date().toISOString().split('T')[0];
      const viagensHoje = viagensData.filter(viagem => 
        viagem.data_viagem === today
      ).length;

      // Format and enhance data for display
      const formattedRotasData = rotasData.slice(0, 5).map(rota => ({
        ...rota,
        status: processStatus(rota.status)
      }));

      const formattedViagensData = viagensData.slice(0, 5).map(viagem => {
        const date = new Date(viagem.data_viagem);
        const data_formatada = date.toLocaleDateString('pt-BR', {
          day: '2-digit',
          month: '2-digit',
          year: 'numeric'
        });
        
        // Find the corresponding route name
        const rota = rotasData.find(r => r.id === viagem.rota_id);
        
        return {
          ...viagem,
          data_formatada,
          rota: rota ? rota.nome : 'Rota não encontrada',
          status: processStatus(viagem.status, 'viagem')
        };
      });

      // Update stats
      setStats({
        onibusAtivos,
        totalAlunos,
        rotasAtivas,
        viagensHoje
      });

      // Update tables data with formatted data
      setRotasData(formattedRotasData);
      setViagensData(formattedViagensData);
      
    } catch (err) {
      console.error('Error fetching dashboard data:', err);
      const errorMessage = 'Erro ao carregar dados do dashboard: ' + (err.response?.data?.message || err.message);
      setError(errorMessage);
      showError(errorMessage);
    } finally {
      setLoading(false);
    }
  };

  if (loading) {
    return (
      <div className="flex items-center justify-center min-h-screen">
        <div className="animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"></div>
      </div>
    );
  }

  if (error) {
    return (
      <div className="p-4 bg-red-50 border border-red-200 rounded-lg shadow-sm">
        <div className="flex items-center">
          <svg xmlns="http://www.w3.org/2000/svg" className="h-5 w-5 text-red-500 mr-2" viewBox="0 0 20 20" fill="currentColor">
            <path fillRule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clipRule="evenodd" />
          </svg>
          <p className="text-red-700">{error}</p>
        </div>
        <button 
          onClick={fetchDashboardData}
          className="mt-4 px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2"
        >
          Tentar novamente
        </button>
      </div>
    );
  }

  return (
    <div>
      <div className="mb-6">
        <h1 className="text-2xl font-bold mb-2">Dashboard</h1>
        <p className="text-gray-600">Bem-vindo ao sistema de gerenciamento de transporte escolar Coracao. Acompanhe as principais informações do sistema.</p>
      </div>
      
      <div className="grid grid-cols-2 md:grid-cols-4 gap-4 mb-6">
        {/* Ônibus Ativos */}
        <div className="bg-white p-6 rounded-lg shadow-sm border border-gray-100 transition-all hover:shadow-md">
          <div className="flex justify-between items-start">
            <div>
              <div className="text-3xl font-bold text-gray-900">{stats.onibusAtivos}</div>
              <div className="text-gray-500 mt-1">Ônibus em Operação</div>
            </div>
            <div className="bg-blue-100 text-blue-600 p-3 rounded-lg">
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth={1.5} stroke="currentColor" className="w-6 h-6">
                <path strokeLinecap="round" strokeLinejoin="round" d="M8.25 18.75a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m3 0h6m-9 0H3.375a1.125 1.125 0 0 1-1.125-1.125V14.25m17.25 4.5a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m3 0h1.125c.621 0 1.129-.504 1.09-1.124a17.902 17.902 0 0 0-3.213-9.193 2.056 2.056 0 0 0-1.58-.86H14.25M16.5 18.75h-2.25m0-11.177v-.958c0-.568-.422-1.048-.987-1.106a48.554 48.554 0 0 0-10.026 0 1.106 1.106 0 0 0-.987 1.106v7.635m12-6.677v6.677m0 4.5v-4.5m0 0h-12" />
              </svg>
            </div>
          </div>
          <div className="mt-4 pt-4 border-t border-gray-100">
            <Link to="/onibus" className="text-blue-600 hover:text-blue-800 text-sm flex items-center">
              Ver todos os ônibus
              <svg xmlns="http://www.w3.org/2000/svg" className="h-4 w-4 ml-1" viewBox="0 0 20 20" fill="currentColor">
                <path fillRule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clipRule="evenodd" />
              </svg>
            </Link>
          </div>
        </div>
        
        {/* Alunos Cadastrados */}
        <div className="bg-white rounded-lg shadow-sm p-6 border border-gray-100 transition-all hover:shadow-md">
          <div className="flex justify-between items-start">
            <div>
              <div className="text-3xl font-bold text-gray-900">{stats.totalAlunos}</div>
              <div className="text-gray-500 mt-1">Alunos Cadastrados</div>
            </div>
            <div className="bg-green-100 text-green-600 p-3 rounded-lg">
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth={1.5} stroke="currentColor" className="w-6 h-6">
                <path strokeLinecap="round" strokeLinejoin="round" d="M18 18.72a9.094 9.094 0 0 0 3.741-.479 3 3 0 0 0-4.682-2.72m.94 3.198.001.031c0 .225-.012.447-.037.666A11.944 11.944 0 0 1 12 21c-2.17 0-4.207-.576-5.963-1.584A6.062 6.062 0 0 1 6 18.719m12 0a5.971 5.971 0 0 0-.941-3.197m0 0A5.995 5.995 0 0 0 12 12.75a5.995 5.995 0 0 0-5.058 2.772m0 0a3 3 0 0 0-4.681 2.72 8.986 8.986 0 0 0 3.74.477m.94-3.197a5.971 5.971 0 0 0-.94 3.197M15 6.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm6 3a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Zm-13.5 0a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Z" />
              </svg>
            </div>
          </div>
          <div className="mt-4 pt-4 border-t border-gray-100">
            <Link to="/alunos" className="text-blue-600 hover:text-blue-800 text-sm flex items-center">
              Ver todos os alunos
              <svg xmlns="http://www.w3.org/2000/svg" className="h-4 w-4 ml-1" viewBox="0 0 20 20" fill="currentColor">
                <path fillRule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clipRule="evenodd" />
              </svg>
            </Link>
          </div>
        </div>
        
        {/* Rotas Ativas */}
        <div className="bg-white rounded-lg shadow-sm p-6 border border-gray-100 transition-all hover:shadow-md">
          <div className="flex justify-between items-start">
            <div>
              <div className="text-3xl font-bold text-gray-900">{stats.rotasAtivas}</div>
              <div className="text-gray-500 mt-1">Rotas Ativas</div>
            </div>
            <div className="bg-purple-100 text-purple-600 p-3 rounded-lg">
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth={1.5} stroke="currentColor" className="w-6 h-6">
                <path strokeLinecap="round" strokeLinejoin="round" d="M9 6.75V15m6-6v8.25m.503 3.498l4.875-2.437c.381-.19.622-.58.622-1.006V4.82c0-.836-.88-1.38-1.628-1.006l-3.869 1.934c-.317.159-.69.159-1.006 0L9.503 3.252a1.125 1.125 0 00-1.006 0L3.622 5.689C3.24 5.88 3 6.27 3 6.695V19.18c0 .836.88 1.38 1.628 1.006l3.869-1.934c.317-.159.69-.159 1.006 0l4.994 2.497c.317.158.69.158 1.006 0z" />
              </svg>
            </div>
          </div>
          <div className="mt-4 pt-4 border-t border-gray-100">
            <Link to="/rotas" className="text-blue-600 hover:text-blue-800 text-sm flex items-center">
              Ver todas as rotas
              <svg xmlns="http://www.w3.org/2000/svg" className="h-4 w-4 ml-1" viewBox="0 0 20 20" fill="currentColor">
                <path fillRule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clipRule="evenodd" />
              </svg>
            </Link>
          </div>
        </div>
        
        {/* Viagens Programadas */}
        <div className="bg-white rounded-lg shadow-sm p-6 border border-gray-100 transition-all hover:shadow-md">
          <div className="flex justify-between items-start">
            <div>
              <div className="text-3xl font-bold text-gray-900">{stats.viagensHoje}</div>
              <div className="text-gray-500 mt-1">Viagens Hoje</div>
            </div>
            <div className="bg-yellow-100 text-yellow-600 p-3 rounded-lg">
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth={1.5} stroke="currentColor" className="w-6 h-6">
                <path strokeLinecap="round" strokeLinejoin="round" d="M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 012.25-2.25h13.5A2.25 2.25 0 0121 7.5v11.25m-18 0A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75m-18 0v-7.5A2.25 2.25 0 015.25 9h13.5A2.25 2.25 0 0121 11.25v7.5m-9-6h.008v.008H12v-.008zM12 15h.008v.008H12V15zm0 2.25h.008v.008H12v-.008zM9.75 15h.008v.008H9.75V15zm0 2.25h.008v.008H9.75v-.008zM7.5 15h.008v.008H7.5V15zm0 2.25h.008v.008H7.5v-.008zm6.75-4.5h.008v.008h-.008v-.008zm0 2.25h.008v.008h-.008V15zm0 2.25h.008v.008h-.008v-.008zm2.25-4.5h.008v.008H16.5v-.008zm0 2.25h.008v.008H16.5V15z" />
              </svg>
            </div>
          </div>
          <div className="mt-4 pt-4 border-t border-gray-100">
            <Link to="/viagens" className="text-blue-600 hover:text-blue-800 text-sm flex items-center">
              Ver todas as viagens
              <svg xmlns="http://www.w3.org/2000/svg" className="h-4 w-4 ml-1" viewBox="0 0 20 20" fill="currentColor">
                <path fillRule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clipRule="evenodd" />
              </svg>
            </Link>
          </div>
        </div>
      </div>
      
      <div className="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6">
        {/* Próximas Viagens */}
        <div className="bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden">
          <div className="border-b px-6 py-4 flex justify-between items-center">
            <h2 className="font-bold text-lg">Próximas Viagens</h2>
            <Link to="/viagens" className="text-blue-600 hover:text-blue-800 text-sm flex items-center">
              Ver todas
              <svg xmlns="http://www.w3.org/2000/svg" className="h-4 w-4 ml-1" viewBox="0 0 20 20" fill="currentColor">
                <path fillRule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clipRule="evenodd" />
              </svg>
            </Link>
          </div>
          
          {viagensData.length > 0 ? (
            <div className="overflow-x-auto">
              <table className="w-full">
                <thead>
                  <tr className="text-left bg-gray-50">
                    <th className="py-3 px-4 text-xs font-medium text-gray-500 uppercase tracking-wider">Data</th>
                    <th className="py-3 px-4 text-xs font-medium text-gray-500 uppercase tracking-wider">Rota</th>
                    <th className="py-3 px-4 text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th>
                  </tr>
                </thead>
                <tbody className="divide-y divide-gray-200">
                  {viagensData.map((viagem, index) => (
                    <tr key={index} className="hover:bg-gray-50">
                      <td className="py-3 px-4 whitespace-nowrap">{viagem.data_formatada}</td>
                      <td className="py-3 px-4">{viagem.rota}</td>
                      <td className="py-3 px-4">
                        <StatusBadge status={viagem.status} type="viagem" />
                      </td>
                    </tr>
                  ))}
                </tbody>
              </table>
            </div>
          ) : (
            <div className="flex flex-col items-center justify-center py-8">
              <svg xmlns="http://www.w3.org/2000/svg" className="h-12 w-12 text-gray-300 mb-3" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={1} d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
              </svg>
              <p className="text-gray-500">Nenhuma viagem programada</p>
              <Link to="/viagens/novo" className="mt-3 text-blue-600 hover:text-blue-800 text-sm">
                Programar uma viagem
              </Link>
            </div>
          )}
          
          {/* Mobile view for Próximas Viagens */}
          <div className="md:hidden px-4 pb-4 pt-2">
            <div className="text-sm text-gray-500 mb-2 font-medium">Visualização mobile</div>
            {viagensData.length > 0 ? viagensData.map((viagem, index) => (
              <div key={index} className="mb-3 bg-gray-50 p-3 rounded-lg">
                <div className="font-medium mb-1">{viagem.rota}</div>
                <div className="flex justify-between text-sm">
                  <span className="text-gray-500">Data:</span>
                  <span>{viagem.data_formatada}</span>
                </div>
                <div className="flex justify-between text-sm mt-1">
                  <span className="text-gray-500">Status:</span>
                  <StatusBadge status={viagem.status} type="viagem" size="sm" />
                </div>
              </div>
            )) : (
              <div className="text-center py-4 text-gray-500">
                Nenhuma viagem encontrada
              </div>
            )}
          </div>
        </div>
        
        {/* Rotas Ativas */}
        <div className="bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden">
          <div className="border-b px-6 py-4 flex justify-between items-center">
            <h2 className="font-bold text-lg">Rotas Ativas</h2>
            <Link to="/rotas" className="text-blue-600 hover:text-blue-800 text-sm flex items-center">
              Ver todas
              <svg xmlns="http://www.w3.org/2000/svg" className="h-4 w-4 ml-1" viewBox="0 0 20 20" fill="currentColor">
                <path fillRule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clipRule="evenodd" />
              </svg>
            </Link>
          </div>
          
          {rotasData.length > 0 ? (
            <div className="overflow-x-auto">
              <table className="w-full">
                <thead>
                  <tr className="text-left bg-gray-50">
                    <th className="py-3 px-4 text-xs font-medium text-gray-500 uppercase tracking-wider">Nome</th>
                    <th className="py-3 px-4 text-xs font-medium text-gray-500 uppercase tracking-wider">Tipo</th>
                    <th className="py-3 px-4 text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th>
                  </tr>
                </thead>
                <tbody className="divide-y divide-gray-200">
                  {rotasData.map((rota, index) => (
                    <tr key={index} className="hover:bg-gray-50">
                      <td className="py-3 px-4">{rota.nome}</td>
                      <td className="py-3 px-4">{rota.tipo}</td>
                      <td className="py-3 px-4">
                        <StatusBadge status={rota.status} type="rota" />
                      </td>
                    </tr>
                  ))}
                </tbody>
              </table>
            </div>
          ) : (
            <div className="flex flex-col items-center justify-center py-8">
              <svg xmlns="http://www.w3.org/2000/svg" className="h-12 w-12 text-gray-300 mb-3" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={1} d="M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7" />
              </svg>
              <p className="text-gray-500">Nenhuma rota cadastrada</p>
              <Link to="/rotas/nova" className="mt-3 text-blue-600 hover:text-blue-800 text-sm">
                Criar uma rota
              </Link>
            </div>
          )}
          
          {/* Mobile view for Rotas Ativas */}
          <div className="md:hidden px-4 pb-4 pt-2">
            <div className="text-sm text-gray-500 mb-2 font-medium">Visualização mobile</div>
            {rotasData.length > 0 ? rotasData.map((rota, index) => (
              <div key={index} className="mb-3 bg-gray-50 p-3 rounded-lg">
                <div className="font-medium mb-1">{rota.nome}</div>
                <div className="flex justify-between text-sm">
                  <span className="text-gray-500">Tipo:</span>
                  <span>{rota.tipo}</span>
                </div>
                <div className="flex justify-between text-sm mt-1">
                  <span className="text-gray-500">Status:</span>
                  <StatusBadge status={rota.status} type="rota" size="sm" />
                </div>
              </div>
            )) : (
              <div className="text-center py-4 text-gray-500">
                Nenhuma rota encontrada
              </div>
            )}
          </div>
        </div>
      </div>
      
      {/* Acesso Rápido */}
      <div className="bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden mb-6">
        <div className="px-6 py-4 border-b">
          <h2 className="font-bold text-lg">Acesso Rápido</h2>
        </div>
        
        <div className="grid grid-cols-2 md:grid-cols-4 gap-4 p-6">
          <Link to="/alunos/novo" className="flex flex-col items-center p-4 bg-blue-50 rounded-lg hover:bg-blue-100 transition-colors">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth={1.5} stroke="currentColor" className="w-8 h-8 text-blue-600 mb-2">
              <path strokeLinecap="round" strokeLinejoin="round" d="M19 7.5v3m0 0v3m0-3h3m-3 0h-3m-2.25-4.125a3.375 3.375 0 11-6.75 0 3.375 3.375 0 016.75 0zM4 19.235v-.11a6.375 6.375 0 0112.75 0v.109A12.318 12.318 0 0110.374 21c-2.331 0-4.512-.645-6.374-1.766z" />
            </svg>
            <span className="text-sm font-medium text-gray-700">Novo Aluno</span>
          </Link>
          
          <Link to="/viagens/nova" className="flex flex-col items-center p-4 bg-green-50 rounded-lg hover:bg-green-100 transition-colors">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth={1.5} stroke="currentColor" className="w-8 h-8 text-green-600 mb-2">
              <path strokeLinecap="round" strokeLinejoin="round" d="M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 012.25-2.25h13.5A2.25 2.25 0 0121 7.5v11.25m-18 0A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75m-18 0v-7.5A2.25 2.25 0 015.25 9h13.5A2.25 2.25 0 0121 11.25v7.5m-9-6h.008v.008H12v-.008z" />
            </svg>
            <span className="text-sm font-medium text-gray-700">Nova Viagem</span>
          </Link>
          
          <Link to="/rotas/nova" className="flex flex-col items-center p-4 bg-purple-50 rounded-lg hover:bg-purple-100 transition-colors">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth={1.5} stroke="currentColor" className="w-8 h-8 text-purple-600 mb-2">
              <path strokeLinecap="round" strokeLinejoin="round" d="M9 6.75V15m6-6v8.25m.503 3.498l4.875-2.437c.381-.19.622-.58.622-1.006V4.82c0-.836-.88-1.38-1.628-1.006l-3.869 1.934c-.317.159-.69.159-1.006 0L9.503 3.252a1.125 1.125 0 00-1.006 0L3.622 5.689C3.24 5.88 3 6.27 3 6.695V19.18c0 .836.88 1.38 1.628 1.006l3.869-1.934c.317-.159.69-.159 1.006 0l4.994 2.497c.317.158.69.158 1.006 0z" />
            </svg>
            <span className="text-sm font-medium text-gray-700">Nova Rota</span>
          </Link>
          
          <Link to="/onibus/novo" className="flex flex-col items-center p-4 bg-yellow-50 rounded-lg hover:bg-yellow-100 transition-colors">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth={1.5} stroke="currentColor" className="w-8 h-8 text-yellow-600 mb-2">
              <path strokeLinecap="round" strokeLinejoin="round" d="M8.25 18.75a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0m3 0h6m-9 0H3.375a1.125 1.125 0 01-1.125-1.125V14.25m17.25 4.5a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0m3 0h1.125c.621 0 1.129-.504 1.09-1.124a17.902 17.902 0 00-3.213-9.193 2.056 2.056 0 00-1.58-.86H14.25M16.5 18.75h-2.25m0-11.177v-.958c0-.568-.422-1.048-.987-1.106a48.554 48.554 0 00-10.026 0 1.106 1.106 0 00-.987 1.106v7.635m12-6.677v6.677m0 4.5v-4.5m0 0h-12" />
            </svg>
            <span className="text-sm font-medium text-gray-700">Novo Ônibus</span>
          </Link>
        </div>
      </div>
    </div>
  );
}
=== /Users/micaelsantana/Documents/app-frontend/src/pages/Login.jsx ===

import React, { useState } from 'react'
import { useNavigate } from 'react-router-dom'
import brasaoLogo from '../assets/images/Brasao.png'

export default function Login() {
  const [username, setUsername] = useState('')
  const [password, setPassword] = useState('')
  const [error, setError] = useState('')
  const [loading, setLoading] = useState(false)
  const navigate = useNavigate()

  const handleSubmit = (e) => {
    e.preventDefault()
    setLoading(true)
    
    // Simulate API request with a delay
    setTimeout(() => {
      if(username === 'admin' && password === 'admin') {
        navigate('/dashboard')
      } else {
        setError('Credenciais inválidas. Use admin/admin')
        setLoading(false)
      }
    }, 800)
  }

  return (
    <div className="flex min-h-screen bg-gray-50">
      {/* Left side - Login Form */}
      <div className="flex flex-col justify-center py-12 px-4 sm:px-6 lg:px-8 w-full md:w-1/2">
        <div className="sm:mx-auto sm:w-full sm:max-w-md">
          <div className="flex flex-col items-center">
            <img 
              src={brasaoLogo} 
              alt="Brasão de Navegantes" 
              className="h-24 w-auto mb-4 drop-shadow-md" 
            />
            <h1 className="text-center text-3xl font-bold text-gray-900 mb-1">Coracao</h1>
            <h2 className="text-center text-xl font-semibold text-gray-900">Login</h2>
            <p className="mt-2 text-center text-sm text-gray-600">
              Sistema de Gerenciamento de Transporte
            </p>
          </div>
        </div>

        <div className="mt-8 sm:mx-auto sm:w-full sm:max-w-md">
          <div className="bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10">
            <form className="space-y-6" onSubmit={handleSubmit}>
              <div>
                <label htmlFor="username" className="block text-sm font-medium text-gray-700">
                  Nome de usuário
                </label>
                <div className="mt-1">
                  <input
                    id="username"
                    name="username"
                    type="text"
                    autoComplete="username"
                    required
                    value={username}
                    onChange={(e) => setUsername(e.target.value)}
                    className="appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"
                    placeholder="Digite seu nome de usuário"
                  />
                </div>
              </div>

              <div>
                <label htmlFor="password" className="block text-sm font-medium text-gray-700">
                  Senha
                </label>
                <div className="mt-1">
                  <input
                    id="password"
                    name="password"
                    type="password"
                    autoComplete="current-password"
                    required
                    value={password}
                    onChange={(e) => setPassword(e.target.value)}
                    className="appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"
                    placeholder="Digite sua senha"
                  />
                </div>
              </div>

              {error && (
                <div className="bg-red-50 border-l-4 border-red-500 p-4 text-sm text-red-700">
                  <div className="flex items-center">
                    <svg className="h-5 w-5 text-red-500 mr-2" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
                      <path fillRule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clipRule="evenodd" />
                    </svg>
                    {error}
                  </div>
                </div>
              )}

              <div>
                <button
                  type="submit"
                  disabled={loading}
                  className={`w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white ${
                    loading ? 'bg-blue-400' : 'bg-blue-600 hover:bg-blue-700'
                  } focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500`}
                >
                  {loading ? (
                    <>
                      <svg className="animate-spin -ml-1 mr-2 h-4 w-4 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                        <circle className="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" strokeWidth="4"></circle>
                        <path className="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                      </svg>
                      Entrando...
                    </>
                  ) : 'Entrar'}
                </button>
              </div>
            </form>
            
            <div className="mt-6 bg-gray-50 p-4 rounded border border-gray-200 text-sm">
              <p className="font-medium mb-2">Para demonstração, use:</p>
              <p><span className="text-gray-500">Usuário:</span> <strong>admin</strong></p>
              <p><span className="text-gray-500">Senha:</span> <strong>admin</strong></p>
            </div>
          </div>
        </div>
      </div>
      
      {/* Right side - Banner Image (only visible on md screens and up) */}
      <div className="hidden md:block md:w-1/2 bg-blue-600">
        <div className="h-full flex items-center justify-center p-8 text-white">
          <div className="max-w-lg">
            <div className="flex items-center mb-6">
              <img src={brasaoLogo} alt="Brasão de Navegantes" className="h-16 w-auto mr-4" />
              <h2 className="text-3xl font-bold">Sistema de Gerenciamento de Transporte Escolar</h2>
            </div>
            <p className="text-lg text-blue-100 mb-6">
              Uma plataforma completa para gerenciar ônibus, rotas e alunos com eficiência e segurança.
            </p>
            <div className="space-y-4">
              <div className="flex items-center">
                <svg className="h-6 w-6 mr-3" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                </svg>
                <span>Gerenciamento de frota escolar</span>
              </div>
              <div className="flex items-center">
                <svg className="h-6 w-6 mr-3" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                </svg>
                <span>Controle de rotas e viagens</span>
              </div>
              <div className="flex items-center">
                <svg className="h-6 w-6 mr-3" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                </svg>
                <span>Cadastro e acompanhamento de alunos</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  )
}
=== /Users/micaelsantana/Documents/app-frontend/src/pages/Monitores.jsx ===

import React, { useState, useEffect } from 'react';
import DataTable from '../components/common/DataTable';
import { MonitorService } from '../api/services';
import { useNotification } from '../contexts/NotificationContext';


export const Monitores = () => {
  const [monitores, setMonitores] = useState([]);
  const [loading, setLoading] = useState(true);
  const [pagination, setPagination] = useState({
    currentPage: 1,
    totalPages: 1,
    perPage: 10,
    totalItems: 0
  });
  const { showNotification } = useNotification();

  const columns = [
    { key: 'id', header: 'ID' },
    { key: 'nome', header: 'Nome' },
    { key: 'email', header: 'Email' },
    { key: 'telefone', header: 'Telefone' },
    { key: 'disponivel', header: 'Disponível', format: (item) => item.disponivel ? 'Sim' : 'Não' },
    { key: 'actions', header: 'Ações' }
  ];

  const fetchMonitores = async (page = 1) => {
    try {
      setLoading(true);
      const response = await MonitorService.getMonitores(page);
      const { data, meta } = response.data;
      setMonitores(data);
      setPagination({
        currentPage: meta.current_page,
        totalPages: meta.last_page,
        perPage: meta.per_page,
        totalItems: meta.total
      });
    } catch (error) {
      console.error('Error fetching monitores:', error);
      showNotification('error', error.message);
    } finally {
      setLoading(false);
    }
  };

  useEffect(() => {
    fetchMonitores();
  }, []);

  const handlePageChange = (newPage) => {
    fetchMonitores(newPage);
  };

  const handleCreate = async (formData) => {
    try {
      await MonitorService.createMonitor(formData);
      showNotification('success', 'Monitor criado com sucesso');
      fetchMonitores();
    } catch (error) {
      showNotification('error', error.message);
    }
  };

  const handleUpdate = async (id, formData) => {
    try {
      await MonitorService.updateMonitor(id, formData);
      showNotification('success', 'Monitor atualizado com sucesso');
      fetchMonitores(pagination.currentPage);
    } catch (error) {
      showNotification('error', error.message);
    }
  };

  const handleDelete = async (id) => {
    try {
      await MonitorService.deleteMonitor(id);
      showNotification('success', 'Monitor removido com sucesso');
      fetchMonitores(pagination.currentPage);
    } catch (error) {
      showNotification('error', error.message);
    }
  };

  return (
    <div className="p-4">
      <h1 className="text-2xl font-bold mb-4">Gerenciamento de Monitores</h1>
      <DataTable
        columns={columns}
        data={monitores}
        loading={loading}
        pagination={pagination}
        onPageChange={handlePageChange}
        onCreate={handleCreate}
        onUpdate={handleUpdate}
        onDelete={handleDelete}
        searchPlaceholder="Buscar monitores..."
      />
    </div>
  );
};

export default Monitores;
=== /Users/micaelsantana/Documents/app-frontend/src/pages/Viagens.jsx ===

import React, { useState, useEffect } from 'react';
import { ViagemService, RotaService, OnibusService, MotoristaService, MonitorService } from '../api/services';
import DataTable from '../components/common/DataTable';
import StatusBadge from '../components/common/StatusBadge';
import FormModal from '../components/common/FormModal';
import DeleteConfirmationModal from '../components/common/DeleteConfirmationModal';
import { useNotification } from '../contexts/NotificationContext';
import { MASKS } from '../utils/masks/constants';
import MaskedInput from '../utils/masks/components/MaskedInput';
import PlacaInput from '../utils/masks/components/PlacaInput';

const Viagens = () => {
  const { showError, showSuccess } = useNotification();

  const [viagens, setViagens] = useState([]);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState(null);
  const [isModalOpen, setIsModalOpen] = useState(false);
  const [isDeleteModalOpen, setIsDeleteModalOpen] = useState(false);
  const [currentViagem, setCurrentViagem] = useState(null);
  const [isSubmitting, setIsSubmitting] = useState(false);
  const [searchTerm, setSearchTerm] = useState('');

  // Related data for dropdown selects
  const [rotas, setRotas] = useState([]);
  const [onibus, setOnibus] = useState([]);
  const [motoristas, setMotoristas] = useState([]);
  const [monitores, setMonitores] = useState([]);
  const [relatedDataLoading, setRelatedDataLoading] = useState(false);

  // Form state
  const [formData, setFormData] = useState({
    data_viagem: '',
    rota_id: '',
    onibus_id: '',
    motorista_id: '',
    monitor_id: '',
    horario_id: '1', // Default value, will be replaced with actual data
    hora_saida_prevista: '',
    hora_chegada_prevista: '',
    hora_saida_real: '',
    hora_chegada_real: '',
    observacoes: '',
    status: true,
    telefone_motorista: '',
    telefone_monitor: ''
  });

  useEffect(() => {
    fetchViagens();
    fetchRelatedData();
  }, []);

  const fetchViagens = async () => {
    try {
      setLoading(true);
      const response = await ViagemService.getViagens();

      if (response?.data?.data && Array.isArray(response.data.data)) {
        // Convert status to match UI requirements
        const formattedData = response.data.data.map(viagem => ({
          ...viagem,
          status: viagem.status ? 'completed' : 'pending'
        }));
        setViagens(formattedData);
      } else {
        console.error('API returned unexpected data format');
        showError('Formato de dados inesperado. Contate o suporte.');
      }
    } catch (err) {
      console.error('Error fetching data:', err);
      showError('Erro ao carregar viagens: ' + (err.response?.data?.message || err.message));
    } finally {
      setLoading(false);
    }
  };

  const fetchRelatedData = async () => {
    setRelatedDataLoading(true);
    try {
      // Fetch related data for dropdowns
      const [rotasRes, onibusRes, motoristasRes, monitoresRes] = await Promise.all([
        RotaService.getRotas(),
        OnibusService.getOnibus(),
        MotoristaService.getMotoristas(),
        MonitorService.getMonitores()
      ]);

      setRotas(rotasRes.data.data || []);
      setOnibus(onibusRes.data.data || []);
      setMotoristas(motoristasRes.data.data || []);
      setMonitores(monitoresRes.data.data || []);
    } catch (err) {
      console.error('Error fetching related data:', err);
      showError('Erro ao carregar dados relacionados: ' + err.message);
    } finally {
      setRelatedDataLoading(false);
    }
  };

  const handleInputChange = (e) => {
    const { name, value, type, checked } = e.target;
    setFormData({
      ...formData,
      [name]: type === 'checkbox' ? checked : value
    });
  };

  const openModal = (viagem = null) => {
    if (viagem) {
      // Edit mode
      // Buscar os dados do motorista e monitor para obter os telefones
      const motorista = motoristas.find(m => m.id === viagem.motorista_id);
      const monitor = monitores.find(m => m.id === viagem.monitor_id);

      const data = {
        data_viagem: viagem.data_viagem || '',
        rota_id: viagem.rota_id || '',
        onibus_id: viagem.onibus_id || '',
        motorista_id: viagem.motorista_id || '',
        monitor_id: viagem.monitor_id || '',
        horario_id: viagem.horario_id || '1',
        hora_saida_prevista: viagem.hora_saida_prevista ? formatTimeForDisplay(viagem.hora_saida_prevista) : '',
        hora_chegada_prevista: viagem.hora_chegada_prevista ? formatTimeForDisplay(viagem.hora_chegada_prevista) : '',
        hora_saida_real: viagem.hora_saida_real ? formatTimeForDisplay(viagem.hora_saida_real) : '',
        hora_chegada_real: viagem.hora_chegada_real ? formatTimeForDisplay(viagem.hora_chegada_real) : '',
        observacoes: viagem.observacoes || '',
        status: viagem.status === 'completed' || viagem.status === true || viagem.status === 1,
        telefone_motorista: motorista ? motorista.telefone : '',
        telefone_monitor: monitor ? monitor.telefone : ''
      };
      setFormData(data);
      setCurrentViagem(viagem);
    } else {
      // Create mode - set default values
      const today = new Date().toISOString().split('T')[0];
      setFormData({
        data_viagem: today,
        rota_id: '',
        onibus_id: '',
        motorista_id: '',
        monitor_id: '',
        horario_id: '1', // Default value
        hora_saida_prevista: '07:00',
        hora_chegada_prevista: '08:00',
        hora_saida_real: '',
        hora_chegada_real: '',
        observacoes: '',
        status: true,
        telefone_motorista: '',
        telefone_monitor: ''
      });
      setCurrentViagem(null);
    }
    setIsModalOpen(true);
  };

  // Format time values from API format (H:i) to HTML time input format (HH:mm)
  const formatTimeForDisplay = (time) => {
    if (!time) return '';
    
    try {
      // Handle different time formats that might come from the API
      const timeParts = time.split(':');
      
      if (timeParts.length < 2) return time; // Return as is if not a valid time format
      
      const hours = timeParts[0].padStart(2, '0');
      const minutes = timeParts[1].substring(0, 2).padStart(2, '0'); // Take only first 2 chars & ensure 2 digits
      
      return `${hours}:${minutes}`;
    } catch (error) {
      console.error('Error formatting time for display:', error);
      return time || '';
    }
  };

  // Format time values from HTML time input format (HH:mm) to API format (H:i)
  const formatTimeForApi = (time) => {
    if (!time) return '';
    
    try {
      // Extract hours and minutes
      const [hours, minutes] = time.split(':');
      
      // Convert hours to integer to remove leading zeros
      const hour = parseInt(hours, 10);
      
      // Return exactly in the format expected by the API (H:i)
      return `${hour}:${minutes}`;
    } catch (error) {
      console.error('Error formatting time for API:', error);
      return '';
    }
  };

  // Atualizar os dados de telefone quando o motorista ou monitor é alterado
  const handleMotoristaChange = (e) => {
    const motoristaId = e.target.value;
    const motorista = motoristas.find(m => m.id === parseInt(motoristaId));
    
    setFormData({
      ...formData,
      motorista_id: motoristaId,
      telefone_motorista: motorista ? motorista.telefone : ''
    });
  };

  const handleMonitorChange = (e) => {
    const monitorId = e.target.value;
    const monitor = monitores.find(m => m.id === parseInt(monitorId));
    
    setFormData({
      ...formData,
      monitor_id: monitorId,
      telefone_monitor: monitor ? monitor.telefone : ''
    });
  };

  const handleSubmit = async (e) => {
    e.preventDefault();
    setIsSubmitting(true);

    try {
      // Format the data for API
      const apiData = {
        ...formData,
        hora_saida_prevista: formData.hora_saida_prevista,
        hora_chegada_prevista: formData.hora_chegada_prevista,
        hora_saida_real: formData.hora_saida_real || null,
        hora_chegada_real: formData.hora_chegada_real || null,
        status: formData.status
      };

      // Remover campos que não pertencem ao modelo de Viagem
      delete apiData.telefone_motorista;
      delete apiData.telefone_monitor;

      if (currentViagem) {
        // Update
        await ViagemService.updateViagem(currentViagem.id, apiData);
        showSuccess('Viagem atualizada com sucesso!');
      } else {
        // Create
        await ViagemService.createViagem(apiData);
        showSuccess('Viagem criada com sucesso!');
      }
      setIsModalOpen(false);
      fetchViagens();
    } catch (err) {
      console.error('Error saving viagem:', err);

      if (err.response && err.response.status === 422) {
        const validationErrors = err.response.data.errors;
        if (validationErrors) {
          const errorMessages = Object.entries(validationErrors)
            .map(([field, messages]) => `${field}: ${messages.join(', ')}`)
            .join('\n');

          showError(`Erro de validação:\n${errorMessages}`);
        }
      } else {
        showError('Erro ao salvar viagem: ' + (err.response?.data?.message || err.message));
      }
    } finally {
      setIsSubmitting(false);
    }
  };

  // Get the name of a linked entity based on its ID
  const getRotaName = (id) => {
    const rota = rotas.find(r => r.id === id);
    return rota ? rota.nome : 'Desconhecida';
  };

  const getOnibusName = (id) => {
    const bus = onibus.find(o => o.id === id);
    return bus ? bus.placa : 'Desconhecido';
  };

  const getMotoristaName = (id) => {
    const motorista = motoristas.find(m => m.id === id);
    return motorista ? motorista.nome : 'Desconhecido';
  };

  // Format a date from ISO to local date format
  const formatDate = (dateString) => {
    if (!dateString) return '-';
    const date = new Date(dateString);
    return date.toLocaleDateString('pt-BR');
  };

  // Format nested object or use ID to lookup name
  const formatNestedName = (item, field, nameFn) => {
    if (item[field] && typeof item[field] === 'object') {
      return item[field].nome || item[field].placa || 'Desconhecido';
    }
    return nameFn(item[`${field}_id`]);
  };

  const columns = [
    {
      key: 'data_viagem',
      header: 'Data',
      format: (item) => formatDate(item.data_viagem)
    },
    {
      key: 'rota',
      header: 'Rota',
      format: (item) => formatNestedName(item, 'rota', getRotaName)
    },
    {
      key: 'onibus',
      header: 'Ônibus',
      format: (item) => formatNestedName(item, 'onibus', getOnibusName)
    },
    {
      key: 'motorista',
      header: 'Motorista',
      format: (item) => formatNestedName(item, 'motorista', getMotoristaName)
    },
    {
      key: 'status',
      header: 'Status',
      format: (item) => <StatusBadge status={item.status} type="viagem" />
    }
  ];

  const handleEdit = (viagem) => {
    openModal(viagem);
  };

  const handleDelete = (viagem) => {
    setCurrentViagem(viagem);
    setIsDeleteModalOpen(true);
  };

  const handleConfirmDelete = async () => {
    try {
      await ViagemService.deleteViagem(currentViagem.id);
      showSuccess('Viagem excluída com sucesso!');
      setIsDeleteModalOpen(false);
      setCurrentViagem(null);
      fetchViagens();
    } catch (err) {
      const errorMsg = err.response?.data?.message || err.message;
      setError('Erro ao excluir viagem: ' + errorMsg);
      showError('Erro ao excluir viagem: ' + errorMsg);
    }
  };

  const filteredViagens = viagens.filter(viagem => {
    const searchLower = searchTerm.toLowerCase();
    return (
      viagem.data_viagem.toLowerCase().includes(searchLower) ||
      formatNestedName(viagem, 'rota', getRotaName).toLowerCase().includes(searchLower) ||
      formatNestedName(viagem, 'onibus', getOnibusName).toLowerCase().includes(searchLower) ||
      formatNestedName(viagem, 'motorista', getMotoristaName).toLowerCase().includes(searchLower)
    );
  });

  return (
    <div className="space-y-6">
      <div className="flex justify-between items-center mb-6">
        <h1 className="text-2xl font-bold">Gerenciamento de Viagens</h1>
        <button
          className="bg-blue-500 hover:bg-blue-600 text-white py-2 px-4 rounded flex items-center"
          onClick={() => openModal()}
        >
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth={1.5} stroke="currentColor" className="w-5 h-5 mr-2">
            <path strokeLinecap="round" strokeLinejoin="round" d="M12 4.5v15m7.5-7.5h-15" />
          </svg>
          Nova Viagem
        </button>
      </div>

      <div className="bg-white rounded-lg shadow mb-6">
        <div className="border-b px-6 py-4 flex justify-between items-center">
          <h2 className="font-bold text-lg">Viagens Programadas</h2>

          {/* Search box */}
          <div className="relative w-full sm:w-64">
            <div className="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
              <svg className="h-5 w-5 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
              </svg>
            </div>
            <input
              type="text"
              placeholder="Buscar viagens..."
              className="block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg bg-gray-50 focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-sm"
              value={searchTerm}
              onChange={(e) => setSearchTerm(e.target.value)}
            />
          </div>
        </div>

        <div className="p-4">
          {error && (
            <div className="p-4 mb-4 text-red-600 bg-red-50 rounded-md flex items-start">
              <svg xmlns="http://www.w3.org/2000/svg" className="h-5 w-5 mr-2 mt-0.5 flex-shrink-0" viewBox="0 0 20 20" fill="currentColor">
                <path fillRule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clipRule="evenodd" />
              </svg>
              <span>{error}</span>
            </div>
          )}

          <DataTable
            columns={columns}
            data={filteredViagens}
            onEdit={handleEdit}
            onDelete={handleDelete}
            loading={loading}
            error={null} // Error is already shown above
          />
        </div>
      </div>

      {/* Modal Form */}
      <FormModal
        isOpen={isModalOpen}
        onClose={() => setIsModalOpen(false)}
        title={currentViagem ? "Editar Viagem" : "Nova Viagem"}
        onSubmit={handleSubmit}
        isSubmitting={isSubmitting}
      >
        <div className="grid grid-cols-1 gap-4 mb-4">
          <div>
            <label htmlFor="data_viagem" className="block text-sm font-medium text-gray-700">Data da Viagem</label>
            <input
              type="date"
              name="data_viagem"
              id="data_viagem"
              required
              value={formData.data_viagem}
              onChange={handleInputChange}
              className="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500"
            />
          </div>

          <div>
            <label htmlFor="rota_id" className="block text-sm font-medium text-gray-700">Rota</label>
            <select
              name="rota_id"
              id="rota_id"
              required
              value={formData.rota_id}
              onChange={handleInputChange}
              className="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500"
              disabled={relatedDataLoading}
            >
              <option value="">Selecione uma rota</option>
              {rotas.map(rota => (
                <option key={rota.id} value={rota.id}>{rota.nome}</option>
              ))}
            </select>
          </div>

          <div>
            <label htmlFor="onibus_id" className="block text-sm font-medium text-gray-700">Ônibus</label>
            <select
              name="onibus_id"
              id="onibus_id"
              required
              value={formData.onibus_id}
              onChange={handleInputChange}
              className="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500"
              disabled={relatedDataLoading}
            >
              <option value="">Selecione um ônibus</option>
              {onibus.map(bus => (
                <option key={bus.id} value={bus.id}>{bus.placa} - {bus.modelo}</option>
              ))}
            </select>
          </div>

          <div>
            <label htmlFor="motorista_id" className="block text-sm font-medium text-gray-700">Motorista</label>
            <select
              name="motorista_id"
              id="motorista_id"
              required
              value={formData.motorista_id}
              onChange={handleMotoristaChange}
              className="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500"
              disabled={relatedDataLoading}
            >
              <option value="">Selecione um motorista</option>
              {motoristas.map(motorista => (
                <option key={motorista.id} value={motorista.id}>{motorista.nome}</option>
              ))}
            </select>
          </div>

          <div>
            <label htmlFor="monitor_id" className="block text-sm font-medium text-gray-700">Monitor (opcional)</label>
            <select
              name="monitor_id"
              id="monitor_id"
              value={formData.monitor_id}
              onChange={handleMonitorChange}
              className="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500"
              disabled={relatedDataLoading}
            >
              <option value="">Nenhum monitor</option>
              {monitores.map(monitor => (
                <option key={monitor.id} value={monitor.id}>{monitor.nome}</option>
              ))}
            </select>
          </div>

          {/* Hidden field for horario_id - required by API but handled separately */}
          <input type="hidden" name="horario_id" value={formData.horario_id} />

          <div className="grid grid-cols-1 sm:grid-cols-2 gap-4">
            <div>
              <label htmlFor="hora_saida_prevista" className="block text-sm font-medium text-gray-700">Hora Saída Prevista</label>
              <input
                type="time"
                name="hora_saida_prevista"
                id="hora_saida_prevista"
                required
                value={formData.hora_saida_prevista}
                onChange={handleInputChange}
                className="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500"
              />
            </div>

            <div>
              <label htmlFor="hora_chegada_prevista" className="block text-sm font-medium text-gray-700">Hora Chegada Prevista</label>
              <input
                type="time"
                name="hora_chegada_prevista"
                id="hora_chegada_prevista"
                required
                value={formData.hora_chegada_prevista}
                onChange={handleInputChange}
                className="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500"
              />
            </div>
          </div>

          <div className="grid grid-cols-1 sm:grid-cols-2 gap-4">
            <div>
              <label htmlFor="telefone_motorista" className="block text-sm font-medium text-gray-700">Telefone Motorista</label>
              <MaskedInput
                mask={MASKS.PHONE}
                name="telefone_motorista"
                id="telefone_motorista"
                value={formData.telefone_motorista}
                onChange={(e) => {
                  setFormData({
                    ...formData,
                    telefone_motorista: e.target.value
                  });
                }}
                className="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500"
                disabled={false}
              />
            </div>
            <div>
              <label htmlFor="telefone_monitor" className="block text-sm font-medium text-gray-700">Telefone Monitor</label>
              <MaskedInput
                mask={MASKS.PHONE}
                name="telefone_monitor"
                id="telefone_monitor"
                value={formData.telefone_monitor}
                onChange={(e) => {
                  setFormData({
                    ...formData,
                    telefone_monitor: e.target.value
                  });
                }}
                className="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500"
                disabled={false}
              />
            </div>
          </div>

          <div>
            <label htmlFor="hora_saida_real" className="block text-sm font-medium text-gray-700">Hora Saída Real</label>
            <input
              type="time"
              name="hora_saida_real"
              id="hora_saida_real"
              value={formData.hora_saida_real}
              onChange={handleInputChange}
              className="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500"
            />
          </div>

          <div>
            <label htmlFor="hora_chegada_real" className="block text-sm font-medium text-gray-700">Hora Chegada Real</label>
            <input
              type="time"
              name="hora_chegada_real"
              id="hora_chegada_real"
              value={formData.hora_chegada_real}
              onChange={handleInputChange}
              className="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500"
            />
          </div>
          <div>
            <label htmlFor="observacoes" className="block text-sm font-medium text-gray-700">Observações</label>
            <textarea
              name="observacoes"
              id="observacoes"
              rows="2"
              value={formData.observacoes}
              onChange={handleInputChange}
              className="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500"
            ></textarea>
          </div>

          <div className="flex items-center">
            <input
              type="checkbox"
              name="status"
              id="status"
              checked={formData.status}
              onChange={handleInputChange}
              className="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"
            />
            <label htmlFor="status" className="ml-2 block text-sm text-gray-900">Ativa</label>
          </div>
        </div>
      </FormModal>

      {/* Delete Confirmation Modal - moved outside of FormModal */}
      <DeleteConfirmationModal
        isOpen={isDeleteModalOpen}
        onClose={() => setIsDeleteModalOpen(false)}
        onConfirm={handleConfirmDelete}
        title="Confirmar Exclusão"
        message={`Tem certeza que deseja excluir a viagem de ${currentViagem?.data_viagem}?`}
        isSubmitting={isSubmitting}
      />

      {/* Stats Cards */}
      <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
        <div className="bg-white rounded-xl shadow-sm border border-gray-200 p-4 flex items-center">
          <div className="bg-blue-100 text-blue-600 p-3 rounded-lg mr-4">
            <svg xmlns="http://www.w3.org/2000/svg" className="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
            </svg>
          </div>
          <div>
            <div className="text-sm text-gray-500">Total de Viagens</div>
            <div className="text-xl font-bold">{viagens.length}</div>
          </div>
        </div>

        <div className="bg-white rounded-xl shadow-sm border border-gray-200 p-4 flex items-center">
          <div className="bg-green-100 text-green-600 p-3 rounded-lg mr-4">
            <svg xmlns="http://www.w3.org/2000/svg" className="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
            </svg>
          </div>
          <div>
            <div className="text-sm text-gray-500">Viagens Concluídas</div>
            <div className="text-xl font-bold">
              {viagens.filter(viagem => viagem.status === 'completed').length}
            </div>
          </div>
        </div>

        <div className="bg-white rounded-xl shadow-sm border border-gray-200 p-4 flex items-center">
          <div className="bg-yellow-100 text-yellow-600 p-3 rounded-lg mr-4">
            <svg xmlns="http://www.w3.org/2000/svg" className="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
            </svg>
          </div>
          <div>
            <div className="text-sm text-gray-500">Viagens Pendentes</div>
            <div className="text-xl font-bold">
              {viagens.filter(viagem => viagem.status === 'pending').length}
            </div>
          </div>
        </div>
      </div>
    </div>
  );
};

export default Viagens;
=== /Users/micaelsantana/Documents/app-frontend/src/pages/Motoristas.jsx ===

import React, { useState, useEffect } from 'react';
import DataTable from '../components/common/DataTable';
import StatusBadge from '../components/common/StatusBadge';
import FormModal from '../components/common/FormModal';
import DeleteConfirmationModal from '../components/common/DeleteConfirmationModal';
import { MotoristaService } from '../api/services';
import { processStatus } from '../utils/statusProcessor'
import { useNotification } from '../contexts/NotificationContext';
import MaskedInput from '../utils/masks/components/MaskedInput';
import { MASKS } from '../utils/masks/constants';
import { unmask } from '../utils/masks/processors';
import { formatDocument } from '../utils/masks/formatters';

export default function Motoristas() {
  const [motoristas, setMotoristas] = useState([]);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState(null);
  const [searchTerm, setSearchTerm] = useState('');
  const [isModalOpen, setIsModalOpen] = useState(false);
  const [isDeleteModalOpen, setIsDeleteModalOpen] = useState(false);
  const [currentMotorista, setCurrentMotorista] = useState(null);
  const [isSubmitting, setIsSubmitting] = useState(false);
  const { showSuccess, showError } = useNotification ? useNotification() : { 
    showSuccess: () => {}, 
    showError: () => {} 
  };
  
  // Form state - Ainda usando status como string para a interface, mas vamos converter para boolean na API
  const [formData, setFormData] = useState({
    nome: '',
    cpf: '',
    cnh: '',
    categoria_cnh: '',
    validade_cnh: '',
    telefone: '',
    endereco: '',
    data_contratacao: '',
    status: 'Ativo' // Isso será convertido para true na API
  });

  useEffect(() => {
    fetchMotoristas();
  }, []);

  const fetchMotoristas = async () => {
    try {
      setLoading(true);
      const response = await MotoristaService.getMotoristas();
      
      // Process the API response
      let motoristasData = [];
      
      if (response?.data) {
        // Case 1: Standard response with 'data' inside response.data (common in Laravel)
        if (response.data.data && Array.isArray(response.data.data)) {
          motoristasData = response.data.data;
        } 
        // Case 2: Response is a direct array (fallback)
        else if (Array.isArray(response.data)) {
          motoristasData = response.data;
        }
        // Case 3: Paginated Laravel response via items()
        else if (response.data.meta && Array.isArray(response.data.data)) {
          motoristasData = response.data.data;
        }
        
        // Format data for UI - convert status to a standardized format
        const formattedData = motoristasData.map(motorista => ({
          ...motorista,
          status: processStatus(motorista.status)
        }));
        
        setMotoristas(formattedData);
        setError(null);
      } else {
        // Case 4: No valid data from API
        console.warn('API returned unexpected format');
        setMotoristas([]);
        setError('Nenhum dado de motorista encontrado no servidor.');
      }
    } catch (err) {
      console.error('Error fetching data:', err);
      setError('Erro ao carregar motoristas: ' + (err.response?.data?.message || err.message));
      setMotoristas([]);
    } finally {
      setLoading(false);
    }
  };

  // Function to process different status formats
  const processStatus = (status) => {
    if (typeof status === 'boolean') {
      return status ? 'active' : 'inactive';
    } else if (typeof status === 'number') {
      return status === 1 ? 'active' : 'inactive';
    } else if (typeof status === 'string') {
      const lowercaseStatus = status.toLowerCase();
      if (lowercaseStatus === 'true' || lowercaseStatus === 'ativo' || lowercaseStatus === '1' || lowercaseStatus === 'active') {
        return 'active';
      } else if (lowercaseStatus === 'false' || lowercaseStatus === 'inativo' || lowercaseStatus === '0' || lowercaseStatus === 'inactive') {
        return 'inactive';
      } else if (lowercaseStatus === 'ferias') {
        return 'vacation';
      } else if (lowercaseStatus === 'licenca') {
        return 'leave';
      }
      return status;
    }
    return 'inactive'; // default value
  };

  // Search and filter function
  const filteredMotoristas = motoristas.filter(motorista => 
    motorista.nome?.toLowerCase().includes(searchTerm.toLowerCase()) ||
    motorista.cpf?.toLowerCase().includes(searchTerm.toLowerCase()) ||
    motorista.cnh?.toLowerCase().includes(searchTerm.toLowerCase()) ||
    motorista.telefone?.toLowerCase().includes(searchTerm.toLowerCase())
  );

  const columns = [
    { key: 'nome', header: 'Nome' },
    { key: 'cpf', header: 'CPF', format: (item) => formatDocument(item.cpf) },
    { key: 'cnh', header: 'CNH' },
    { key: 'categoria_cnh', header: 'Categoria' },
    { key: 'telefone', header: 'Telefone' },
    { 
      key: 'validade_cnh', 
      header: 'Validade CNH',
      format: (item) => {
        if (!item.validade_cnh) return '-';
        const date = new Date(item.validade_cnh);
        return date.toLocaleDateString('pt-BR');
      }
    },
    { 
      key: 'status', 
      header: 'Status',
      format: (item) => <StatusBadge status={processStatus(item.status, 'motorista')} type="motorista" />
    }
  ];

  const handleInputChange = (e) => {
    const { name, value } = e.target;
    setFormData({
      ...formData,
      [name]: value
    });
  };

  const openModal = (motorista = null) => {
    if (motorista) {
      // Edit mode - convert any status to our enum values for display
      let statusValue = 'Ativo'; // default
      
      if (typeof motorista.status === 'string') {
        const statusLower = motorista.status.toLowerCase();
        if (statusLower === 'active' || statusLower === 'ativo') {
          statusValue = 'Ativo';
        } else if (statusLower === 'inactive' || statusLower === 'inativo') {
          statusValue = 'Inativo';
        } else if (statusLower === 'vacation' || statusLower === 'ferias') {
          statusValue = 'Ferias';
        } else if (statusLower === 'leave' || statusLower === 'licenca') {
          statusValue = 'Licenca';
        }
      } else if (motorista.status === true || motorista.status === 1) {
        statusValue = 'Ativo';
      } else if (motorista.status === false || motorista.status === 0) {
        statusValue = 'Inativo';
      }
      
      setFormData({
        nome: motorista.nome || '',
        cpf: motorista.cpf || '',
        cnh: motorista.cnh || '',
        categoria_cnh: motorista.categoria_cnh || '',
        validade_cnh: motorista.validade_cnh ? motorista.validade_cnh.split('T')[0] : '',
        telefone: motorista.telefone || '',
        endereco: motorista.endereco || '',
        data_contratacao: motorista.data_contratacao ? motorista.data_contratacao.split('T')[0] : '',
        status: statusValue
      });
      setCurrentMotorista(motorista);
    } else {
      // Create mode - reset form
      setFormData({
        nome: '',
        cpf: '',
        cnh: '',
        categoria_cnh: 'D',
        validade_cnh: '',
        telefone: '',
        endereco: '',
        data_contratacao: new Date().toISOString().split('T')[0],
        status: 'Ativo'  // Isso será convertido para true na API
      });
      setCurrentMotorista(null);
    }
    setIsModalOpen(true);
  };

  const handleSubmit = async (e) => {
    e.preventDefault();
    setIsSubmitting(true);
    
    try {
      // Limpar dados para API (a conversão de status para boolean será feita no MotoristaService)
      const apiData = {
        ...formData,
        cpf: unmask(formData.cpf),
        telefone: unmask(formData.telefone)
      };
      
      console.log('Dados a serem enviados:', apiData);
      
      if (currentMotorista) {
        // Update existing
        await MotoristaService.updateMotorista(currentMotorista.id, apiData);
        showSuccess('Motorista atualizado com sucesso!');
      } else {
        // Create new
        await MotoristaService.createMotorista(apiData);
        showSuccess('Motorista cadastrado com sucesso!');
      }
      setIsModalOpen(false);
      fetchMotoristas();
    } catch (err) {
      console.error('Error saving motorista:', err);
      const errorMsg = err.response?.data?.errors
        ? Object.values(err.response.data.errors).flat().join(', ')
        : (err.response?.data?.message || err.message);
      
      showError('Erro ao salvar motorista: ' + errorMsg);
      setError('Erro ao salvar motorista: ' + errorMsg);
    } finally {
      setIsSubmitting(false);
    }
  };

  const handleEdit = (motorista) => {
    openModal(motorista);
  };

  const handleDelete = (motorista) => {
    setCurrentMotorista(motorista);
    setIsDeleteModalOpen(true);
  };

  const handleConfirmDelete = async () => {
    try {
      if (!currentMotorista || !currentMotorista.id) {
        throw new Error('ID do motorista não disponível para exclusão');
      }
      
      console.log('Tentando excluir motorista ID:', currentMotorista.id);
      await MotoristaService.deleteMotorista(currentMotorista.id);
      showSuccess('Motorista excluído com sucesso!');
      setIsDeleteModalOpen(false);
      setCurrentMotorista(null);
      fetchMotoristas();
    } catch (err) {
      console.error('Erro completo na exclusão:', err);
      const errorMsg = err.response?.data?.message || err.message;
      showError('Erro ao excluir motorista: ' + errorMsg);
      setError('Erro ao excluir motorista: ' + errorMsg);
    }
  };

  return (
    <div className="space-y-6">
      <div className="flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4">
        <h1 className="text-2xl font-bold">Gerenciamento de Motoristas</h1>
        <button
          onClick={() => openModal()}
          className="bg-blue-500 hover:bg-blue-600 text-white py-2 px-4 rounded flex items-center"
        >
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth={1.5} stroke="currentColor" className="w-5 h-5 mr-2">
            <path strokeLinecap="round" strokeLinejoin="round" d="M12 4.5v15m7.5-7.5h-15" />
          </svg>
          Novo Motorista
        </button>
      </div>

      <div className="bg-white rounded-lg shadow mb-6">
        <div className="border-b px-6 py-4 flex justify-between items-center">
          <h2 className="font-bold text-lg">Motoristas Cadastrados</h2>
          
          {/* Search box */}
          <div className="relative w-full sm:w-64">
            <div className="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
              <svg className="h-5 w-5 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
              </svg>
            </div>
            <input
              type="text"
              placeholder="Buscar motoristas..."
              className="block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg bg-gray-50 focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-sm"
              value={searchTerm}
              onChange={(e) => setSearchTerm(e.target.value)}
            />
          </div>
        </div>
        
        <div className="p-4">
          {error && (
            <div className="p-4 mb-4 text-red-600 bg-red-50 rounded-md flex items-start">
              <svg xmlns="http://www.w3.org/2000/svg" className="h-5 w-5 mr-2 mt-0.5 flex-shrink-0" viewBox="0 0 20 20" fill="currentColor">
                <path fillRule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clipRule="evenodd" />
              </svg>
              <span>{error}</span>
            </div>
          )}
          
          <DataTable
            columns={columns}
            data={filteredMotoristas}
            onEdit={handleEdit}
            onDelete={handleDelete}
            loading={loading}
            error={null} // Error is already shown above
          />
        </div>
      </div>

      {/* Modal Form */}
      <FormModal 
        isOpen={isModalOpen} 
        onClose={() => setIsModalOpen(false)} 
        title={currentMotorista ? "Editar Motorista" : "Novo Motorista"}
        onSubmit={handleSubmit}
        isSubmitting={isSubmitting}
      >
        <div className="grid grid-cols-1 gap-4 mb-4">
          <div>
            <label htmlFor="nome" className="block text-sm font-medium text-gray-700">Nome</label>
            <input
              type="text"
              name="nome"
              id="nome"
              required
              value={formData.nome}
              onChange={handleInputChange}
              className="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500"
            />
          </div>
          
          <div className="grid grid-cols-1 sm:grid-cols-2 gap-4">
            <div>
              <label htmlFor="cpf" className="block text-sm font-medium text-gray-700">CPF</label>
              <MaskedInput
                mask={MASKS.CPF}
                name="cpf"
                id="cpf"
                required
                value={formData.cpf}
                onChange={handleInputChange}
                className="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500"
              />
            </div>
            
            <div>
              <label htmlFor="telefone" className="block text-sm font-medium text-gray-700">Telefone</label>
              <MaskedInput
                mask={MASKS.PHONE}
                name="telefone"
                id="telefone"
                required
                value={formData.telefone}
                onChange={handleInputChange}
                className="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500"
              />
            </div>
          </div>
          
          <div className="grid grid-cols-1 sm:grid-cols-3 gap-4">
            <div>
              <label htmlFor="cnh" className="block text-sm font-medium text-gray-700">CNH</label>
              <input
                type="text"
                name="cnh"
                id="cnh"
                required
                value={formData.cnh}
                onChange={handleInputChange}
                className="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500"
              />
            </div>
            
            <div>
              <label htmlFor="categoria_cnh" className="block text-sm font-medium text-gray-700">Categoria CNH</label>
              <select
                name="categoria_cnh"
                id="categoria_cnh"
                required
                value={formData.categoria_cnh}
                onChange={handleInputChange}
                className="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500"
              >
                <option value="">Selecione</option>
                <option value="A">A</option>
                <option value="B">B</option>
                <option value="C">C</option>
                <option value="D">D</option>
                <option value="E">E</option>
                <option value="AB">AB</option>
                <option value="AC">AC</option>
                <option value="AD">AD</option>
                <option value="AE">AE</option>
              </select>
            </div>
            
            <div>
              <label htmlFor="validade_cnh" className="block text-sm font-medium text-gray-700">Validade CNH</label>
              <input
                type="date"
                name="validade_cnh"
                id="validade_cnh"
                required
                value={formData.validade_cnh}
                onChange={handleInputChange}
                className="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500"
              />
            </div>
          </div>
          
          <div>
            <label htmlFor="endereco" className="block text-sm font-medium text-gray-700">Endereço</label>
            <input
              type="text"
              name="endereco"
              id="endereco"
              required
              value={formData.endereco}
              onChange={handleInputChange}
              className="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500"
            />
          </div>
          
          <div>
            <label htmlFor="data_contratacao" className="block text-sm font-medium text-gray-700">Data de Contratação</label>
            <input
              type="date"
              name="data_contratacao"
              id="data_contratacao"
              required
              value={formData.data_contratacao}
              onChange={handleInputChange}
              className="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500"
            />
          </div>
          
          {/* Status como select */}
          <div>
            <label htmlFor="status" className="block text-sm font-medium text-gray-700">Status</label>
            <select
              name="status"
              id="status"
              required
              value={formData.status}
              onChange={handleInputChange}
              className="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500"
            >
              <option value="Ativo">Ativo</option>
              <option value="Inativo">Inativo</option>
              <option value="Ferias">Férias</option>
              <option value="Licenca">Licença</option>
            </select>
          </div>
        </div>
      </FormModal>
      
      {/* Delete Confirmation Modal */}
      <DeleteConfirmationModal
        isOpen={isDeleteModalOpen}
        onClose={() => setIsDeleteModalOpen(false)}
        onConfirm={handleConfirmDelete}
        title="Confirmar Exclusão"
        message={`Tem certeza que deseja excluir o motorista ${currentMotorista?.nome}?`}
        isSubmitting={isSubmitting}
      />

      {/* Quick Statistics */}
      <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
        <div className="bg-white rounded-xl shadow-sm border border-gray-200 p-4 flex items-center">
          <div className="bg-blue-100 text-blue-600 p-3 rounded-lg mr-4">
            <svg xmlns="http://www.w3.org/2000/svg" className="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
            </svg>
          </div>
          <div>
            <div className="text-sm text-gray-500">Total de Motoristas</div>
            <div className="text-xl font-bold">{motoristas.length}</div>
          </div>
        </div>

        <div className="bg-white rounded-xl shadow-sm border border-gray-200 p-4 flex items-center">
          <div className="bg-green-100 text-green-600 p-3 rounded-lg mr-4">
            <svg xmlns="http://www.w3.org/2000/svg" className="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
            </svg>
          </div>
          <div>
            <div className="text-sm text-gray-500">Motoristas Ativos</div>
            <div className="text-xl font-bold">
              {motoristas.filter(motorista => 
                motorista.status === 'active' || 
                motorista.status === true || 
                motorista.status === 1
              ).length}
            </div>
          </div>
        </div>

        <div className="bg-white rounded-xl shadow-sm border border-gray-200 p-4 flex items-center">
          <div className="bg-yellow-100 text-yellow-600 p-3 rounded-lg mr-4">
            <svg xmlns="http://www.w3.org/2000/svg" className="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" />
            </svg>
          </div>
          <div>
            <div className="text-sm text-gray-500">Motoristas Inativos/Outras</div>
            <div className="text-xl font-bold">
              {motoristas.filter(motorista => 
                !(motorista.status === 'active' || 
                motorista.status === true || 
                motorista.status === 1)
              ).length}
            </div>
          </div>
        </div>
      </div>
    </div>
  );
};
=== /Users/micaelsantana/Documents/app-frontend/src/pages/PageHeader.jsx ===

import React from 'react';

export default function PageHeader({ 
  title, 
  description,
  actionButton = null 
}) {
  return (
    <div className="bg-blue-50 flex flex-col sm:flex-row 2xl:flex-row justify-between items-start sm:items-center xl:items-center gap-4 mb-4 sm:mb-6 xl:mb-8 2xl:mb-10">
      <div>
        <h1 className="text-2xl sm:text-3xl xl:text-4xl 2xl:text-5xl font-bold">{title}</h1>
        {description && <p className="text-gray-600 mt-1 sm:mt-1.5 xl:mt-2 text-sm sm:text-base xl:text-lg 2xl:text-xl">{description}</p>}
      </div>
      
      {actionButton && (
        <div className="self-stretch sm:self-auto">
          {actionButton}
        </div>
      )}
    </div>
  );
}
=== /Users/micaelsantana/Documents/app-frontend/src/pages/Onibus.jsx ===

import React, { useState, useEffect } from 'react';
import { OnibusService } from '../api/services';
import DataTable from '../components/common/DataTable';
import StatusBadge from '../components/common/StatusBadge';
import FormModal from '../components/common/FormModal';
import DeleteConfirmationModal from '../components/common/DeleteConfirmationModal';
import { useNotification } from '../contexts/NotificationContext';
import { processStatus } from '../utils/statusProcessor'
import { unmask } from '../utils/masks/processors';
import PlacaInput from '../utils/masks/components/PlacaInput';

const Onibus = () => {
  const [onibus, setOnibus] = useState([]);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState(null);
  const [isModalOpen, setIsModalOpen] = useState(false);
  const [isDeleteModalOpen, setIsDeleteModalOpen] = useState(false);
  const [currentOnibus, setCurrentOnibus] = useState(null);
  const [isSubmitting, setIsSubmitting] = useState(false);
  const [searchTerm, setSearchTerm] = useState('');
  const { showSuccess, showError } = useNotification ? useNotification() : { 
    showSuccess: () => {}, 
    showError: () => {} 
  };
  
  // Form state
  const [formData, setFormData] = useState({
    placa: '',
    modelo: '',
    capacidade: '',
    ano_fabricacao: '',
    status: true
  });

  useEffect(() => {
    fetchOnibus();
  }, []);

  const fetchOnibus = async () => {
    try {
      setLoading(true);
      const response = await OnibusService.getOnibus();
      
      if (response?.data?.data && Array.isArray(response.data.data)) {
        // Process data - ensure status is standardized
        const formattedData = response.data.data.map(bus => ({
          ...bus,
          status: processStatus(bus.status, 'onibus')
        }));
        setOnibus(formattedData);
      } else if (Array.isArray(response?.data)) {
        // Alternative API response format
        const formattedData = response.data.map(bus => ({
          ...bus,
          status: processStatus(bus.status, 'onibus')
        }));
        setOnibus(formattedData);
      } else {
        console.error('API returned unexpected data format');
        setError('Formato de dados inesperado. Contate o suporte.');
      }
    } catch (err) {
      console.error('Error fetching data:', err);
      setError('Erro ao carregar ônibus: ' + (err.response?.data?.message || err.message));
    } finally {
      setLoading(false);
    }
  };

  // Convert various status formats to a standardized format
  const convertStatus = (status) => {
    if (typeof status === 'boolean') {
      return status ? 'active' : 'inactive';
    } else if (typeof status === 'number') {
      return status === 1 ? 'active' : 'inactive';
    } else if (typeof status === 'string') {
      const statusLower = status.toLowerCase();
      if (statusLower === 'true' || statusLower === 'ativo' || statusLower === '1' || statusLower === 'active') {
        return 'active';
      } else if (statusLower === 'false' || statusLower === 'inativo' || statusLower === '0' || statusLower === 'inactive') {
        return 'inactive';
      } else if (statusLower === 'manutenção' || statusLower === 'manutencao' || statusLower === 'em manutenção' || statusLower === 'em manutencao') {
        return 'maintenance';
      }
      }
    return 'inactive'; // Default value
  };

  const handleInputChange = (e) => {
    const { name, value, type, checked } = e.target;
    setFormData({
      ...formData,
      [name]: type === 'checkbox' ? checked : value
    });
  };

  const openModal = (bus = null) => {
    if (bus) {
      // Edit mode
      setFormData({
        placa: bus.placa || '',
        modelo: bus.modelo || '',
        capacidade: bus.capacidade || '',
        ano_fabricacao: bus.ano_fabricacao || '',
        status: bus.status === 'active' || bus.status === true || bus.status === 1
      });
      setCurrentOnibus(bus);
    } else {
      // Create mode
      setFormData({
        placa: '',
        modelo: '',
        capacidade: '',
        ano_fabricacao: new Date().getFullYear(),
        status: true
      });
      setCurrentOnibus(null);
    }
    setIsModalOpen(true);
  };

  const handleSubmit = async (e) => {
    e.preventDefault();
    setIsSubmitting(true);
    
    try {
      // Prepare data for API - converting to expected format
      const apiData = {
        ...formData,
        placa: unmask(formData.placa),
        capacidade: parseInt(formData.capacidade),
        ano_fabricacao: parseInt(formData.ano_fabricacao)
      };
      
      console.log('Dados enviados para API:', formData);
      console.log('Dados processados:', formData);
      
      if (currentOnibus) {
        // Update
        await OnibusService.updateOnibus(currentOnibus.id, apiData);
        showSuccess('Ônibus atualizado com sucesso!');
      } else {
        // Create
        await OnibusService.createOnibus(apiData);
        showSuccess('Ônibus cadastrado com sucesso!');
      }
      setIsModalOpen(false);
      fetchOnibus();
    } catch (err) {
      console.error('Error saving onibus:', err);
      const errorMsg = err.message; // Get processed message from service layer
      setError('Erro ao salvar ônibus: ' + errorMsg);
      showError('Erro ao salvar ônibus: ' + errorMsg);
    } finally {
      setIsSubmitting(false);
    }
  };

  // Search and filter function
  const filteredOnibus = onibus.filter(bus => 
    bus.placa?.toLowerCase().includes(searchTerm.toLowerCase()) ||
    bus.modelo?.toLowerCase().includes(searchTerm.toLowerCase())
  );

  const columns = [
    { key: 'placa', header: 'Placa' },
    { key: 'modelo', header: 'Modelo' },
    { key: 'ano_fabricacao', header: 'Ano' },
    { key: 'capacidade', header: 'Capacidade', format: (item) => `${item.capacidade} passageiros` },
    { 
      key: 'status', 
      header: 'Status',
      format: (item) => <StatusBadge status={item.status} type="onibus" />
    }
  ];

  const handleEdit = (bus) => {
    openModal(bus);
  };

  const handleDelete = (bus) => {
    setCurrentOnibus(bus);
    setIsDeleteModalOpen(true);
  };

  const handleConfirmDelete = async () => {
    try {
      await OnibusService.deleteOnibus(currentOnibus.id);
      showSuccess('Ônibus excluído com sucesso!');
      setIsDeleteModalOpen(false);
      setCurrentOnibus(null);
      fetchOnibus();
    } catch (err) {
      const errorMsg = err.message; // Get processed message from service layer
      setError('Erro ao excluir ônibus: ' + errorMsg);
      showError('Erro ao excluir ônibus: ' + errorMsg);
    }
  };

  return (
    <div className="space-y-6">
      <div className="flex justify-between items-center mb-6">
        <h1 className="text-2xl font-bold">Gerenciamento de Ônibus</h1>
        <button 
          className="bg-blue-500 hover:bg-blue-600 text-white py-2 px-4 rounded flex items-center"
          onClick={() => openModal()}
        >
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth={1.5} stroke="currentColor" className="w-5 h-5 mr-2">
            <path strokeLinecap="round" strokeLinejoin="round" d="M12 4.5v15m7.5-7.5h-15" />
          </svg>
          Novo Ônibus
        </button>
      </div>
      
      <div className="bg-white rounded-lg shadow mb-6">
        <div className="border-b px-6 py-4 flex justify-between items-center">
          <h2 className="font-bold text-lg">Frota de Ônibus</h2>
          
          {/* Search box */}
          <div className="relative w-full sm:w-64">
            <div className="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
              <svg className="h-5 w-5 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
              </svg>
            </div>
            <input
              type="text"
              placeholder="Buscar ônibus..."
              className="block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg bg-gray-50 focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-sm"
              value={searchTerm}
              onChange={(e) => setSearchTerm(e.target.value)}
            />
          </div>
        </div>
        
        <div className="p-4">
          {error && (
            <div className="p-4 mb-4 text-red-600 bg-red-50 rounded-md flex items-start">
              <svg xmlns="http://www.w3.org/2000/svg" className="h-5 w-5 mr-2 mt-0.5 flex-shrink-0" viewBox="0 0 20 20" fill="currentColor">
                <path fillRule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clipRule="evenodd" />
              </svg>
              <span>{error}</span>
            </div>
          )}
          
          <DataTable
            columns={columns}
            data={filteredOnibus}
            onEdit={handleEdit}
            onDelete={handleDelete}
            loading={loading}
            error={null} // Error is already shown above
          />
        </div>
      </div>
      
      {/* Modal Form */}
      <FormModal 
        isOpen={isModalOpen} 
        onClose={() => setIsModalOpen(false)} 
        title={currentOnibus ? "Editar Ônibus" : "Novo Ônibus"}
        onSubmit={handleSubmit}
        isSubmitting={isSubmitting}
      >
        <div className="grid grid-cols-1 gap-4 mb-4">
          <div>
            <label htmlFor="placa" className="block text-sm font-medium text-gray-700">Placa</label>
            <PlacaInput
              id="placa"
              required
              value={formData.placa}
              onChange={handleInputChange}
              className="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500"
            />
          </div>
          
          <div>
            <label htmlFor="modelo" className="block text-sm font-medium text-gray-700">Modelo</label>
            <input
              type="text"
              name="modelo"
              id="modelo"
              required
              value={formData.modelo}
              onChange={handleInputChange}
              className="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500"
            />
          </div>
          
          <div>
            <label htmlFor="capacidade" className="block text-sm font-medium text-gray-700">Capacidade</label>
            <input
              type="number"
              name="capacidade"
              id="capacidade"
              required
              min="1"
              value={formData.capacidade}
              onChange={handleInputChange}
              className="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500"
            />
          </div>
          
          <div>
            <label htmlFor="ano_fabricacao" className="block text-sm font-medium text-gray-700">Ano de Fabricação</label>
            <input
              type="number"
              name="ano_fabricacao"
              id="ano_fabricacao"
              required
              min="1990"
              max={new Date().getFullYear()}
              value={formData.ano_fabricacao}
              onChange={handleInputChange}
              className="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500"
            />
          </div>
          
          <div className="flex items-center">
            <input
              type="checkbox"
              name="status"
              id="status"
              checked={formData.status}
              onChange={handleInputChange}
              className="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"
            />
            <label htmlFor="status" className="ml-2 block text-sm text-gray-900">Ativo</label>
          </div>
        </div>
      </FormModal>
      
      {/* Delete Confirmation Modal - moved outside of FormModal */}
      <DeleteConfirmationModal
        isOpen={isDeleteModalOpen}
        onClose={() => setIsDeleteModalOpen(false)}
        onConfirm={handleConfirmDelete}
        title="Confirmar Exclusão"
        message={`Tem certeza que deseja excluir o ônibus de placa ${currentOnibus?.placa}?`}
        isSubmitting={isSubmitting}
      />
      
      {/* Stats Cards */}
      <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
        <div className="bg-white rounded-xl shadow-sm border border-gray-200 p-4 flex items-center">
          <div className="bg-blue-100 text-blue-600 p-3 rounded-lg mr-4">
            <svg xmlns="http://www.w3.org/2000/svg" className="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z" />
            </svg>
          </div>
          <div>
            <div className="text-sm text-gray-500">Total de Ônibus</div>
            <div className="text-xl font-bold">{onibus.length}</div>
          </div>
        </div>

        <div className="bg-white rounded-xl shadow-sm border border-gray-200 p-4 flex items-center">
          <div className="bg-green-100 text-green-600 p-3 rounded-lg mr-4">
            <svg xmlns="http://www.w3.org/2000/svg" className="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
            </svg>
          </div>
          <div>
            <div className="text-sm text-gray-500">Ônibus Ativos</div>
            <div className="text-xl font-bold">
              {onibus.filter(bus => bus.status === 'active').length}
            </div>
          </div>
        </div>

        <div className="bg-white rounded-xl shadow-sm border border-gray-200 p-4 flex items-center">
          <div className="bg-yellow-100 text-yellow-600 p-3 rounded-lg mr-4">
            <svg xmlns="http://www.w3.org/2000/svg" className="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" />
            </svg>
          </div>
          <div>
            <div className="text-sm text-gray-500">Ônibus Inativos</div>
            <div className="text-xl font-bold">
              {onibus.filter(bus => bus.status === 'inactive' || bus.status === 'maintenance').length}
            </div>
          </div>
        </div>
      </div>
    </div>
  );
};

export default Onibus;
=== /Users/micaelsantana/Documents/app-frontend/package.json ===

{
  "type": "module",
  "name": "transporte-escolar-frontend",
  "private": true,
  "version": "0.1.0",
  "scripts": {
    "dev": "vite",
    "build": "vite build",
    "lint": "eslint . --ext js,jsx --report-unused-disable-directives --max-warnings 0",
    "preview": "vite preview"
  },
  "dependencies": {
    "@heroicons/react": "^2.1.1",
    "axios": "^1.6.2",
    "prop-types": "^15.8.1",
    "react": "^18.2.0",
    "react-dom": "^18.2.0",
    "react-input-mask": "^2.0.4",
    "react-number-format": "^5.4.3",
    "react-router-dom": "^6.22.1"
  },
  "devDependencies": {
    "@types/react": "^18.2.45",
    "@types/react-dom": "^18.2.18",
    "@vitejs/plugin-react": "^4.2.1",
    "autoprefixer": "^10.4.21",
    "eslint": "^8.55.0",
    "eslint-plugin-react": "^7.33.2",
    "eslint-plugin-react-hooks": "^4.6.0",
    "eslint-plugin-react-refresh": "^0.4.5",
    "postcss": "^8.5.3",
    "tailwindcss": "^3.4.17",
    "vite": "^5.0.0"
  }
}

=== /Users/micaelsantana/Documents/app-frontend/tailwind.config.cjs ===

/** @type {import('tailwindcss').Config} */
module.exports = {
    content: [
      "./index.html",
      "./src/**/*.{js,ts,jsx,tsx}",
    ],
    theme: {
      extend: {
        screens: {
          '3xl': '1920px',
          '4xl': '2560px'
        },
        colors: {
          primary: '#1e40af',
          secondary: '#1d4ed8',
          success: '#16a34a',
          danger: '#dc2626'
        }
      },
    },
    plugins: [],
    safelist: [
      // Add dynamic classes that might be purged
      'bg-blue-100',
      'text-blue-500',
      'bg-green-100',
      'text-green-500',
      'bg-purple-100',
      'text-purple-500',
      'bg-yellow-100',
      'text-yellow-800',
      'bg-red-100',
      'text-red-800',
    ]
  }
=== /Users/micaelsantana/Documents/app-frontend/postcss.config.cjs ===

module.exports = {
  plugins: {
    tailwindcss: {},
    autoprefixer: {},
  },
}
=== /Users/micaelsantana/Documents/app-frontend/vite.config.js ===

import { defineConfig } from 'vite'
import react from '@vitejs/plugin-react'

export default defineConfig({
  plugins: [react()],
  server: {
    port: 5173,
    proxy: {
      '/api': {
        target: 'http://localhost:8000',
        changeOrigin: true,
        secure: false
      }
    }
  },
  build: {
    outDir: 'dist',
    sourcemap: true
  },
  resolve: {
    alias: {
      '@': '/src'
    }
  }
})